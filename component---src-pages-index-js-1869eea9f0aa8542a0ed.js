"use strict";(self.webpackChunkblog_jh8459_com=self.webpackChunkblog_jh8459_com||[]).push([[293],{3229:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=a(4506),s=(a(6910),a(9391),a(6540)),n=a(4794),o=a(6462),c=a(6263),l=a(9141),u=a(7108),i=a(603),d=a(2720),h=a(1253);var f=a(3562);var g=function(e){let{data:t}=e;const a=t.allMarkdownRemark.edges.map(e=>{let{node:t}=e;return new h.A(t)}),{author:g,language:w}=t.site.siteMetadata,m=["All"].concat((0,r.A)((e=>{const t=new Set;return e.forEach(e=>{let{categories:a}=e;return a.forEach(e=>t.add(e))}),(0,r.A)(t).sort((e,t)=>"featured"===e?-1:"featured"===t?1:0)})(a))),v=m.findIndex(e=>"featured"===e),{0:b,1:p}=(0,s.useState)(-1===v?0:v),A=(0,o.useLocation)(),S=new URLSearchParams(A.search).get("sort")||"date-desc",{0:k,1:C}=(0,s.useState)(S),E=(0,s.useCallback)((e,t)=>p(t),[]),D=(0,s.useCallback)(e=>{const t=e.target.value;C(t);const a=new URLSearchParams(A.search);a.set("sort",t),(0,n.navigate)(A.pathname+"?"+a.toString(),{replace:!0})},[A]),{0:L,1:M}=(0,s.useState)({}),{0:R,1:_}=(0,s.useState)(!0);(0,s.useEffect)(()=>{_(!0);const e=(0,l.C3)(c.A),t=(0,l.KR)(e,"posts");(0,l.Jt)(t).then(e=>{e.exists()&&M(e.val())}).catch(e=>{console.error("Firebase read failed: ",e)}).finally(()=>{_(!1)})},[]);const j=(0,s.useMemo)(()=>{const e=a.map(e=>{var t;return Object.assign({},e,{views:(null===(t=L[e.slug.replace(/\//g,"")])||void 0===t?void 0:t.views)||0})});switch(k){case"title-asc":return e.sort((e,t)=>e.title.localeCompare(t.title));case"views-desc":return e.sort((e,t)=>t.views-e.views);case"date-asc":return e.sort((e,t)=>new Date(e.date)-new Date(t.date));default:return e.sort((e,t)=>new Date(t.date)-new Date(e.date))}},[a,L,k]);return s.createElement(u.A,null,s.createElement(i.A,{title:"JHLog"}),s.createElement(d.A,{author:g,language:w}),s.createElement(f.A,{posts:j,onChange:E,tabs:m,tabIndex:b,showMoreButton:!0,defaultThumbnail:t.defaultThumbnail,sortType:k,onSortChange:D,loadingViews:R}))}}}]);
//# sourceMappingURL=component---src-pages-index-js-1869eea9f0aa8542a0ed.js.map