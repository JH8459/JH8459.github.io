"use strict";(self.webpackChunkblog_jh8459_com=self.webpackChunkblog_jh8459_com||[]).push([[245],{3923:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});a(590),a(8895);var n=a(7116),r=a(758),s=a(477),o=a(61),l=a(4839),c=a(4402),u=a(1402),i=a(1688),d=a(5814),g=a(8067);var h=a(1449);var m=function(e){let{data:t}=e;const a=t.allMarkdownRemark.edges.map(e=>{let{node:t}=e;return new g.A(t)}),{author:m,language:f}=t.site.siteMetadata,w=["All"].concat((0,n.A)((e=>{const t=new Set;return e.forEach(e=>{let{categories:a}=e;return a.forEach(e=>t.add(e))}),(0,n.A)(t).sort((e,t)=>"featured"===e?-1:"featured"===t?1:0)})(a))),v=w.findIndex(e=>"featured"===e),{0:p,1:b}=(0,r.useState)(-1===v?0:v),A=(0,o.useLocation)(),S=new URLSearchParams(A.search).get("sort")||"date-desc",{0:k,1:C}=(0,r.useState)(S),E=(0,r.useCallback)((e,t)=>{b(t)},[]),T=(0,r.useCallback)(e=>{const t=e.target.value;C(t);const a=new URLSearchParams(A.search);a.set("sort",t),(0,s.navigate)(A.pathname+"?"+a.toString(),{replace:!0})},[A]),{0:D,1:M}=(0,r.useState)({}),{0:R,1:_}=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=(0,c.C3)(l.A),t=(0,c.KR)(e,"posts");(0,c.Jt)(t).then(e=>{e.exists()&&M(e.val())}).catch(e=>{console.error("Firebase read failed: ",e)}).finally(()=>{_(!1)})},[]);const j=(0,r.useMemo)(()=>{const e=a.map(e=>{var t;return Object.assign({},e,{views:(null===(t=D[e.slug.replace(/\//g,"")])||void 0===t?void 0:t.views)||0})});switch(k){case"title-asc":return e.sort((e,t)=>e.title.localeCompare(t.title));case"views-desc":return e.sort((e,t)=>{var a,n;return(null!==(a=t.views)&&void 0!==a?a:0)-(null!==(n=e.views)&&void 0!==n?n:0)});case"date-asc":return e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime());default:return e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}},[a,D,k]);return r.createElement(u.A,null,r.createElement(i.A,{title:"JH's Engineering Notes",pathname:A.pathname}),r.createElement(d.A,{author:m,language:f}),r.createElement(h.A,{posts:j,onChange:E,tabs:w,tabIndex:p,showMoreButton:!0,defaultThumbnail:t.defaultThumbnail,sortType:k,onSortChange:T,loadingViews:R}))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-54cab02ce62facec2918.js.map