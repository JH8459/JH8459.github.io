{"version":3,"file":"component---src-templates-blog-template-tsx-f65e0dc6bf3087168d06.js","mappings":"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","sources":["webpack://blog.jh8459.com/./src/components/post-header/view/index.tsx","webpack://blog.jh8459.com/./src/components/post-header/index.tsx","webpack://blog.jh8459.com/./src/components/post-navigator/index.tsx","webpack://blog.jh8459.com/./src/components/post-content/index.tsx","webpack://blog.jh8459.com/./src/components/giscus/index.tsx","webpack://blog.jh8459.com/./src/templates/blog-template.tsx"],"sourcesContent":["import React from 'react';\nimport { FaSpinner, FaEye } from 'react-icons/fa';\n\n/**\n * @description 클라이언트 마운트 여부 체크\n * @return {boolean} 마운트 여부\n */\nfunction useHasMounted(): boolean {\n  const [mounted, setMounted] = React.useState(false);\n  React.useEffect(() => setMounted(true), []);\n  return mounted;\n}\n\ninterface ViewCountProps {\n  viewCount?: number | string | null;\n  allowZero?: boolean;\n}\n\n/**\n * @description 조회수 표시 컴포넌트\n * @param {ViewCountProps} props 조회수 props\n * @return {JSX.Element}\n */\nexport default function ViewCount({ viewCount, allowZero = false }: ViewCountProps) {\n  const hasMounted = useHasMounted();\n  const n = viewCount == null ? null : Number(viewCount);\n  // 값이 유효하고 표시 조건을 만족하는지 판단\n  const hasNumber = typeof n === 'number' && Number.isFinite(n) && (allowZero ? true : n > 0);\n  const pending = !hasMounted || !hasNumber;\n  const displayValue = typeof n === 'number' ? n : 0;\n\n  return (\n    <span className=\"inline-flex items-center\" aria-live=\"polite\" aria-busy={pending}>\n      <FaEye className=\"w-4 h-4 mr-1\" /> {/* Eye icon always visible */}\n      {pending ? (\n        <span className=\"flex items-center\">\n          <FaSpinner className=\"animate-spin text-[1em] text-[var(--secondary-text-color)] ml-1\" />\n        </span>\n      ) : (\n        <span className=\"flex items-center ml-1\">{displayValue}</span>\n      )}\n    </span>\n  );\n}\n","import { Link } from 'gatsby';\nimport React, { useState } from 'react';\nimport ViewCount from './view';\nimport { FaRegClock, FaCalendarAlt } from 'react-icons/fa';\nimport type { PostModel } from '../../types/post';\n\ninterface PostHeaderProps {\n  post: PostModel;\n  viewCount?: number;\n}\n\n/**\n * @description 포스트 헤더\n * @param {PostHeaderProps} props 헤더 props\n * @return {JSX.Element}\n */\nfunction PostHeader({ post, viewCount }: PostHeaderProps) {\n  const [showTooltip, setShowTooltip] = useState<boolean>(false);\n  // 7일 이내 게시글은 신규 표시\n  const isNew =\n    Math.ceil((new Date().getTime() - new Date(post.date).getTime()) / (1000 * 3600 * 24)) <= 7;\n\n  return (\n    <header className=\"flex flex-col justify-center w-full pb-[10px] border-b border-[var(--post-card-border-color)] mt-[40px] mb-[40px] break-keep\">\n      <h1 className=\"title font-semibold text-[32px] text-[var(--primary-text-color)] mb-[6px] leading-[1.3]\">\n        {post.title}\n        {isNew && (\n          <span\n            className=\"inline-block align-super text-red-500 font-bold text-base\"\n            style={{ textShadow: '1px 1px 2px rgba(0,0,0,0.3)', marginLeft: '4px' }}\n          >\n            N\n          </span>\n        )}\n      </h1>\n      <div className=\"flex justify-between items-center w-full mt-[10px]\">\n        <div className=\"categories flex items-center\">\n          {post.emoji && <div className=\"text-[18px] mr-[4px]\">{post.emoji}</div>}\n          {post.categories.map((category) => (\n            <Link\n              className=\"category mr-[4px] font-semibold text-[var(--primary-text-color)] hover:underline text-[18px]\"\n              key={category}\n              to={`/posts/${category}`}\n            >\n              {category}\n            </Link>\n          ))}\n        </div>\n        <div className=\"info flex flex-wrap leading-[1.5] text-base font-medium text-[var(--secondary-text-color)] justify-end items-center space-x-4\">\n          <button\n            type=\"button\"\n            className=\"relative cursor-pointer p-1 transition-all duration-200 hover:scale-105 bg-transparent border-none text-left font-medium text-[var(--secondary-text-color)] flex items-center\"\n            onMouseEnter={() => setShowTooltip(true)}\n            onMouseLeave={() => setShowTooltip(false)}\n            onFocus={() => setShowTooltip(true)}\n            onBlur={() => setShowTooltip(false)}\n          >\n            <FaRegClock className=\"w-4 h-4 mr-1\" />\n            <strong>{`${post.timeToRead} min`}</strong>\n            {showTooltip && (\n              <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 w-max p-2 bg-black text-white text-xs rounded\">\n                {`이 게시글을 읽는데 ${post.timeToRead}분 정도의 시간이 소요될 것으로 예상됩니다.`}\n              </div>\n            )}\n          </button>\n          <ViewCount viewCount={viewCount} />\n          <div className=\"flex items-center\">\n            <FaCalendarAlt className=\"w-4 h-4 mr-1\" /> {post.date}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\nexport default PostHeader;\n","import { Link } from 'gatsby';\nimport React from 'react';\nimport type { PostModel } from '../../types/post';\n\ninterface PostNavigatorProps {\n  prevPost?: PostModel | null;\n  nextPost?: PostModel | null;\n}\n\n/**\n * @description 이전/다음 포스트 네비게이터\n * @param {PostNavigatorProps} props 네비게이터 props\n * @return {JSX.Element}\n */\nfunction PostNavigator({ prevPost, nextPost }: PostNavigatorProps) {\n  return (\n    <div className=\"grid w-full grid-cols-[49.3%_49.3%] gap-[1.4%] mt-[40px]\">\n      {nextPost && (\n        <Link\n          className=\"post-card flex flex-col w-full border border-[var(--post-card-border-color)] rounded-[6px] p-[15px] text-[var(--primary-text-color)] cursor-pointer transition-transform duration-200 hover:scale-105 mr-auto\"\n          key={nextPost.id}\n          to={nextPost.slug}\n        >\n          <div className=\"direction text-[14px] font-medium text-gray-500 mb-[5px]\">이전 글</div>\n          <div className=\"title text-[16px] font-semibold leading-[1.4]\">{nextPost.title}</div>\n          <div className=\"flex justify-between items-center mt-[5px]\">\n            <div className=\"flex items-center text-[14px] font-medium text-[var(--primary-text-color)]\">\n              {nextPost.emoji && <span className=\"mr-[4px]\">{nextPost.emoji}</span>}\n              {nextPost.categories &&\n                nextPost.categories.map((category) => (\n                  <span key={category} className=\"mr-[4px]\">\n                    {category}\n                  </span>\n                ))}\n            </div>\n            <div className=\"text-[12px] text-[var(--secondary-text-color)]\">{nextPost.date}</div>\n          </div>\n        </Link>\n      )}\n      {prevPost && (\n        <Link\n          className=\"post-card flex flex-col w-full border border-[var(--post-card-border-color)] rounded-[6px] p-[15px] text-[var(--primary-text-color)] cursor-pointer transition-transform duration-200 hover:scale-105 ml-auto\"\n          key={prevPost.id}\n          to={prevPost.slug}\n        >\n          <div className=\"direction text-[14px] font-medium text-gray-500 mb-[5px]\">다음 글</div>\n          <div className=\"title text-[16px] font-semibold leading-[1.4]\">{prevPost.title}</div>\n          <div className=\"flex justify-between items-center mt-[5px]\">\n            <div className=\"flex items-center text-[14px] font-medium text-[var(--primary-text-color)]\">\n              {prevPost.emoji && <span className=\"mr-[4px]\">{prevPost.emoji}</span>}\n              {prevPost.categories &&\n                prevPost.categories.map((category) => (\n                  <span key={category} className=\"mr-[4px]\">\n                    {category}\n                  </span>\n                ))}\n            </div>\n            <div className=\"text-[12px] text-[var(--secondary-text-color)]\">{prevPost.date}</div>\n          </div>\n        </Link>\n      )}\n    </div>\n  );\n}\n\nexport default PostNavigator;\n","import React from 'react';\n\ninterface PostContentProps {\n  html?: string;\n}\n\n/**\n * @description 포스트 본문 영역\n * @param {PostContentProps} props 본문 props\n * @return {JSX.Element}\n */\nfunction PostContent({ html }: PostContentProps) {\n  return (\n    <div className=\"flex flex-col justify-center w-full mb-[20px]\">\n      <div\n        className=\"prose dark:prose-invert prose-img:mx-auto mx-auto w-full max-w-[720px]\"\n        dangerouslySetInnerHTML={{ __html: html ?? '' }}\n      />\n    </div>\n  );\n}\n\nexport default PostContent;\n","import React, { useEffect, useRef } from 'react';\nimport { useStaticQuery, graphql } from 'gatsby';\nimport type { SiteMetadata } from '../../types/site';\n\nconst src = 'https://giscus.app/client.js';\n\ninterface GiscusProps {\n  repo?: string;\n  path?: string;\n}\n\ninterface GiscusQueryData {\n  site: {\n    siteMetadata: SiteMetadata;\n  };\n}\n\n/**\n * @description Giscus 댓글 위젯\n * @param {GiscusProps} props 위젯 props\n * @return {JSX.Element}\n */\nfunction Giscus({ repo, path }: GiscusProps) {\n  const rootElm = useRef<HTMLDivElement | null>(null);\n  const isGiscusLoaded = useRef<boolean>(false);\n\n  const data = useStaticQuery<GiscusQueryData>(graphql`\n    query {\n      site {\n        siteMetadata {\n          comments {\n            giscus {\n              repo\n              repoId\n              category\n              categoryId\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  const {\n    repo: repoFromMeta,\n    repoId,\n    category,\n    categoryId,\n  } = data.site.siteMetadata.comments?.giscus || {};\n\n  useEffect(() => {\n    if (!rootElm.current || isGiscusLoaded.current) return;\n    if (!repoFromMeta || !repoId || !category || !categoryId) return;\n\n    // 테마 정보를 읽어 Giscus 테마를 결정\n    const storedIsDarkMode = localStorage.getItem('isDarkMode');\n    const giscus = document.createElement('script');\n    const giscusConfig: Record<string, string> = {\n      src,\n      'data-repo': repo ?? repoFromMeta,\n      'data-repo-id': repoId,\n      'data-category': category,\n      'data-category-id': categoryId,\n      'data-mapping': 'pathname',\n      'data-strict': '0',\n      'data-reactions-enabled': '1',\n      'data-emit-metadata': '0',\n      'data-input-position': 'bottom',\n      'data-theme': JSON.parse(storedIsDarkMode || 'false') ? 'dark' : 'light',\n      'data-lang': 'ko',\n      crossorigin: 'anonymous',\n      async: 'true',\n    };\n\n    Object.keys(giscusConfig).forEach((configKey) => {\n      giscus.setAttribute(configKey, giscusConfig[configKey]);\n    });\n\n    // 위젯 스크립트 삽입\n    rootElm.current.appendChild(giscus);\n    isGiscusLoaded.current = true;\n  }, [repoFromMeta, repo, repoId, category, categoryId, path]);\n\n  return <div id=\"giscus-comments\" ref={rootElm} />;\n}\n\nexport default Giscus;\n","import React, { useEffect, useState } from 'react';\nimport firebase from 'gatsby-plugin-firebase-v9.0';\nimport { getDatabase, ref, set, get, child, update } from 'firebase/database';\nimport { graphql, type PageProps } from 'gatsby';\nimport Layout from '../layout';\nimport Seo from '../components/seo';\nimport PostHeader from '../components/post-header';\nimport PostNavigator from '../components/post-navigator';\nimport Post from '../models/post';\nimport PostContent from '../components/post-content';\nimport Giscus from '../components/giscus';\nimport type { PostNode } from '../types/post';\nimport type { SiteMetadata } from '../types/site';\n\ninterface BlogTemplateData {\n  cur: PostNode;\n  next?: PostNode | null;\n  prev?: PostNode | null;\n  site?: {\n    siteMetadata?: SiteMetadata;\n  };\n}\n\ntype BlogTemplateProps = PageProps<BlogTemplateData>;\n\n/**\n * @description 블로그 상세 페이지 템플릿\n * @param {BlogTemplateProps} props 페이지 props\n * @return {JSX.Element}\n */\nfunction BlogTemplate({ data, location }: BlogTemplateProps) {\n  const [viewCount, setViewCount] = useState<number>(0);\n\n  const curPost = new Post(data.cur);\n  const prevPost = data.prev ? new Post(data.prev) : null;\n  const nextPost = data.next ? new Post(data.next) : null;\n  const { siteUrl, comments } = data.site?.siteMetadata || {};\n  const giscusRepo = comments?.giscus?.repo;\n\n  useEffect(() => {\n    if (!siteUrl) return;\n\n    // Firebase 키는 slug에서 '/'를 제거해 사용\n    const key = curPost.slug.replace(/\\//g, '');\n\n    const database = getDatabase(firebase);\n    const postRef = ref(database, 'posts/' + key);\n\n    get(child(ref(database), `posts/${key}`))\n      .then((snapshot) => {\n        if (snapshot.exists()) {\n          const currentViews = snapshot.val().views as number;\n\n          if (process.env.NODE_ENV !== 'development') {\n            const updatedViews = currentViews + 1;\n\n            update(postRef, { views: updatedViews });\n            setViewCount(updatedViews);\n          } else {\n            setViewCount(currentViews);\n          }\n        } else if (process.env.NODE_ENV !== 'development') {\n          // 문서가 없으면 기본 조회수 1로 설정\n          set(postRef, { views: 1 });\n          setViewCount(1);\n        }\n      })\n      .catch((error) => {\n        console.error('Firebase read failed: ', error);\n      });\n  }, [siteUrl, curPost.slug]);\n\n  return (\n    <Layout tableOfContents={curPost.tableOfContents}>\n      <Seo title={curPost?.title} description={curPost?.excerpt} pathname={location.pathname} />\n      <PostHeader post={curPost} viewCount={viewCount} />\n      <PostContent html={curPost.html} />\n      <PostNavigator prevPost={prevPost} nextPost={nextPost} />\n      <div className=\"mt-8 w-full\">\n        {giscusRepo && <Giscus repo={giscusRepo} path={curPost.slug} />}\n      </div>\n    </Layout>\n  );\n}\n\nexport default BlogTemplate;\n\nexport const pageQuery = graphql`\n  query ($slug: String, $nextSlug: String, $prevSlug: String) {\n    cur: markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      html\n      excerpt(pruneLength: 500, truncate: true)\n      timeToRead\n      tableOfContents\n      frontmatter {\n        date(formatString: \"YYYY.MM.DD\")\n        title\n        categories\n        author\n        emoji\n      }\n      fields {\n        slug\n      }\n    }\n\n    next: markdownRemark(fields: { slug: { eq: $nextSlug } }) {\n      id\n      frontmatter {\n        date(formatString: \"YYYY.MM.DD\")\n\n        title\n        categories\n        author\n        emoji\n      }\n      fields {\n        slug\n      }\n    }\n\n    prev: markdownRemark(fields: { slug: { eq: $prevSlug } }) {\n      id\n      frontmatter {\n        date(formatString: \"YYYY.MM.DD\")\n        title\n        categories\n        author\n        emoji\n      }\n      fields {\n        slug\n      }\n    }\n\n    site {\n      siteMetadata {\n        siteUrl\n        comments {\n          giscus {\n            repo\n            repoId\n            category\n            categoryId\n          }\n        }\n      }\n    }\n  }\n`;\n"],"names":["ViewCount","_ref","viewCount","allowZero","hasMounted","mounted","setMounted","React","useHasMounted","n","Number","hasNumber","isFinite","pending","displayValue","className","FaEye","FaSpinner","post","showTooltip","setShowTooltip","useState","isNew","Math","ceil","Date","getTime","date","title","style","textShadow","marginLeft","emoji","categories","map","category","Link","key","to","type","onMouseEnter","onMouseLeave","onFocus","onBlur","FaRegClock","timeToRead","FaCalendarAlt","prevPost","nextPost","id","slug","html","dangerouslySetInnerHTML","__html","_data$site$siteMetada","repo","path","rootElm","useRef","isGiscusLoaded","data","useStaticQuery","repoFromMeta","repoId","categoryId","site","siteMetadata","comments","giscus","useEffect","current","storedIsDarkMode","localStorage","getItem","document","createElement","giscusConfig","src","JSON","parse","crossorigin","async","Object","keys","forEach","configKey","setAttribute","appendChild","ref","_data$site","_comments$giscus","location","setViewCount","curPost","Post","cur","prev","next","siteUrl","giscusRepo","replace","database","getDatabase","firebase","postRef","get","child","then","snapshot","exists","updatedViews","val","views","update","set","catch","error","console","Layout","tableOfContents","Seo","description","excerpt","pathname","PostHeader","PostContent","PostNavigator","Giscus"],"sourceRoot":""}