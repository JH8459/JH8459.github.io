"use strict";(self.webpackChunkblog_jh8459_com=self.webpackChunkblog_jh8459_com||[]).push([[555],{9124:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=a(6540),r=a(4794),n=a(6462),l=a(6263),o=a(9141),c=a(7108),i=a(603),u=a(1253);var m=function(e){let{title:t,subtitle:a}=e;return s.createElement("div",{className:"flex flex-col items-center justify-center mt-[30px] mb-[30px]"},s.createElement("h1",{className:"w-fit pb-[7px] mb-[15px] text-[40px] font-bold text-center border-b-[3px] border-[var(--primary-text-color)]"},t),s.createElement("p",{className:"pb-[10px] text-[20px] font-medium text-center"},a))},p=a(1181);var d=function(e){let{pageContext:t}=e;const{edges:a,currentCategory:d,defaultThumbnail:f,categories:b}=t,h=(0,n.useLocation)(),x=new URLSearchParams(h.search).get("sort")||"date-desc",{0:g,1:v}=(0,s.useState)(x),w=(0,s.useMemo)(()=>a.map(e=>{let{node:t}=e;return new u.A(t)}),[a]),C=(0,s.useMemo)(()=>b.findIndex(e=>e===d),[b,d]),E=(0,s.useCallback)((e,t)=>{if(0===t)return(0,r.navigate)("/posts");(0,r.navigate)(`/posts/${b[t]}`)},[b]),S=(0,s.useCallback)(e=>{const t=e.target.value;v(t);const a=new URLSearchParams(h.search);a.set("sort",t),(0,r.navigate)(`${h.pathname}?${a.toString()}`,{replace:!0})},[h]),{0:k,1:y}=(0,s.useState)({}),{0:A,1:$}=(0,s.useState)(!0);(0,s.useEffect)(()=>{$(!0);const e=(0,o.C3)(l.A),t=(0,o.KR)(e,"posts");(0,o.Jt)(t).then(e=>{e.exists()&&y(e.val())}).catch(e=>{console.error("Firebase read failed: ",e)}).finally(()=>{$(!1)})},[]);const _=(0,s.useMemo)(()=>{const e=w.map(e=>{var t;return{...e,views:(null===(t=k[e.slug.replace(/\//g,"")])||void 0===t?void 0:t.views)||0}});switch(g){case"title-asc":return e.sort((e,t)=>e.title.localeCompare(t.title));case"views-desc":return e.sort((e,t)=>t.views-e.views);default:return e.sort((e,t)=>new Date(t.date)-new Date(e.date))}},[w,k,g]);return s.createElement(c.A,null,s.createElement(i.A,{title:"Posts"}),s.createElement(m,{title:b[C],subtitle:`${w.length} posts`}),s.createElement(p.A,{tabIndex:C,onChange:E,tabs:b,posts:_,defaultThumbnail:f,sortType:g,onSortChange:S,loadingViews:A}))}}}]);
//# sourceMappingURL=component---src-templates-category-template-js-cdba31588c4c94eaafa4.js.map