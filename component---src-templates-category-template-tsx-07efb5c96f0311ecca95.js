"use strict";(self.webpackChunkblog_jh8459_com=self.webpackChunkblog_jh8459_com||[]).push([[83],{6009:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});a(590),a(8895);var s=a(758),n=a(477),r=a(61),l=a(4839),o=a(4402),c=a(1402),i=a(1688),u=a(8067);var m=function(e){let{title:t,subtitle:a}=e;return s.createElement("div",{className:"mt-8 mb-4 w-full pb-5"},s.createElement("h1",{className:"mb-2 text-[34px] font-extrabold tracking-[-0.02em] text-[var(--primary-text-color)] md:text-[40px]"},t),s.createElement("p",{className:"text-[14px] font-semibold uppercase tracking-[0.08em] text-[var(--secondary-text-color)]"},a))},d=a(1449);var p=function(e){let{pageContext:t}=e;const{edges:a,currentCategory:p,defaultThumbnail:g,categories:v}=t,h=(0,r.useLocation)(),b=new URLSearchParams(h.search).get("sort")||"date-desc",{0:f,1:w}=(0,s.useState)(b),x=(0,s.useMemo)(()=>a.map(e=>{let{node:t}=e;return new u.A(t)}),[a]),C=(0,s.useMemo)(()=>v.findIndex(e=>e===p),[v,p]),k=(0,s.useCallback)((e,t)=>{if(0===t)return(0,n.navigate)("/posts");(0,n.navigate)("/posts/"+v[t])},[v]),E=(0,s.useCallback)(e=>{const t=e.target.value;w(t);const a=new URLSearchParams(h.search);a.set("sort",t),(0,n.navigate)(h.pathname+"?"+a.toString(),{replace:!0})},[h]),{0:S,1:y}=(0,s.useState)({}),{0:A,1:T}=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=(0,o.C3)(l.A),t=(0,o.KR)(e,"posts");(0,o.Jt)(t).then(e=>{e.exists()&&y(e.val())}).catch(e=>{console.error("Firebase read failed: ",e)}).finally(()=>{T(!1)})},[]);const _=(0,s.useMemo)(()=>{const e=x.map(e=>{var t;return Object.assign({},e,{views:(null===(t=S[e.slug.replace(/\//g,"")])||void 0===t?void 0:t.views)||0})});switch(f){case"title-asc":return e.sort((e,t)=>e.title.localeCompare(t.title));case"views-desc":return e.sort((e,t)=>{var a,s;return(null!==(a=t.views)&&void 0!==a?a:0)-(null!==(s=e.views)&&void 0!==s?s:0)});default:return e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}},[x,S,f]);return s.createElement(c.A,null,s.createElement(i.A,{title:"Posts",pathname:h.pathname}),s.createElement(m,{title:v[C],subtitle:x.length+" posts"}),s.createElement(d.A,{tabIndex:C,onChange:k,tabs:v,posts:_,defaultThumbnail:g,sortType:f,onSortChange:E,loadingViews:A}))}}}]);
//# sourceMappingURL=component---src-templates-category-template-tsx-07efb5c96f0311ecca95.js.map