"use strict";(self.webpackChunkblog_jh8459_com=self.webpackChunkblog_jh8459_com||[]).push([[83],{6972:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});a(590),a(8895);var s=a(758),r=a(7399),n=a(5413),l=a(2832),o=a(4402),c=a(9404),i=a(7776),u=a(8195);var m=function(e){let{title:t,subtitle:a}=e;return s.createElement("div",{className:"flex flex-col items-center justify-center mt-[30px] mb-[30px]"},s.createElement("h1",{className:"w-fit pb-[7px] mb-[15px] text-[40px] font-bold text-center border-b-[3px] border-[var(--primary-text-color)]"},t),s.createElement("p",{className:"pb-[10px] text-[20px] font-medium text-center"},a))},p=a(4831);var d=function(e){let{pageContext:t}=e;const{edges:a,currentCategory:d,defaultThumbnail:b,categories:f}=t,g=(0,n.useLocation)(),v=new URLSearchParams(g.search).get("sort")||"date-desc",{0:h,1:x}=(0,s.useState)(v),w=(0,s.useMemo)(()=>a.map(e=>{let{node:t}=e;return new u.A(t)}),[a]),C=(0,s.useMemo)(()=>f.findIndex(e=>e===d),[f,d]),E=(0,s.useCallback)((e,t)=>{if(0===t)return(0,r.navigate)("/posts");(0,r.navigate)("/posts/"+f[t])},[f]),S=(0,s.useCallback)(e=>{const t=e.target.value;x(t);const a=new URLSearchParams(g.search);a.set("sort",t),(0,r.navigate)(g.pathname+"?"+a.toString(),{replace:!0})},[g]),{0:k,1:y}=(0,s.useState)({}),{0:A,1:T}=(0,s.useState)(!0);(0,s.useEffect)(()=>{const e=(0,o.C3)(l.A),t=(0,o.KR)(e,"posts");(0,o.Jt)(t).then(e=>{e.exists()&&y(e.val())}).catch(e=>{console.error("Firebase read failed: ",e)}).finally(()=>{T(!1)})},[]);const j=(0,s.useMemo)(()=>{const e=w.map(e=>{var t;return Object.assign({},e,{views:(null===(t=k[e.slug.replace(/\//g,"")])||void 0===t?void 0:t.views)||0})});switch(h){case"title-asc":return e.sort((e,t)=>e.title.localeCompare(t.title));case"views-desc":return e.sort((e,t)=>{var a,s;return(null!==(a=t.views)&&void 0!==a?a:0)-(null!==(s=e.views)&&void 0!==s?s:0)});default:return e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())}},[w,k,h]);return s.createElement(c.A,null,s.createElement(i.A,{title:"Posts"}),s.createElement(m,{title:f[C],subtitle:w.length+" posts"}),s.createElement(p.A,{tabIndex:C,onChange:E,tabs:f,posts:j,defaultThumbnail:b,sortType:h,onSortChange:S,loadingViews:A}))}}}]);
//# sourceMappingURL=component---src-templates-category-template-tsx-9af7937fe723260db066.js.map