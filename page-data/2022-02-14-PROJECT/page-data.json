{"componentChunkName":"component---src-templates-blog-template-js","path":"/2022-02-14-PROJECT/","result":{"data":{"cur":{"id":"93a759f3-c553-5110-b08d-c95e82366212","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBA//EABYBAQEBAAAAAAAAAAAAAAAAAAQAAf/aAAwDAQACEAMQAAAB71JJTVn/xAAWEAADAAAAAAAAAAAAAAAAAAAAESD/2gAIAQEAAQUCFP8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACBB/9oACAEBAAY/AiL/AP/EABwQAAICAgMAAAAAAAAAAAAAAAERADEQUUFxkf/aAAgBAQABPyG+QOzHFn1G4hqIax//2gAMAwEAAgADAAAAEOMv/8QAFhEBAQEAAAAAAAAAAAAAAAAAARBR/9oACAEDAQE/EBMn/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARUf/aAAgBAgEBPxCHV//EAB0QAQABBAMBAAAAAAAAAAAAAAEAESExgRBBYXH/2gAIAQEAAT8QBTSiaYF1uN2gdiAFQQemKZD9Jmsv5x//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"\"\n        src=\"/static/0da0186f8f100aaab0baf6a925d3285a/80e3c/project.jpg\"\n        srcset=\"/static/0da0186f8f100aaab0baf6a925d3285a/4ec73/project.jpg 180w,\n/static/0da0186f8f100aaab0baf6a925d3285a/158ba/project.jpg 360w,\n/static/0da0186f8f100aaab0baf6a925d3285a/80e3c/project.jpg 720w,\n/static/0da0186f8f100aaab0baf6a925d3285a/280b9/project.jpg 905w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"️-refactoring\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-refactoring\" aria-label=\"️ refactoring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⚒️ Refactoring</h2>\n<ul>\n<li>\n<p>ALL-CON에서는 한달간의 콘서트 정보만 <code class=\"language-text\">allConcerts</code> 배열에 담아 보여주고 있다.</p>\n<p>한달이 지나게되면 콘서트 정보중 <code class=\"language-text\">activation</code>이 <code class=\"language-text\">0</code>으로 비활성화되어 서버에서 보여주지 않고 있다. <del>(콘서트 삭제는 관련 댓글 및 게시글들이 모두 삭제되므로 비활성화를 선택)</del></p>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/154025834-c3427f3f-4758-4c4a-bc77-4c219faa9844.png\" alt=\"스크린샷, 2022-02-15 17-45-59\"></p>\n</li>\n<li>\n<p>기존에는 콘서트가 비활성화 될 시 관련 게시글은 조회수를 <code class=\"language-text\">-999999</code> 음수값으로 강제로 할당하여 조회수로 검색시 맨 뒤로 나열되게끔 수정해주었으나 만약 불순한(?) 목적으로 조회수를 올리거나 시간이 오래지나 조회수가 <code class=\"language-text\">0</code> 이상의 양수값으로 전환된다면 올바르지 않은 결과가 초래되므로 <code class=\"language-text\">Articles</code> 테이블에도 <code class=\"language-text\">activation</code> 컬럼값을 추가해 비활성화 해주기로 했다.</p>\n</li>\n</ul>\n<br>\r\n<br>\n<h3 id=\"1-보완이-필요한-사항\" style=\"position:relative;\"><a href=\"#1-%EB%B3%B4%EC%99%84%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%9C-%EC%82%AC%ED%95%AD\" aria-label=\"1 보완이 필요한 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 보완이 필요한 사항</h3>\n<hr>\n<ul>\n<li>\n<p><code class=\"language-text\">Articles</code> 테이블의 현재 스키마는 다음과 같다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/154025162-0730e711-8b2f-4946-962b-b5b3ab09d166.png\" alt=\"스크린샷, 2022-02-15 17-44-23\"></p>\n<p>해당 <code class=\"language-text\">Articles</code> 테이블 컬럼중 <code class=\"language-text\">activation</code> 컬럼값을 추가하고, 서버에서 <code class=\"language-text\">nodeSchedule</code>을 통하여 1일 1회 티켓 발매 후 한달이 지난 콘서트들은 비활성화를 시키는데 해당 콘서트에 종속된 게시글들 또한 모두 비활성화 진행이 필요하다.</p>\n</li>\n</ul>\n<br>\r\n<br>\n<h3 id=\"2-문제-해결\" style=\"position:relative;\"><a href=\"#2-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\" aria-label=\"2 문제 해결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 문제 해결</h3>\n<h4 id=\"2-1-sequelize-model-파일-스키마-수정--addcolumn-함수를-통한-마이그레이션\" style=\"position:relative;\"><a href=\"#2-1-sequelize-model-%ED%8C%8C%EC%9D%BC-%EC%8A%A4%ED%82%A4%EB%A7%88-%EC%88%98%EC%A0%95--addcolumn-%ED%95%A8%EC%88%98%EB%A5%BC-%ED%86%B5%ED%95%9C-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98\" aria-label=\"2 1 sequelize model 파일 스키마 수정  addcolumn 함수를 통한 마이그레이션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. Sequelize Model 파일 스키마 수정 &#x26;&#x26; addColumn() 함수를 통한 마이그레이션</h4>\n<hr>\n<ul>\n<li>\n<p>어제 학습한 내용대로 <code class=\"language-text\">addColumn()</code> 함수를 통해 마이그레이션으로 <code class=\"language-text\">Articles</code> 테이블의 스키마를 수정해주었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function-variable function\">up</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">queryInterface<span class=\"token punctuation\">,</span> Sequelize</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> queryInterface<span class=\"token punctuation\">.</span><span class=\"token function\">addColumn</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Articles'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'activation'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> Sequelize<span class=\"token punctuation\">.</span><span class=\"token constant\">BOOLEAN</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">allowNull</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\r\n    <span class=\"token literal-property property\">defaultValue</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>초기값은 <code class=\"language-text\">true</code>로 설정 (티켓 오픈 후 한달이 지난 콘서트 게시글은 <code class=\"language-text\">false</code>로 비활성화 된다.) , 데이터 타입과 옵션을 설정해주었다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/154092908-57a17a67-2d42-4d7d-9c59-b38e3439b348.png\" alt=\"스크린샷, 2022-02-16 00-23-06\"></p>\n<p>스키마를 수정했기 때문에 기존 게시글들을 수동으로 하나하나 데이터 값을 수정해줘야 하나 싶었는데, <code class=\"language-text\">defaultValue</code>값을 <code class=\"language-text\">true</code>로 준 탓인지 기존 게시글들도 모두 <code class=\"language-text\">activation</code> 컬럼의 값이 <code class=\"language-text\">true</code>로 활성화되었다. <del>(휴…)</del></p>\n</li>\n</ul>\n<br>\r\n<br>\n<h4 id=\"2-2-concertcleaner-함수-및-controller-변경\" style=\"position:relative;\"><a href=\"#2-2-concertcleaner-%ED%95%A8%EC%88%98-%EB%B0%8F-controller-%EB%B3%80%EA%B2%BD\" aria-label=\"2 2 concertcleaner 함수 및 controller 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. concertCleaner() 함수 및 Controller 변경</h4>\n<hr>\n<ul>\n<li>\n<p>매일 오전 09시에 서버에서는 콘서트 정보를 <code class=\"language-text\">concertCleaner()</code> 함수를 통해서 티켓 오픈일이 한달 지난 콘서트 DB의 <code class=\"language-text\">activation</code>을 <code class=\"language-text\">false</code>로 바꾸어 주고 있다.</p>\n<p>여기에 더불어 해당 콘서트에 종속된 게시글 DB들의 <code class=\"language-text\">activation</code> 또한 함께 <code class=\"language-text\">false</code>로 바꾸어 주었다.</p>\n</li>\n<li>\n<p>또한, 이제는 Controller 또한 수정하여 게시글을 뱉어주는 요청이 들어온다면, <code class=\"language-text\">order</code>값을 내림차순으로 주어서 <code class=\"language-text\">activation</code>이 <code class=\"language-text\">false</code>인 게시물은 후순위로 밀리게끔 설계하였다.</p>\n</li>\n</ul>\n<center><img src=\"https://user-images.githubusercontent.com/83164003/154095571-20c8416e-30e4-4e4c-b665-6a5962839808.png\"></center><br>\n<br>\r\n<br>\n<h3 id=\"3-결과\" style=\"position:relative;\"><a href=\"#3-%EA%B2%B0%EA%B3%BC\" aria-label=\"3 결과 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 결과</h3>\n<hr>\n<ul>\n<li>\n<p>클라이언트에서 이제 조회수순으로 정렬을 하여도 <code class=\"language-text\">order</code>의 우선순위가 <code class=\"language-text\">activation</code> 내림차순이기 때문에 비활성화된 콘서트에 종속된 게시물들을 후순위로 밀리게 설계하였다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/154096234-6ea10a8a-a7df-4501-9575-71ded1c491d6.png\" alt=\"스크린샷, 2022-02-16 00-40-09\"></p>\n<p>콘서트가 비활성화되어 목록에서는 사라졌지만 게시글은 후순위로 밀렸을 뿐이라서 조회/수정/삭제 처리는 가능한 상태이다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/154100340-9819feb2-da3c-4216-b2e3-8e67231f199b.png\" alt=\"스크린샷, 2022-02-16 00-59-54\"></p>\n</li>\n<li>\n<p><del>위 사진과 같이 상단 콘서트 목록은 공백으로 보여지고 있다.</del></p>\n<p>빈 콘서트 목록 처리를 어떻게 해야할지 클라이언트를 담당한 팀원분과 조율해서 내일까지 Task를 가져가야 할 듯 하다.</p>\n</li>\n</ul>\n<br>\r\n<br>","excerpt":"⚒️ Refactoring ALL-CON에서는 한달간의 콘서트 정보만  배열에 담아 보여주고 있다. 한달이 지나게되면 콘서트 정보중 이 으로 비활성화되어 서버에서 보여주지 않고 있다. (콘서트 삭제는 관련 댓글 및 게시글들이 모두 삭제되므로 비활성화를 선택) 스크린샷, 2022-02-15 17-45-59 기존에는 콘서트가 비활성화 될 시 관련 게시글은 조회수를  음수값으로 강제로 할당하여 조회수로 검색시 맨 뒤로 나열되게끔 수정해주었으나 만약 불순한(?) 목적으로 조회수를 올리거나 시간이 오래지나 조회수가  이상의 양수값으로 전환된다면 올바르지 않은 결과가 초래되므로  테이블에도  컬럼값을 추가해 비활성화 해주기로 했다. 1. 보완이 필요한 사항  테이블의 현재 스키마는 다음과 같다. 스크린샷, 2022-02-15 17-44-23 해당  테이블 컬럼중  컬럼값을 추가하고, 서버에서 을 통하여 1일 1회 티켓 발매 후 한달이 지난 콘서트들은 비활성화를 시키는데 해당 콘서트에 종속된 게…","timeToRead":1,"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-refactoring\">⚒️ Refactoring</a></p>\n<ul>\n<li>\n<p><a href=\"#1-%EB%B3%B4%EC%99%84%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%9C-%EC%82%AC%ED%95%AD\">1. 보완이 필요한 사항</a></p>\n</li>\n<li>\n<p><a href=\"#2-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0\">2. 문제 해결</a></p>\n<ul>\n<li><a href=\"#2-1-sequelize-model-%ED%8C%8C%EC%9D%BC-%EC%8A%A4%ED%82%A4%EB%A7%88-%EC%88%98%EC%A0%95--addcolumn-%ED%95%A8%EC%88%98%EB%A5%BC-%ED%86%B5%ED%95%9C-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98\">2-1. Sequelize Model 파일 스키마 수정 &#x26;&#x26; addColumn() 함수를 통한 마이그레이션</a></li>\n<li><a href=\"#2-2-concertcleaner-%ED%95%A8%EC%88%98-%EB%B0%8F-controller-%EB%B3%80%EA%B2%BD\">2-2. concertCleaner() 함수 및 Controller 변경</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-%EA%B2%B0%EA%B3%BC\">3. 결과</a></p>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"2022.02.14","title":"ALL-CON Refactoring 6일차 - Articles 테이블 스키마 수정(2)","categories":"Project","author":"JH8459","emoji":"🔥"},"fields":{"slug":"/2022-02-14-PROJECT/"}},"next":{"id":"1afc99bd-00c4-5034-b04c-17e5f4c7c151","frontmatter":{"date":"2022.02.11","title":"ALL-CON Refactoring 5일차 - Articles 테이블 스키마 수정(1)","categories":"Project","author":"JH8459","emoji":"🔥"},"fields":{"slug":"/2022-02-11-PROJECT/"}},"prev":{"id":"3ad0552a-b7cb-5991-802a-7238c13b7e14","frontmatter":{"date":"2022.02.15","title":"Sequelize Op","categories":"TIL","author":"JH8459","emoji":"📚"},"fields":{"slug":"/2022-02-15-TIL/"}},"site":{"siteMetadata":{"comments":{"giscus":{"repo":"JH8459/JH8459.github.io","repoId":"R_kgDOI03HgA","category":"Comments","categoryId":"DIC_kwDOI03HgM4CtuXL"}}}}},"pageContext":{"slug":"/2022-02-14-PROJECT/","nextSlug":"/2022-02-11-PROJECT/","prevSlug":"/2022-02-15-TIL/"}},"staticQueryHashes":["1073350324","2009502679","2938748437","962130685"],"slicesMap":{}}