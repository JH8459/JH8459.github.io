{"componentChunkName":"component---src-templates-blog-template-js","path":"/2022-05-25-TIL/","result":{"data":{"cur":{"id":"2a71e742-af5b-5a8c-b8b8-59a304905732","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"ï¸-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"ï¸ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<br>\n<ul>\n<li>\n<p>ìµœê·¼ NestJS + TypeORM í”„ë ˆì„ì›Œí¬ë¡œ ì„œë²„ë¥¼ êµ¬ì„±í•˜ë©° ê³µë¶€í•˜ê³ ìˆë‹¤.</p>\n</li>\n<li>\n<p>TypeORMì´ Repository Patternì„ ê¸°ë³¸ìœ¼ë¡œ ì§€í–¥í•˜ê³  ì§€ì›í•˜ê³  ìˆìœ¼ë©° <a href=\"https://docs.nestjs.com/techniques/database#repository-pattern\" target=\"_blank\">NestJS ê³µì‹ ë¬¸ì„œ</a>ì—ë„ Repository Patternì„ ì´ìš©í•œ ì„¤ê³„ ë°©ì‹ì„ ì•ˆë‚´í•˜ê³  ìˆë‹¤.</p>\n</li>\n<li>\n<p>ë‚˜ ë˜í•œ í˜„ì¬ ì§„í–‰ ì¤‘ì¸ í”„ë¡œì íŠ¸ì— ê³µì‹ ë¬¸ì„œë¥¼ ì½ê³  Repository Patternë¥¼ ì ìš©í•´ì„œ ê°œë°œì„ ì´ì–´ë‚˜ê°€ê³  ìˆë‹¤.</p>\n</li>\n<li>\n<p>ë¬¸ë“ Repository Patternê°€ ë¬´ì—‡ì´ê³  ì™œ ì“°ëŠ”ê±°ì§€? ê°€ ê¶ê¸ˆí•´ì¡Œê³  ê·¸ ê³¼ì •ì„ ê¸€ë¡œ ë‚¨ê²¨ë³´ë ¤í•œë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"1-repository-pattern\" style=\"position:relative;\"><a href=\"#1-repository-pattern\" aria-label=\"1 repository pattern permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Repository Pattern</h3>\n<hr>\n<ul>\n<li>\n<p>ìš°ì„  Repository Patternì€ ì—¬ëŸ¬ ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ì´ë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/170282459-fc4d1f03-ef48-485a-b009-f08abd3b915b.png\" alt=\"overview-1\"><br><br></p>\n</li>\n<li>\n<p>ë‚´ê°€ ì´í•´í•œ(?)ëŒ€ë¡œ ë§í•˜ìë©´ ì‹¤ì œ ë°ì´í„°ê°€ ìˆëŠ” ì¥ì†Œë¥¼ ì¶”ìƒí™”í•˜ì—¬ <strong>Repository</strong>ë¡œ ë‘” ë’¤, í•´ë‹¹ ì¥ì†Œì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ê°€ê³µí•˜ëŠ” ì—…ë¬´ë¥¼ ì „ë‹´í•œë‹¤.</p>\n</li>\n<li>\n<p>ê·¸ë ‡ê¸°ì— í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ë‚´ê°€ ì›í•˜ëŠ” ë°ì´í„°ì˜ ì¶œì²˜(Local, Remote)ë¼ë˜ì§€, ì›ë³¸ ë°ì´í„° ì†ì„±ë“±ì„ ì•Œì•„ì•¼í•  í•„ìš”ê°€ ì—†ë‹¤.</p>\n</li>\n<li>\n<p>ê·¸ì € íŠ¹ì • ìš”ì²­ì„ <strong>Repository</strong>ì— ë³´ë‚´ë©´ ê°€ê³µëœ ì›í•˜ëŠ” ë°ì´í„° ì–»ì„ ìˆ˜ ìˆê²Œë” ë””ìì¸ íŒ¨í„´ì„ ì„¤ê³„í•˜ëŠ” êµ¬ì¡°ê°€ <strong>Repository Pattern</strong>ì´ë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"2-ì‹¤ì œ-í”„ë¡œì íŠ¸-ì ìš©-ì˜ˆì‹œ\" style=\"position:relative;\"><a href=\"#2-%EC%8B%A4%EC%A0%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%A0%81%EC%9A%A9-%EC%98%88%EC%8B%9C\" aria-label=\"2 ì‹¤ì œ í”„ë¡œì íŠ¸ ì ìš© ì˜ˆì‹œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ì‹¤ì œ í”„ë¡œì íŠ¸ ì ìš© ì˜ˆì‹œ</h3>\n<hr>\n<ul>\n<li>\n<p>ìš°ì„  NestJS í”„ë ˆì„ì›Œí¬ ê°•ì˜ë¥¼ ë“¤ìœ¼ë©° ì‘ì„±í•œ <strong>Repository Pattern</strong>ì´ ì ìš©ëœ ìƒ˜í”Œ ì½”ë“œë¥¼ ê°€ì ¸ì™”ë‹¤.</p>\n<ul>\n<li>\n<p><em>boards.service.ts</em></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BoardsService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>\n    <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">InjectRepository</span></span><span class=\"token punctuation\">(</span>BoardRepository<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> boardRepository<span class=\"token operator\">:</span> BoardRepository<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/* ì „ë‹¬ì¸ìë¡œ CreateBoardDTOë¥¼ ê°–ëŠ” ë³´ë“œë¥¼ ìƒì„±í•˜ëŠ” createBoard ë©”ì„œë“œ ì„ ì–¸ */</span>\n  <span class=\"token function\">createBoard</span><span class=\"token punctuation\">(</span>createBoardDto<span class=\"token operator\">:</span> CreateBoardDto<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Board<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>boardRepository<span class=\"token punctuation\">.</span><span class=\"token function\">createBoard</span><span class=\"token punctuation\">(</span>createBoardDto<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Repository íŒ¨í„´ ì ìš©</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">...</span></code></pre></div>\n</li>\n<li>\n<p><em>boards.repository.ts</em></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* Board Entityë¥¼ ì»¨íŠ¸ë¡¤í•˜ëŠ” Repositoryë¥¼ ì„ ì–¸ */</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">EntityRepository</span></span><span class=\"token punctuation\">(</span>Board<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BoardRepository</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Repository<span class=\"token operator\">&lt;</span>Board<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* createBoard ë©”ì„œë“œ, DB ê´€ë ¨ ë™ì‘ì€ Repositoryì—ì„œ ìˆ˜í–‰í•œë‹¤ */</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">createBoard</span><span class=\"token punctuation\">(</span>createBoardDto<span class=\"token operator\">:</span> CreateBoardDto<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Board<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* titleê³¼ descriptionì€ êµ¬ì¡°ë¶„í•´ í• ë‹¹ìœ¼ë¡œ createBoardDtoì—ì„œ êº¼ë‚´ì–´ì„œ ì‚¬ìš©í•´ì¤€ë‹¤ */</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> title<span class=\"token punctuation\">,</span> description <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> createBoardDto<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> board <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      title<span class=\"token punctuation\">,</span>\n      description<span class=\"token punctuation\">,</span>\n      status<span class=\"token operator\">:</span> BoardStatus<span class=\"token punctuation\">.</span><span class=\"token constant\">PUBLIC</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// statusê°’ì€ BoardStatus.PUBLICìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// boardë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥</span>\n    <span class=\"token keyword\">return</span> board<span class=\"token punctuation\">;</span> <span class=\"token comment\">// DBì— ì €ì¥í•œ boardë¥¼ ë°˜í™˜í•œë‹¤</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>ê°„ë‹¨í•œ ì½”ë“œì§€ë§Œ <strong>Repository Pattern</strong>ì´ ì ìš©ëœ ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.</p>\n</li>\n<li>\n<p><strong>ë°ì´í„°ë¥¼ ì›ë³¸ ì €ì¥ì†Œì—ì„œ êº¼ë‚´ì˜¨ ë’¤ ê°€ê³µí•´ì„œ ì œê³µí•˜ëŠ” ì¥ì†Œ</strong>(boards.repository.ts)ì™€ ê·¸ <strong>ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¥ì†Œ</strong>(boards.service.ts)ë¥¼ ë¶„ë¦¬ì‹œí‚¨ ë””ìì¸ íŒ¨í„´ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>\n</li>\n<li>\n<p>TypeORMì—ì„œ ê¸°ë³¸ìœ¼ë¡œ Repository Patternì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ ë””ìì¸ íŒ¨í„´ì„ NestJS + TypeORM í”„ë ˆì„ì›Œí¬ ìƒíƒœê³„ì—ì„œëŠ” ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"3-repository-patternì˜-ì¥ì \" style=\"position:relative;\"><a href=\"#3-repository-pattern%EC%9D%98-%EC%9E%A5%EC%A0%90\" aria-label=\"3 repository patternì˜ ì¥ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Repository Patternì˜ ì¥ì ?</h3>\n<hr>\n<ul>\n<li>\n<p>ìš°ì„  ì–´ë–¤ ê°œë…ì´ê³ , ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ëŠ” ì•Œì•˜ìœ¼ë‹ˆ ì¥ì ì„ ê°„ë‹¨í•˜ê²Œ ì°¾ì•„ë³´ì•˜ë‹¤.</p>\n<ul>\n<li>\n<p><strong>ë°ì´í„° ë¡œì§ì„ ë¶„ë¦¬ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</strong></p>\n<p>â‡’ <em>íŒŒì¼ êµ¬ì¡°ë¶€í„° ë¶„ë¦¬ê°€ ëœë‹¤.</em></p>\n</li>\n<li>\n<p><strong>ì¤‘ì•™ ì§‘ì¤‘ì²˜ë¦¬ ë°©ì‹ìœ¼ë¡œ, ì–¸ì œë‚˜ ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ ë°ì´í„°ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆë‹¤.</strong></p>\n<p>â‡’ <em>ìš”ì²­ì„ í•˜ëŠ” ìª½ì€ Repositoryì˜ ì‚¬ì •ì´ ê¶ê¸ˆí•˜ì§€ë„ í•„ìš”í•˜ì§€ë„ ì•Šë‹¤. ì–¸ì œë‚˜ í•­ìƒ ê°™ì€ ì¸í„°í˜ì´ìŠ¤ë¡œ ìš”ì²­ì„í•˜ê³  ê²°ê³¼ê°’ì„ ì œê³µë°›ì„ ìˆ˜ ìˆë‹¤.</em></p>\n</li>\n<li>\n<p><strong>ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ê²€ì¦ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</strong></p>\n<p>â‡’ <em>í…ŒìŠ¤íŠ¸ ê²½í—˜ì€ ì—†ì§€ë§Œ, ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê³  ì œê³µí•˜ëŠ” Repositoryì—ì„œë§Œ ê²€ì¦ì„ ì¶”ê°€í•œë‹¤ë©´ ì‘ë‹µìœ¼ë¡œ ë°˜í™˜ë  ë°ì´í„°ê°’ë“¤ì„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì ìš©ì‹œì¼œ ê²€ì¦ì´ ìˆ˜ì›”í•  ê±° ê°™ë‹¤ë¼ëŠ” ìƒê°ì€ ë“ ë‹¤.</em></p>\n</li>\n<li>\n<p><strong>ìƒˆë¡œìš´ ë°ì´í„° ë¡œì§ ì½”ë“œë¥¼ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>\n<p>â‡’ <em>Repositoryì—ì„œë§Œ ì½”ë“œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ì—¬ ë°ì´í„° ë¡œì§ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ í° ì¥ì ì´ë‹¤.</em></p>\n</li>\n</ul>\n</li>\n</ul>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤” Understanding</h2>\n<ul>\n<li>\n<p>ê·¸ëƒ¥ NestJS ê³µì‹ ë¬¸ì„œì—ì„œ ì“°ë¼í•´ì„œ ì¼ê³ , TypeORMì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì§€ì›í•´ì£¼ë‹ˆ ì“°ë˜ Repository Patternì„ ê·¸ë‚˜ë§ˆ ì¡°ê¸ˆ ì´í•´í•˜ê³  ì¨ ë³¼ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.</p>\n</li>\n<li>\n<p>ì•ìœ¼ë¡œëŠ” ë°ì´í„°ë¥¼ ê°€ê³µí•˜ê±°ë‚˜ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ì„ í™•ì‹¤íˆ Repository ì˜ì—­ì—ì„œ ìˆ˜í–‰í•´ì£¼ëŠ” ìª½ìœ¼ë¡œ ì¡°ê¸ˆ ë” ìƒê°í•œ ë’¤ ì½”ë“œë¡œ ì˜®ê²¨ê°€ì•¼ê² ë‹¤~ ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.</p>\n</li>\n</ul>\n<p>-ê·œëª¨ê°€ í° í”„ë¡œì íŠ¸ì¼ìˆ˜ë¡ ë””ìì¸ íŒ¨í„´ë“± êµ¬ì¡° ì„¤ê³„ë¶€í„° ì¤‘ìš”í• ê±°ê°™ë‹¤ë¼ëŠ” ìƒê°ì´ ë“ ë‹¤.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li><a href=\"#1-repository-pattern\">1. Repository Pattern</a></li>\n<li><a href=\"#2-%EC%8B%A4%EC%A0%9C-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%A0%81%EC%9A%A9-%EC%98%88%EC%8B%9C\">2. ì‹¤ì œ í”„ë¡œì íŠ¸ ì ìš© ì˜ˆì‹œ</a></li>\n<li><a href=\"#3-repository-pattern%EC%9D%98-%EC%9E%A5%EC%A0%90\">3. Repository Patternì˜ ì¥ì ?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">ğŸ¤” Understanding</a></p>\n</li>\n</ul>\n</div>","excerpt":"âœï¸ Today I Learned ìµœê·¼ NestJS + TypeORM í”„ë ˆì„ì›Œí¬ë¡œ ì„œë²„ë¥¼ êµ¬ì„±í•˜ë©° ê³µë¶€í•˜ê³ ìˆë‹¤. TypeORMì´ Repository Patternì„ ê¸°ë³¸ìœ¼ë¡œ ì§€í–¥í•˜ê³  ì§€ì›í•˜ê³  ìˆìœ¼ë©° NestJS ê³µì‹ ë¬¸ì„œì—ë„ Repository Patternì„ ì´ìš©í•œ ì„¤ê³„ ë°©ì‹ì„ ì•ˆë‚´í•˜ê³  ìˆë‹¤. ë‚˜ ë˜í•œ í˜„ì¬ ì§„í–‰ ì¤‘ì¸ í”„ë¡œì íŠ¸ì— ê³µì‹ ë¬¸ì„œë¥¼ ì½ê³  Repository Patternë¥¼ ì ìš©í•´ì„œ ê°œë°œì„ ì´ì–´ë‚˜ê°€ê³  ìˆë‹¤. ë¬¸ë“ Repository Patternê°€ ë¬´ì—‡ì´ê³  ì™œ ì“°ëŠ”ê±°ì§€? ê°€ ê¶ê¸ˆí•´ì¡Œê³  ê·¸ ê³¼ì •ì„ ê¸€ë¡œ ë‚¨ê²¨ë³´ë ¤í•œë‹¤. 1. Repository Pattern ìš°ì„  Repository Patternì€ ì—¬ëŸ¬ ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ì´ë‹¤. overview-1 ë‚´ê°€ ì´í•´í•œ(?)ëŒ€ë¡œ ë§í•˜ìë©´ ì‹¤ì œ ë°ì´í„°ê°€ ìˆëŠ” ì¥ì†Œë¥¼ ì¶”ìƒí™”í•˜ì—¬ Repositoryë¡œ ë‘” ë’¤, í•´ë‹¹ ì¥ì†Œì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ê°€ê³µí•˜ëŠ” ì—…ë¬´ë¥¼ ì „ë‹´í•œë‹¤. ê·¸ë ‡ê¸°ì— í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ë‚´ê°€ ì›í•˜ëŠ” ë°ì´í„°ì˜ ì¶œì²˜(Local, Remoteâ€¦","frontmatter":{"date":"May 25, 2022","title":"Repository Pattern","categories":"TIL","author":"JH8459","emoji":"ğŸ“š"},"fields":{"slug":"/2022-05-25-TIL/"}},"next":{"id":"a05656d8-5f3a-5e0d-b017-7a906f067496","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"ï¸-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"ï¸ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<br>\n<ul>\n<li>\n<p>í”„ë¡œì íŠ¸ì¤‘ SMS ë°œì†¡ì´ í•„ìš”í•œ ë¶€ë¶„ì„ ê°€ë¹„ì•„ì˜ ë¬¸ì ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ê³  ìˆë‹¤.</p>\n</li>\n<li>\n<p>ê°€ë¹„ì•„ ë¬¸ìì„œë¹„ìŠ¤ ê°œë°œ ê°€ì´ë“œ ê³µì‹ë¬¸ì„œì—ì„œëŠ” Node í™˜ê²½ì—ì„œ ë‹¨ìˆœ <code class=\"language-text\">https</code> ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•œ https ìš”ì²­ì„ ë³´ë‚´ì–´ ì‚¬ìš©í•˜ê³  ìˆë‹¤.</p>\n</li>\n<li>\n<p>í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” NodeJSì—ì„œ NestJS í”„ë ˆì„ì›Œí¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ê³ ìˆë‹¤.</p>\n<p>ë ˆí¼ëŸ°ìŠ¤ë“¤ì´ ë§ì§€ ì•Šì•„ì„œ ê°œë°œê³¼ì •ì—ì„œ ê²ªì—ˆë˜ ë¶ˆí¸í•¨ë“¤ì´ ìˆì—ˆê¸°ì— ë‚˜ì™€ ê°™ì€ ìƒí™©ì„ ê²ªëŠ” ì´ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ê³ ì ê¸€ì„ ë‚¨ê¸´ë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"1-ì‚¬ìš©ì-ì¸ì¦\" style=\"position:relative;\"><a href=\"#1-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%9D%B8%EC%A6%9D\" aria-label=\"1 ì‚¬ìš©ì ì¸ì¦ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ì‚¬ìš©ì ì¸ì¦</h3>\n<hr>\n<ul>\n<li>\n<p>ê°€ë¹„ì•„ ê³µì‹ ê°œë°œ ê°€ì´ë“œ ë¬¸ì„œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì•ˆë‚´ê°€ ë˜ì–´ìˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/167132404-cbc69353-9e16-4eb1-b758-556f2cbd5dcc.png\" alt=\"á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-06 á„‹á…©á„’á…® 9 20 49\"></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> https <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> qs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'querystring'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> postData <span class=\"token operator\">=</span> qs<span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">grant_type</span><span class=\"token operator\">:</span> <span class=\"token string\">'client_credentials'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">hostname</span><span class=\"token operator\">:</span> <span class=\"token string\">'sms.gabia.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/oauth/token'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/x-www-form-urlencoded'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'Content-Length'</span><span class=\"token operator\">:</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">byteLength</span><span class=\"token punctuation\">(</span>postData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token string\">'Basic c1hY3JvY2sZDAwNzA2YzJlMTdjZjlkMz1234hlM2U5YjQ='</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> req <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> chunks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    chunks<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> body <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>chunks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>postData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì´ìš©í•œ ìˆœìˆ˜(?)í•œ ì½”ë“œì´ê¸° ë•Œë¬¸ì— í•´ë‹¹ ê°€ì´ë“œ ë¬¸ì„œë§Œ ë³´ê³  NestJS ê¸°ë°˜ì˜ í˜„ì¬ í”„ë¡œì íŠ¸ì— ë‹´ì•„ ë‚´ê¸°ì—” ì–´ë ¤ì›€ì´ ìˆì—ˆë‹¤.</p>\n<p>ê·¸ ê³¼ì •ì„ ìµœëŒ€í•œ ìì„¸íˆ ë‹´ì•„ë³´ë ¤í•œë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h4 id=\"1-1-sms-ë°œì†¡ê¸°ëŠ¥-ëª¨ë“ˆí™”\" style=\"position:relative;\"><a href=\"#1-1-sms-%EB%B0%9C%EC%86%A1%EA%B8%B0%EB%8A%A5-%EB%AA%A8%EB%93%88%ED%99%94\" aria-label=\"1 1 sms ë°œì†¡ê¸°ëŠ¥ ëª¨ë“ˆí™” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-1. SMS ë°œì†¡ê¸°ëŠ¥ ëª¨ë“ˆí™”</h4>\n<hr>\n<ul>\n<li>\n<p>ìš°ì„  SMSë¥¼ ë³´ë‚´ê¸° ìœ„í•œ ê¸°ëŠ¥ë§Œ ëª¨ë“ˆë¡œ ë¹¼ì„œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìƒˆë¡œìš´ ëª¨ë“ˆì„ ìƒì„±í•˜ì˜€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">nest g mo</code></pre></div>\n</li>\n<li>\n<p>ìœ„ ëª…ë ¹ì–´ë¡œ <code class=\"language-text\">sms</code> ì´ë¦„ì˜ ìƒˆë¡œìš´ ëª¨ë“ˆì„ ìƒì„±í•´ ì£¼ì—ˆë‹¤.</p>\n</li>\n<li>\n<p>DB ê´€ë ¨ëœ ì‘ì—…ì´ë‚˜ ë³´ì•ˆ/ì¸ì¦ê´€ë ¨ëœ ê¸°ëŠ¥ì€ ì—†ì´ ìˆœìˆ˜í•˜ê²Œ SMS ë°œì†¡ì„ ìœ„í•œ ê°€ë¹„ì•„ ì¸ì¦ &#x26; ë°œì†¡ ê¸°ëŠ¥ë§Œ ì¶©ì‹¤íˆ ìˆ˜í–‰í•  ê²ƒì´ê¸° ë•Œë¬¸ì— Service íŒŒì¼ë§Œ í”„ë¡œë°”ì´ë”ë¡œ ì‚¬ìš©í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤.</p>\n</li>\n<li>\n<p><strong>sms.module.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Module <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SmsService <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./sms.service'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Module</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  providers<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>SmsService<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  exports<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>SmsService<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SmsModule</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>í•´ë‹¹ ëª¨ë“ˆì˜ <code class=\"language-text\">SmsService</code> (ê°€ë¹„ì•„ ì¸ì¦ &#x26; ë°œì†¡ ê¸°ëŠ¥) ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ <code class=\"language-text\">exports</code> ë°°ì—´ì•ˆì— ë„£ì–´ì£¼ì—ˆë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h4 id=\"1-2-smsserviceì—ì„œ-ì‚¬ìš©ì-ì¸ì¦-êµ¬í˜„\" style=\"position:relative;\"><a href=\"#1-2-smsservice%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%9D%B8%EC%A6%9D-%EA%B5%AC%ED%98%84\" aria-label=\"1 2 smsserviceì—ì„œ ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1-2. SmsServiceì—ì„œ ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„</h4>\n<hr>\n<ul>\n<li>\n<p>ìš°ì„  ê°€ë¹„ì•„ ì¸ì¦ì„ ë°›ìœ¼ë ¤ë©´ ìœ íš¨í•œ API URLë¡œ SMS IDì™€ API Keyë¡œ í† í°ì„ ë°œí–‰í•˜ëŠ” ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ì•„ì•¼ í•œë‹¤.</p>\n</li>\n<li>\n<p>ê³µì‹ë¬¸ì„œ ê°€ì´ë“œ ë¬¸ì„œì—ì„œëŠ” Node ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ <code class=\"language-text\">https</code>ë¥¼ ì´ìš©í•˜ì—¬ ìš”ì²­ê³¼ ì‘ë‹µì„ ë³´ë‚´ëŠ” ê±¸ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">hostname</span><span class=\"token operator\">:</span> <span class=\"token string\">'sms.gabia.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/oauth/token'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/x-www-form-urlencoded'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'Content-Length'</span><span class=\"token operator\">:</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">byteLength</span><span class=\"token punctuation\">(</span>postData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'Authorization'</span><span class=\"token operator\">:</span> <span class=\"token string\">'Basic c1hY3JvY2sZDAwNzA2YzJlMTdjZjlkMz1234hlM2U5YjQ='</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> req <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token operator\">...</span></code></pre></div>\n</li>\n<li>\n<p>ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì¼ì¼íˆ ì„¤ì •í• ê²Œ ë§ë‹¤ë³´ë‹ˆ.. <del>(ê·€ì°®ë‹¤)</del></p>\n<p>ë³´ë‹¤ëŠ” ì¡°ê¸ˆ ìµìˆ™í•œ <code class=\"language-text\">axios</code> ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•´ì„œ ìš”ì²­ì„ ë³´ë‚´ë„ë¡ ì§„í–‰í•´ë³´ì•˜ë‹¤.</p>\n<blockquote>\n<p>http/https ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ì—¬ëŸ¬ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬(<code class=\"language-text\">got</code>, <code class=\"language-text\">request</code>, <code class=\"language-text\">fetch</code>, <code class=\"language-text\">axios</code>..ë“±ë“±)ë“¤ì´ ì¡´ì¬í•œë‹¤. ë‹¤ìŒì— ê¸°íšŒê°€ ë˜ë©´ ê°ê°ì˜ ì¥ë‹¨ì ë“¤ì„ ì¶”ë ¤ ì •ë¦¬í•´ë´ì•¼ê² ë‹¤.</p>\n</blockquote>\n</li>\n<li>\n<p>ê³µì‹ë¬¸ì„œë¥¼ ìµœëŒ€í•œ ë”°ë¼ê°€ëŠ” ë°©í–¥ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token string\">'dotenv/config'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> queryString <span class=\"token keyword\">from</span> <span class=\"token string\">'query-string'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SmsService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">getSmsToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// í† í°ì„ ë°œê¸‰ë°›ê¸° ìœ„í•œ API URL</span>\n    <span class=\"token keyword\">const</span> tokenUrl <span class=\"token operator\">=</span> <span class=\"token string\">'https://sms.gabia.com/oauth/token'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// baseApiKeyëŠ” base64(SMS_ID:API_KEY), ì•„ì´ë””ì™€ í‚¤ê°’ì€ .env í™˜ê²½ë³€ìˆ˜ì— ë‹´ì•„ì„œ ì‚¬ìš©</span>\n    <span class=\"token keyword\">const</span> baseApiKey <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SMS_ID</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SMS_API_KEY</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> postData <span class=\"token operator\">=</span> queryString<span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> grant_type<span class=\"token operator\">:</span> <span class=\"token string\">'client_credentials'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ì‘ë‹µê°’ì„ ë°›ì•„ì˜¤ëŠ” axios ìš”ì²­</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>tokenUrl<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      method<span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n      headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/x-www-form-urlencoded'</span><span class=\"token punctuation\">,</span>\n        Authorization<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Basic </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>baseApiKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token comment\">// 'Basic ' ê³µë°± í•œì¹¸ì„ ë„£ì–´ì•¼ í•œë‹¤</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token operator\">:</span> postData<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// responseì¤‘ access_tokenê°’ë§Œ ê°€ì ¸ì˜¨ë‹¤</span>\n    <span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>access_token<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> token<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>í™•ì‹¤íˆ <code class=\"language-text\">axios</code>ê°€ í¸ë¦¬í•˜ë‹¤.</p>\n<p>í•„ìš”í•œ ê°’ë“¤ì„ ë³€ìˆ˜ì— ë‹´ì•„ ì ì ˆí•œ ì˜µì…˜ì— ë”±ë”± ë„£ì–´ì£¼ë©´ ëœë‹¤.</p>\n</li>\n<li>\n<p>ë¦¬í„´ê°’ìœ¼ë¡œ <code class=\"language-text\">token</code>ì„ ë˜ì ¸ ì£¼ê¸° ë•Œë¬¸ì—, í•´ë‹¹ í† í°ê°’ì„ ì´ìš©í•˜ì—¬ ë¬¸ì ë°œì†¡í•  ë•Œ ìœ íš¨í•œ ì‚¬ìš©ìì¸ì§€ ì¸ì¦ì´ ì´ë¤„ì§ˆ ìˆ˜ ìˆë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"2-sms-ë°œì†¡-í•˜ê¸°\" style=\"position:relative;\"><a href=\"#2-sms-%EB%B0%9C%EC%86%A1-%ED%95%98%EA%B8%B0\" aria-label=\"2 sms ë°œì†¡ í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. SMS ë°œì†¡ í•˜ê¸°</h3>\n<hr>\n<ul>\n<li>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/167139136-5f4f31b8-b3d1-4b9c-bf12-2a8331295532.png\" alt=\"á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-06 á„‹á…©á„’á…® 10 18 14\"></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> https <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> qs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'querystring'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">hostname</span><span class=\"token operator\">:</span> <span class=\"token string\">'sms.gabia.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/api/send/sms'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/x-www-form-urlencoded'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">'Basic DckviEksLs6ZXlKMGVYQWlPaUpLVhiR2NpT2lKU1V6STFOaUo5LmV5SnBjM01pT2lKb2RIUndjenBjTDF3dmMyMXpMbWRoWW1saExtTnZiVnd2SWl3aVlYVmtJam9pWEM5dllYVjBhRnd2ZEc5clpXNGlMQ0pshWFhnT2pBNG5uVkVuLWtnVEJoRGpPeWc='</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> req <span class=\"token operator\">=</span> https<span class=\"token punctuation\">.</span><span class=\"token function\">request</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> chunks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    chunks<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>chunk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'end'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">chunk</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> body <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>chunks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> postData <span class=\"token operator\">=</span> qs<span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">phone</span><span class=\"token operator\">:</span> <span class=\"token string\">'01000000000'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">callback</span><span class=\"token operator\">:</span> <span class=\"token string\">'15444370'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'SMS TEST MESSAGE'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">refkey</span><span class=\"token operator\">:</span> <span class=\"token string\">'RESTAPITEST1547771538'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>postData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>\n<p>ì´ ë¶€ë¶„ ë˜í•œ ê¸°ë³¸ ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œë§Œ ì‘ì„±ë˜ì–´ ìˆëŠ” ë‹¤ì†Œ ë¶ˆí¸í•œ ì½”ë“œì´ë‹¤.</p>\n</li>\n<li>\n<p>ê·¸ë¦¬ê³  ì¥ë¬¸ SMS(90ì ì´ìƒ)ê³¼ ë‹¨ë¬¸ SMSì˜ ì°¨ì´ì ì€ API URLë§Œ ì¡°ê¸ˆ ì°¨ì´ê°€ ìˆìœ¼ë©° ë‚´ë¶€ ë¡œì§ì€ ë˜‘ê°™ì´ ì§„í–‰ëœë‹¤.</p>\n</li>\n<li>\n<p>ê³µì‹ë¬¸ì„œë¥¼ í† ëŒ€ë¡œ <code class=\"language-text\">axios</code>ë¥¼ ì´ìš©í•´ì„œ ìˆ˜ì •í•´ë³´ì•˜ë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h4 id=\"2-1-smsserviceì—ì„œ-sms-ë°œì†¡-êµ¬í˜„\" style=\"position:relative;\"><a href=\"#2-1-smsservice%EC%97%90%EC%84%9C-sms-%EB%B0%9C%EC%86%A1-%EA%B5%AC%ED%98%84\" aria-label=\"2 1 smsserviceì—ì„œ sms ë°œì†¡ êµ¬í˜„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. SmsServiceì—ì„œ SMS ë°œì†¡ êµ¬í˜„</h4>\n<hr>\n<ul>\n<li>\n<p>ìœ„ì—ì„œ í† í°ì„ ë°œê¸‰ë°›ì„ ë•Œì—ëŠ” ìš”ì²­ í—¤ë”ë¶€ë¶„ì— Authorizationì— <code class=\"language-text\">SMS_ID : API_KEY</code>ê°€ ë“¤ì–´ê°”ë‹¤ë©´ ì´ë²ˆì—” <code class=\"language-text\">SMS_ID: ACCESS_TOKEN</code> ê°’ì´ ë“¤ì–´ê°€ì•¼í•œë‹¤.</p>\n</li>\n<li>\n<p>ê·¸ ì™¸ì—ëŠ” Bodyë¡œ ë³´ë‚¼ ë¬¸ìì˜ phone, callback, message, refkey(ìœ ë‹ˆí¬í•œ ê³ ìœ ê°’)ì´ ë“¤ì–´ê°€ ì£¼ì–´ì•¼í•œë‹¤.</p>\n</li>\n<li>\n<p><code class=\"language-text\">refkey</code>ê°’ì— ìœ ë‹ˆí¬í•œ ë¬¸ìì—´ ê°’ì„ ì£¼ê¸° ìœ„í•´ <code class=\"language-text\">uuidv4()</code> ë©”ì„œë“œë¥¼ ì´ìš©í–ˆìœ¼ë©°, ë¬¸ìë¥¼ ë³´ë‚¼ë•Œë§ˆë‹¤ ìœ ë™ì ìœ¼ë¡œ ê°’ì´ ë°”ë€” ìˆ˜ ìˆëŠ” <code class=\"language-text\">token</code>, <code class=\"language-text\">phone</code>, <code class=\"language-text\">message</code>ê°’ì€ Dtoë¡œ ì •ì˜í•˜ì—¬ íƒ€ì…ì„ ê³ ì •í•˜ì—¬ ì¼ë‹¤.</p>\n</li>\n<li>\n<p><strong>sms.dto.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SmsDto</span> <span class=\"token punctuation\">{</span>\n  smsToken<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  testerCell<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  message<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><strong>sms.service.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token string\">'dotenv/config'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> queryString <span class=\"token keyword\">from</span> <span class=\"token string\">'query-string'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> v4 <span class=\"token keyword\">as</span> uuidv4 <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'uuid'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Injectable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@nestjs/common'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SmsDto <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./dto/sms.dto'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SmsService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">sendSms</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> token<span class=\"token punctuation\">,</span> phone<span class=\"token punctuation\">,</span> message <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> SmsDto<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Response<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// baseApiKeyëŠ” base64(SMS_ID:ACCESS_TOKEN)</span>\n    <span class=\"token keyword\">const</span> baseApiKey <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">SMS_ID</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>token<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ê³ ìœ í•œ refKeyë¥¼ ìœ„í•œ uuidv4</span>\n    <span class=\"token keyword\">const</span> refKeyStr <span class=\"token operator\">=</span> <span class=\"token function\">uuidv4</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ë¬¸ì ë°œì†¡ì„ ìœ„í•œ postData FORM</span>\n    <span class=\"token keyword\">const</span> postData <span class=\"token operator\">=</span> queryString<span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      phone<span class=\"token punctuation\">,</span>\n      callback<span class=\"token operator\">:</span> <span class=\"token string\">'0123456789'</span><span class=\"token punctuation\">,</span>\n      message<span class=\"token punctuation\">,</span>\n      refKey<span class=\"token operator\">:</span> refKeyStr<span class=\"token punctuation\">,</span>\n      is_foreign<span class=\"token operator\">:</span> <span class=\"token string\">'N'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// í•´ì™¸ë°œì†¡ ì—¬ë¶€</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/* message.length > 90, ê¸€ììˆ˜ì— ë”°ë¥¸ LMS &amp; SMS ë°œì†¡ ë¶„ê¸° */</span>\n    <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n      message<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">90</span> <span class=\"token operator\">?</span> <span class=\"token string\">'https://sms.gabia.com:443/api/send/lms'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'https://sms.gabia.com:443/api/send/sms'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        method<span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n        headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/x-www-form-urlencoded'</span><span class=\"token punctuation\">,</span>\n          Authorization<span class=\"token operator\">:</span> <span class=\"token string\">'Basic '</span> <span class=\"token operator\">+</span> baseApiKey<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        data<span class=\"token operator\">:</span> postData<span class=\"token punctuation\">,</span>  <span class=\"token comment\">// ë°œì†¡í•  ë¬¸ìì˜ ë‚´ìš©</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      success<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      message<span class=\"token operator\">:</span> <span class=\"token string\">'ë¬¸ìë©”ì‹œì§€ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>ê³µì‹ë¬¸ì„œì˜ ë°©í–¥ì— ì´ˆì ì„ ë§ì¶° NestJSë¡œ ì´ì‹í•˜ì˜€ë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤” Understanding</h2>\n<ul>\n<li>\n<p>ê°„ë‹¨íˆ ê³µì‹ë¬¸ì„œì— ì íŒ ê¸°ë³¸ ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œë¥¼ ì™¸ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•˜ì—¬ NestJS ê¸°ë°˜ì˜ í”„ë ˆì„ì›Œí¬ì—ì„œ ë™ì‘í•  ìˆ˜ ìˆê²Œë” ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì˜€ë‹¤.</p>\n</li>\n<li>\n<p>ë„ì›€ì´ ë ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ, ë‚˜ë¦„ ì½”ë“œë¥¼ ê°„ê²°íˆ ì ì–´ë³´ë ¤ ë…¸ë ¥í•œ ë¶€ë¶„ë“¤ì´ ì „ë‹¬ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li>\n<p><a href=\"#1-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%9D%B8%EC%A6%9D\">1. ì‚¬ìš©ì ì¸ì¦</a></p>\n<ul>\n<li><a href=\"#1-1-sms-%EB%B0%9C%EC%86%A1%EA%B8%B0%EB%8A%A5-%EB%AA%A8%EB%93%88%ED%99%94\">1-1. SMS ë°œì†¡ê¸°ëŠ¥ ëª¨ë“ˆí™”</a></li>\n<li><a href=\"#1-2-smsservice%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%9D%B8%EC%A6%9D-%EA%B5%AC%ED%98%84\">1-2. SmsServiceì—ì„œ ì‚¬ìš©ì ì¸ì¦ êµ¬í˜„</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-sms-%EB%B0%9C%EC%86%A1-%ED%95%98%EA%B8%B0\">2. SMS ë°œì†¡ í•˜ê¸°</a></p>\n<ul>\n<li><a href=\"#2-1-smsservice%EC%97%90%EC%84%9C-sms-%EB%B0%9C%EC%86%A1-%EA%B5%AC%ED%98%84\">2-1. SmsServiceì—ì„œ SMS ë°œì†¡ êµ¬í˜„</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">ğŸ¤” Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 06, 2022","title":"NestJS + ê°€ë¹„ì•„ ë©”ì‹œì§• API ê°œë°œ ê°€ì´ë“œ","categories":"TIL","author":"JH8459","emoji":"ğŸ“š"},"fields":{"slug":"/2022-05-06-TIL/"}},"prev":{"id":"b3100059-dc98-5c95-bb03-2a268eb83bab","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"ï¸-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"ï¸ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<br>\n<ul>\n<li>\n<p>TypeScriptë¥¼ ê¸°ë³¸ ì–¸ì–´ë¡œ ì±„íƒí•˜ì—¬ êµ¬ì„±ëœ NestJS í”„ë ˆì„ì›Œí¬ëŠ” ê³µì‹ë¬¸ì„œì—ì„œëŠ” Type Checkë¥¼ ìœ„í•´ <code class=\"language-text\">DTO</code> ì‚¬ìš©ì„ ì•ˆë‚´í•˜ê³  ìˆë‹¤.</p>\n</li>\n<li>\n<p>ê³µì‹ë¬¸ì„œë¥¼ í† ëŒ€ë¡œ <code class=\"language-text\">DTO</code>ë¥¼ ì™œ ì‚¬ìš©í•˜ëŠ”ì§€ ì°¾ì•„ë³´ëŠ” ê·¸ ê³¼ì •ì—ì„œ <code class=\"language-text\">Interface</code>ì™€ì˜ ì°¨ì´ì ì„ ê°„ë‹¨íˆ ì•Œì•„ë³´ì•˜ë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"1-dto-data-transfer-object\" style=\"position:relative;\"><a href=\"#1-dto-data-transfer-object\" aria-label=\"1 dto data transfer object permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. DTO (Data Transfer Object)</h3>\n<hr>\n<ul>\n<li>\n<p>ìš°ì„  <code class=\"language-text\">DTO</code>ë€ **ê³„ì¸µ***ê°„ ë°ì´í„° êµí™˜ì„ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê°ì²´ì´ë‹¤.</p>\n<blockquote>\n<p>ê³„ì¸µì´ë€?</p>\n<p>íŒ¨í„´ë§ˆë‹¤ ë‹¤ë¥´ê²Œ í‘œí˜„ëœë‹¤.</p>\n<p>Repository íŒ¨í„´ì—ì„œëŠ” Controller, Service, Repositoryë¥¼ ê°ê° ê³„ì¸µì´ë¼ ì¹­í•˜ë©°, MVC íŒ¨í„´ì—ì„œëŠ” Model, View, Controllerì˜ ê³„ì¸µì´ ì¡´ì¬í•œë‹¤.</p>\n</blockquote>\n</li>\n<li>\n<p>ê³„ì¸µê°„ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ì–´ë–¤ ëª¨ì–‘ì˜ ë°ì´í„° ê°ì²´ë¡œ ì£¼ê³  ë°›ì„ì§€ë¥¼ <code class=\"language-text\">DTO</code>ì—ì„œ ê²°ì •í•˜ê²Œ ë˜ë¯€ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì„¤ê³„í• ë•Œ ìµœìš°ì„ ìœ¼ë¡œ ê³ ë ¤ë˜ì•¼ í•  ìš”ì†Œì´ë‹¤.</p>\n</li>\n<li>\n<p>ì‰½ê²Œ ë§í•˜ìë©´ ì •ë³´ë¥¼ êµí™˜í•˜ëŠ”ë° ìˆì–´ íƒ€ì…ì„ ì²´í¬í•˜ê¸° ìœ„í•œ êµ¬ì¡°ë¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.</p>\n</li>\n<li>\n<p>ë˜í•œ, íƒ€ì…ì„ ì²´í¬í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ <code class=\"language-text\">DTO</code>ì™¸ì— <code class=\"language-text\">Interface</code>ê°€ ì¡´ì¬í•˜ë©° ì´ëŠ” ì•„ë˜ì—ì„œ ë‹¤ì‹œ ì„¤ëª…í•˜ê² ë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"2-interface\" style=\"position:relative;\"><a href=\"#2-interface\" aria-label=\"2 interface permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Interface</h3>\n<hr>\n<ul>\n<li>\n<p>ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ìë©´ ì¸í„°í˜ì´ìŠ¤ëŠ” TypeScriptì—ì„œ ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤ì˜ íƒ€ì… ì²´í¬ë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ë©° ë³´ê¸°ì—ëŠ” í´ë˜ìŠ¤ì™€ ìœ ì‚¬í•˜ì§€ë§Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•˜ê³  ëª¨ë“  ë©”ì†Œë“œëŠ” ì¶”ìƒ ë©”ì†Œë“œë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.</p>\n</li>\n<li>\n<p>ë˜í•œ <strong>â€œES6ì—ì„œ ì§€ì›í•˜ì§€ ì•Šê³  TypeScriptì—ì„œë§Œ ì§€ì›í•œë‹¤.â€</strong></p>\n</li>\n<li>\n<p>ë°ì´í„° íƒ€ì…ì„ ì²´í¬í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì ì¸ ë©´ëª¨ë¡œì¨ëŠ” <code class=\"language-text\">DTO</code>ì™€ ë™ì¼í•˜ì§€ë§Œ ìœ„ì—ì„œ ê°•ì¡°í•œê²ƒ ì²˜ëŸ¼ ES6ì—ì„œëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì°¨ì´ì ì´ ìˆë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"3-why-dto\" style=\"position:relative;\"><a href=\"#3-why-dto\" aria-label=\"3 why dto permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Why DTO?</h3>\n<hr>\n<ul>\n<li>\n<p>ìœ„ ì§ˆë¬¸ì˜ í•´ë‹µì€ NestJS <a href=\"https://docs.nestjs.com/controllers#request-object\" target=\"_blank\">ê³µì‹ë¬¸ì„œ</a>(Request payloads ë¶€ë¶„)ì—ì„œëŠ” ì™œ DTOë¡œ ì•ˆë‚´í•˜ëŠ”ì§€ ì„¤ëª…ì´ ìì„¸íˆ ì•ˆë‚´ë˜ì–´ ìˆë‹¤.</p>\n<p><img src=\"https://user-images.githubusercontent.com/83164003/175549009-f7cb3010-f861-4750-a5e9-15978b486734.png\" alt=\"á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-24 á„‹á…©á„’á…® 10 11 12\"></p>\n<p>ìœ„ ë‚´ìš©ì„ ìœ„ <code class=\"language-text\">Interface</code>ë¥¼ ì„¤ëª…í–ˆë˜ ë‚´ìš©ê³¼ ë§ë¶™í˜€ ê°„ëµíˆ ì¤„ì´ìë©´ TypeScriptì˜ í´ë˜ìŠ¤ëŠ” JavaScript ES6 í‘œì¤€ì„ ë”°ë¥´ë¯€ë¡œ TypeScriptë¡œ ì‘ì„±ë˜ì—ˆì§€ë§Œ ì»´íŒŒì¼ ëœ JavaScriptì—ì„œëŠ” ì¸í„°í˜ì´ìŠ¤ëŠ” ì»´íŒŒì¼ ë„ì¤‘ ì œê±°ë˜ë¯€ë¡œ(<code class=\"language-text\">Interface</code>ëŠ” ES6 í‘œì¤€ì´ ì•„ë‹ˆë¯€ë¡œ) NestJSì—ì„œ ëŸ°íƒ€ì„ì— ì¸í„°í˜ì´ìŠ¤ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ê²Œëœë‹¤.</p>\n</li>\n<li>\n<p>ë”°ë¼ì„œ NestJSì—ì„œëŠ” ëŸ°íƒ€ì„ ì´í›„ <code class=\"language-text\">Input</code>ê°’ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì¦ì´ë¼ë˜ì§€ ê·¸ ì™¸ì˜ ë°ì´í„° íƒ€ì…ì„ ì§€ì†ì ìœ¼ë¡œ ì¶”ì í•´ì•¼í•˜ëŠ” ê²½ìš° <code class=\"language-text\">DTO</code>ëŠ” Classë¡œ ì‘ì„±ë˜ê¸°ì— ES6 í‘œì¤€ì´ë¯€ë¡œ ì°¸ì¡°ê°€ ê°€ëŠ¥ í•˜ì§€ë§Œ, <code class=\"language-text\">Interface</code>ëŠ” ES6 í‘œì¤€ ë¬¸ë²•ì´ ì•„ë‹ˆë¯€ë¡œ ì œê±°ë˜ê¸°ì— ì°¸ì¡°í•  ìˆ˜ ì—†ê²Œëœë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤” Understanding</h2>\n<ul>\n<li>\n<p>ê·¸ëƒ¥ í•™ìŠµí•œ ëŒ€ë¡œ ìŠµê´€ì ìœ¼ë¡œ <code class=\"language-text\">DTO</code>ë¥¼ ì‚¬ìš©í•˜ë‹¤ ë¶ˆí˜„ë“¯ ë– ì˜¤ë¥¸ ê¶ê¸ˆì¦ì¸ <strong>â€œí´ë˜ìŠ¤ ë¬¸ë²•ìœ¼ë¡œ ìƒì„±ë˜ì§€ë§Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒë„ ì•„ë‹ˆê³ .. ë‹¨ìˆœ íƒ€ì… ê²€ì¦ë§Œì„ ìœ„í•´ ì‚¬ìš©ë˜ëŠ”ê²Œ ì•„ë‹Œê°€? ê·¸ëŸ¼ ì¸í„°í˜ì´ìŠ¤ë‘ ë‹¤ë¥¸ê²Œ ë¬´ì—‡ì´ì§€?â€</strong> ë¼ëŠ” ì˜ë¬¸ì ì—ì„œ ì°¾ì•„ë³´ë‹ˆ ì´ì™€ê°™ì€ ê²°ë¡ ì— ë„ë‹¬í•˜ê²Œ ë˜ì—ˆë‹¤.</p>\n</li>\n<li>\n<p>NestJS ê³µì‹ ë¬¸ì„œëŠ” ëŒ€ë‹¨í•˜ë‹¤.</p>\n<p>ëª¨ë“  ê¶ê¸ˆì¦ì— ëŒ€í•œ ë‚´ìš©ì´ ì´ë¯¸ ëª¨ë‘ ê¸°ì¬ë˜ì–´ ìˆì—ˆë‹¤. <del>(ë‚´ê°€ ì°¾ì•„ë³´ì§ˆ ì•Šì•˜ì„ ë¿â€¦)</del></p>\n</li>\n<li>\n<p>ì§€ê¸ˆì€ í”„ë¡œì íŠ¸ í•œì°½ì´ë¼ ë„ˆë¬´ ë°”ì˜ê³ , ì–´ëŠì •ë„ ì•ˆì •ë˜ë©´ ê³µì‹ë¬¸ì„œ ì •ì£¼í–‰ì„ í•œë²ˆ í•´ì•¼ê² ë‹¤.</p>\n</li>\n</ul>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li><a href=\"#1-dto-data-transfer-object\">1. DTO (Data Transfer Object)</a></li>\n<li><a href=\"#2-interface\">2. Interface</a></li>\n<li><a href=\"#3-why-dto\">3. Why DTO?</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">ğŸ¤” Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 24, 2022","title":"NestJS DTO vs Interface","categories":"TIL","author":"JH8459","emoji":"ğŸ“š"},"fields":{"slug":"/2022-06-24-TIL/"}},"site":{"siteMetadata":{"siteUrl":"https://blog.jh8459.com","comments":{"utterances":{"repo":"JH8459/JH8459.github.io"}}}}},"pageContext":{"slug":"/2022-05-25-TIL/","nextSlug":"/2022-05-06-TIL/","prevSlug":"/2022-06-24-TIL/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}