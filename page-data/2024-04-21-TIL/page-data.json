{"componentChunkName":"component---src-templates-blog-template-js","path":"/2024-04-21-TIL/","result":{"data":{"cur":{"id":"7c27ab3b-a9d3-519f-8e62-dfacee6eb277","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"️-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"️ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<p>다중 인스턴스로 구성된 환경에서 동시에 임계 자원에 접근하려는 상황(동시성)을 제어하기 위해 도입한 방법을 간략히 정리하고 공유하기 위해 글을 남긴다.</p>\n<br>\n<br>\n<h3 id=\"1-문제점\" style=\"position:relative;\"><a href=\"#1-%EB%AC%B8%EC%A0%9C%EC%A0%90\" aria-label=\"1 문제점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 문제점</h3>\n<hr>\n<p>현재 사내에서 사용중인 서비스 구성도는 아래 사진과 같다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 470px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVQoz32Sy27TUBCG/VpseA0WvAMbkFjACrHoBoln6IYNCCEkFhRRFq1UoAsgkJCGJE1zt3OzfXx8rv6Q7ZAWVTDSked4/jPzz8wfHLfGJJlGSEMsFLmy/DFtNDaX7L37xLPTFoVRGGO20WKHo6j9WGgC/mNKawrv6FxMGU3D+p9S/8SXxIJc14yklKRpihBid+I4rmJHh/t8PX1T+ZvN+i9M+SbP1SVDbVx1yaTEOYf3fnfKIqV9OfvGr2F3V/gqxjlfvd0lNNZXFyOS6y0rVRVZhSGLeYh1Dq31NZwW6bZlQ2C0YbqOufP8kF60Bmfx2yFb6/Basff2hP2TBoVWOF8TqL8Fx90h918fIZVmk0gCISRhkvKq1WORSbRSFZOKYa4w1vChO6YxW4L3u3lZa7Fa8XMccdDsY4wiWiYEwliKcUh69wn6Y4NyRXYrDWMtOk1pP3hI89Fj/JUtO2spx5XLKdl8gFeWZZwRpFKBtoT3niJevKdMZbWptKWdI1+veXnjJge3buOLy4RlsXIk5/Mhn89+kOWKVZmwbEHmGZPxCCEF3luKYrsolddSWS4QSS0ho7c6LDzWaPIsI5zN8FazigXB2SCi3Z/R7E5odSd0hwuG84RRlHI+WdMZhLQHc9rn88ofzDZVrMR0LiJavSnfO6MqR6sf8Rutb0XGT6KBTAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"architecture.png\"\n        title=\"architecture.png\"\n        src=\"/static/5d663c6ef87387829a1ca53f405f22e9/f96db/architecture.png\"\n        srcset=\"/static/5d663c6ef87387829a1ca53f405f22e9/e9ff0/architecture.png 180w,\n/static/5d663c6ef87387829a1ca53f405f22e9/f21e7/architecture.png 360w,\n/static/5d663c6ef87387829a1ca53f405f22e9/f96db/architecture.png 470w\"\n        sizes=\"(max-width: 470px) 100vw, 470px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>이 구성도 내부에서 <strong>API Server</strong>는 Docker compose 환경에서 <code class=\"language-text\">replicas</code> 옵션으로 구성하여 쓰레드 갯수 만큼 다중 인스턴스 환경으로 구성되고 있다.</p>\n<p>여러개의 인스턴스로 구성되어 있기 때문에 스케쥴링 작업 등 여러개의 인스턴스가 동시에 같은 자원을 요구하는 작업에서 반복적인 에러가 리포팅되고 있었다.</p>\n<br>\n<br>\n<h3 id=\"2-해결방안\" style=\"position:relative;\"><a href=\"#2-%ED%95%B4%EA%B2%B0%EB%B0%A9%EC%95%88\" aria-label=\"2 해결방안 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 해결방안</h3>\n<hr>\n<p>우선 키워드를 먼저 언급하자면 <strong>“동시성 제어(concurrency control)”</strong>였다.</p>\n<p>비슷한 레퍼런스를 찾고자하니 많은 솔루션들이 나왔다.</p>\n<p>기억나는 솔루션 중 참고 될 만한 자료들은 링크로 따로 남겨두겠다.</p>\n<br>\n<blockquote>\n<p><a href=\"https://medium.com/nodejs-server/node-schedule-pm2-8f7831ed231e\" target=\"_blank\">🔗 PM2 환경에서 중복되지 않는 스케쥴링 구현</a></p>\n<p><a href=\"https://sg-choi.tistory.com/602\" target=\"_blank\">🔗 스프링 환경에서 스케쥴러 락 (ShedLock)</a></p>\n</blockquote>\n<br>\n<p>위 두가지 방법들이 대다수가 사용하는 솔루션이었다.</p>\n<p>각각 내포하는 뜻은 다음과 같다.</p>\n<br>\n<ol>\n<li><code class=\"language-text\">replicas</code> 옵션으로 복제된 각각의 인스턴스의 컨테이너 번호를 알아내어 특정 번호의 인스턴스만 실행되게 한다.</li>\n<li>스케쥴링 작업이 실행되기 전 우선권을 얻은 뒤 우선권을 얻은 인스턴스만 스케쥴링 작업이 실행되게 한다.</li>\n</ol>\n<br>\n<p><code class=\"language-text\">replicas</code> 옵션은 유동적으로 변하기도하고 각각 내부 인스턴스의 상황은 그때 그때 변하기 때문에 고정 번호의 인스턴스만 실행되게하는건 리스크가 있다 판단하였다. 따라서, 두번째 방향으로 리팩토링을 진행하였다.</p>\n<p>여러개의 인스턴스가 공통으로 사용하는 자원을 활용하여 우선권을 선점여부를 판단하여 “Lock”을 걸어야하므로 <strong>Redis</strong>를 활용하였다.</p>\n<p>스프링 환경의 <code class=\"language-text\">ShedLock</code> 기능과 유사한 <strong>“분산락”</strong>을 구현해보았다.</p>\n<br>\n<br>\n<h3 id=\"3-변경점\" style=\"position:relative;\"><a href=\"#3-%EB%B3%80%EA%B2%BD%EC%A0%90\" aria-label=\"3 변경점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 변경점</h3>\n<hr>\n<p>검색해보니 RedLock 알고리즘(권장) 등 이러한 분산 환경에서 쓰이는 여러 알고리즘들이 있다는걸 알게되었다.</p>\n<p>우선 현재 사용중인 스케줄링들은 정산이나 비용에 관련된 데이터 정합성에 아주 민감한 비즈니스 로직은 아니므로 간단한 알고리즘으로 구현해보았다.</p>\n<br>\n<ul>\n<li>\n<p><strong>redis.service.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Injectable</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisService</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">InjectRedis</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">private</span> redis<span class=\"token operator\">:</span> Redis<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Lock 유지 시간 (5분)</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">readonly</span> lockDuration <span class=\"token operator\">=</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">setLock</span><span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Lock 획득</span>\n    <span class=\"token keyword\">const</span> lock<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token string\">'LOCK'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EX'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>lockDuration<span class=\"token punctuation\">,</span> <span class=\"token string\">'NX'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> lock<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token function\">unLock</span><span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Lock 해제</span>\n    <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span><span class=\"token function\">del</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><strong>scheduler.service.ts</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Cron</span></span><span class=\"token punctuation\">(</span>CronExpression<span class=\"token punctuation\">.</span><span class=\"token constant\">MONDAY_TO_FRIDAY_AT_9PM</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">async</span> <span class=\"token function\">scheduler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> lockKey <span class=\"token operator\">=</span> <span class=\"token string\">'LOCK_KEY'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> lock <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>redisService<span class=\"token punctuation\">.</span><span class=\"token function\">setLock</span><span class=\"token punctuation\">(</span>lockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>lock<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 스케쥴링 로직</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">finally</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>redisService<span class=\"token punctuation\">.</span><span class=\"token function\">unLock</span><span class=\"token punctuation\">(</span>lockKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<p>코드 구현 난이도 자체는 높지 않았다.</p>\n<p>다만, “데이터의 정합성” 이라는 큰 개념아래에서 동시성을 제어하여야 한다는 걸 인지하지 못했다면 평생 해결하지 못할 이슈였다.</p>\n<p>분산 환경에서 고려해야할 것이 많다라는 점을 충분히 인지할 수 있었던 시간이었다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li><a href=\"#1-%EB%AC%B8%EC%A0%9C%EC%A0%90\">1. 문제점</a></li>\n<li><a href=\"#2-%ED%95%B4%EA%B2%B0%EB%B0%A9%EC%95%88\">2. 해결방안</a></li>\n<li><a href=\"#3-%EB%B3%80%EA%B2%BD%EC%A0%90\">3. 변경점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","excerpt":"✍️ Today I Learned 다중 인스턴스로 구성된 환경에서 동시에 임계 자원에 접근하려는 상황(동시성)을 제어하기 위해 도입한 방법을 간략히 정리하고 공유하기 위해 글을 남긴다. 1. 문제점 현재 사내에서 사용중인 서비스 구성도는 아래 사진과 같다.  이 구성도 내부에서 API Server는 Docker compose 환경에서  옵션으로 구성하여 쓰레드 갯수 만큼 다중 인스턴스 환경으로 구성되고 있다. 여러개의 인스턴스로 구성되어 있기 때문에 스케쥴링 작업 등 여러개의 인스턴스가 동시에 같은 자원을 요구하는 작업에서 반복적인 에러가 리포팅되고 있었다. 2. 해결방안 우선 키워드를 먼저 언급하자면 “동시성 제어(concurrency control)”였다. 비슷한 레퍼런스를 찾고자하니 많은 솔루션들이 나왔다. 기억나는 솔루션 중 참고 될 만한 자료들은 링크로 따로 남겨두겠다. 🔗 PM2 환경에서 중복되지 않는 스케쥴링 구현 🔗 스프링 환경에서 스케쥴러 락 (ShedLock) 위 …","frontmatter":{"date":"April 21, 2024","title":"다중 인스턴스 환경에서 동시성을 해결하기 위한 Redis 분산락 구현하기","categories":"TIL","author":"JH8459","emoji":"📚"},"fields":{"slug":"/2024-04-21-TIL/"}},"next":{"id":"62fe8ae7-4309-5487-a692-dc1e2cfd7628","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"️-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"️ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<p>Bash Script를 통하여 Slack Incoming Webhook 알림 요청을 수행하고 이를 자동화 하는 과정을 간략히 정리하고 공유하기 위해 글을 남긴다.</p>\n<br>\n<br>\n<h3 id=\"1-필요성\" style=\"position:relative;\"><a href=\"#1-%ED%95%84%EC%9A%94%EC%84%B1\" aria-label=\"1 필요성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 필요성</h3>\n<hr>\n<p>현재 우리 회사의 가장 중요한 서비스를 꼽으라하면 인재 채용을 위한 온라인 인적성 검사이다.</p>\n<p>검사에 필요한 내용(문항과 지문 이미지 등)을 제공하는 <strong>API 서버</strong>와 응시자가 유효한 환경에서 검사를 치르고 있는지 웹캠과 화면 공유를 실시간으로 소통하는 <strong>WebRTC 서버</strong>를 구성하여 온라인 응시환경을 제공하고 있다.</p>\n<p>뿐만 아니라, 검사가 끝나면 응시자의 검사 녹화 영상을 저장하고 계약 내용에 따라 제공(평균 한달 이상 보관)하고 있다.</p>\n<p>수시 채용기간에는 큰 문제가없지만, 상반기 / 하반기 공채 기간에는 큰 리소스가 필요하게 되므로, 해당 슬랙 알림 기능을 구현하여 팀원들 모두에게 자원 유지의 편의성을 제공하기 위해 Bash Script와 슬랙 웹훅 기능을 통해 자원 모니터링 기능이 필요로 했다.</p>\n<blockquote>\n<p>시스템 자원을 위한 대쉬보드 구현 또한 고려 대상이었으나, 단순 디스크 자원 체크를 위해 너무 큰 투자라 생각하였기에 간단한 Slack Incoming Webhook으로 구현하였다.</p>\n</blockquote>\n<br>\n<br>\n<h3 id=\"2-해결과정\" style=\"position:relative;\"><a href=\"#2-%ED%95%B4%EA%B2%B0%EA%B3%BC%EC%A0%95\" aria-label=\"2 해결과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 해결과정</h3>\n<hr>\n<p>Slack Incoming Webhook 수신을 위해 채널을 새로 생성 후 앱 설정(<a href=\"https://api.slack.com/messaging/webhooks\" target=\"_blank\"><a href=\"https://api.slack.com\">https://api.slack.com</a></a> 참고)을 마치면 아래와 같은 cURL 요청 샘플을 받아볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -X POST --data-urlencode \"payload={\\\"channel\\\": \\\"#my-channel-here\\\", \\\"username\\\": \\\"webhookbot\\\", \\\"text\\\": \\\"이 항목은 #개의 my-channel-here에 포스트되며 webhookbot이라는 봇에서 제공됩니다.\\\", \\\"icon_emoji\\\": \\\":ghost:\\\"}\" https://hooks.slack.com/services/SAMPLE</code></pre></div>\n<p>아래와 같은 메시지 알림이 채널에 수신된다면 기본적인 준비는 마친거다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 632px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.444444444444445%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYklEQVQI123MuwrAIAyF4b7/67kJQkUpXqKbmIByihk6dfj4IQdy+dvDWgtjDJxzaK2h944xBpj515wTIqL0NhnCgr03ridEhBD02SlVQikFtVbtQUTIOX9SSt92xBi1ay28z0iW/VuvJckAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"webhook.png\"\n        title=\"webhook.png\"\n        src=\"/static/707d7097fe360becbe5ad342bd28a14a/084e2/webhook.png\"\n        srcset=\"/static/707d7097fe360becbe5ad342bd28a14a/e9ff0/webhook.png 180w,\n/static/707d7097fe360becbe5ad342bd28a14a/f21e7/webhook.png 360w,\n/static/707d7097fe360becbe5ad342bd28a14a/084e2/webhook.png 632w\"\n        sizes=\"(max-width: 632px) 100vw, 632px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>아래와 같은 Bash Script를 작성하여 위 메시지를 커스텀해주었다.</p>\n<ul>\n<li>\n<p><strong>ssd.sh</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n\n<span class=\"token comment\"># /main volume의 디스크 사용량 정보를 가져옵니다.</span>\n<span class=\"token assign-left variable\">disk_info</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">df</span> <span class=\"token parameter variable\">-h</span> /main <span class=\"token operator\">|</span> <span class=\"token function\">tail</span> <span class=\"token parameter variable\">-1</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token comment\"># \"총 용량\", \"사용한 용량\", \"남은 용량\", \"사용률\" 순으로 출력합니다.</span>\n<span class=\"token assign-left variable\">total</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">echo</span> $disk_info <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $2}'</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">used</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">echo</span> $disk_info <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $3}'</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">available</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">echo</span> $disk_info <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $4}'</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">use_percentage</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token builtin class-name\">echo</span> $disk_info <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $5}'</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token comment\"># /main/WEBRTC/public/uploads 디렉토리의 하위 디렉토리별 디스크 사용량 정보를 가져옵니다.</span>\n<span class=\"token assign-left variable\">directory1_disk_usage</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">du</span> <span class=\"token parameter variable\">-sh</span> /main/WEBRTC/public/uploads/directory1 <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $1}'</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">directory2_disk_usage</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">du</span> <span class=\"token parameter variable\">-sh</span> /main/WEBRTC/public/uploads/directory2 <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> <span class=\"token string\">'{print $1}'</span><span class=\"token variable\">)</span></span>\n<span class=\"token comment\"># curl을 통해 Slack에 메시지를 보냅니다.</span>\n<span class=\"token function\">curl</span> <span class=\"token parameter variable\">-X</span> POST --data-urlencode <span class=\"token string\">\"payload={<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>channel<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>#채널명<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>, <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>text<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>: <span class=\"token entity\" title=\"\\&quot;\">\\\"</span>===============================<span class=\"token entity\" title=\"\\n\">\\n</span>          ‼️ RTC 서버 사용량 알림 ‼️<span class=\"token entity\" title=\"\\n\">\\n</span>------------------------------------------------<span class=\"token entity\" title=\"\\n\">\\n</span>1. 총 용량: <span class=\"token variable\">$total</span><span class=\"token entity\" title=\"\\n\">\\n</span>2. 사용한 용량: <span class=\"token variable\">$used</span> (<span class=\"token variable\">$use_percentage</span> 사용)<span class=\"token entity\" title=\"\\n\">\\n</span>3. 남은 용량: <span class=\"token variable\">$available</span><span class=\"token entity\" title=\"\\n\">\\n</span>4. 폴더 별 사용량<span class=\"token entity\" title=\"\\n\">\\n</span><span class=\"token entity\" title=\"\\n\">\\n</span>    - 1번: <span class=\"token variable\">$directory1_disk_usage</span><span class=\"token entity\" title=\"\\n\">\\n</span>    - 2번: <span class=\"token variable\">$directory2_disk_usage</span><span class=\"token entity\" title=\"\\n\">\\n</span><span class=\"token entity\" title=\"\\n\">\\n</span>===============================<span class=\"token entity\" title=\"\\&quot;\">\\\"</span>}\"</span> https://hooks.slack.com/services/SAMPLE</code></pre></div>\n</li>\n</ul>\n<p>Script 구현 난이도 자체는 높지 않았기에 금방 작성할 수 있었다.</p>\n<blockquote>\n<p>다만, 사용하는 디렉토리 구조에 따라 유효하지 않을 수 있기 떄문에 이 글을 보고 해당 기능을 구현하고자하신다면 별도의 커스텀 과정이 꼭 필요하다.</p>\n</blockquote>\n<p>스크립트를 실행해보면 다음과 같은 메시지를 받아 볼 수 있다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 356px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8UlEQVQ4y51UXW+iQBT1/z/uvuy/2OzrPnSfNtk0IZqiSEURqUYYPoQRKx/q2dzbDkUstnaSkzswcOace+9MTxsasJcrTCYTPDzoWK/X2EqJ7XbL2O/3+Ow4nU7offvxHT9/32E+d2BNLHi+wEZKRFGEMAyRJAnKsjxDURTIqwpFWSLPc35HZDR6v/7oeHQ9lGUBmWVIhUDsLrBJU6RpiiAImFgIwQiDkN8Je4bY97BJEkgp3wgbejmUTw7k/V+MpzMEQsA0TSbSdR2GYcAYGZjN58i1fzgG/pldJjwej8ylrBDKokCWZYzdbsdQOSU1hF299sy26xwqZvp5tVphuVzCcRzQRofDAVVV8bypggatKTTXa0La1XVdDIdDPJom54k2UT/TOimRrx3wXoXZsppQNYmk3+8z8WAwgOd59WaWZfHzdDplKBKFC4VU0cViwWTj8ZgjDWWnS1F71IRRGGE0GkHTNFZn2zaD5pT8LkVt4pqQqku2qefiOOb8kWpqGSpMF+GFwuZC8+OXdjp9aLHTMkVSQv1IkSqrjtQ1RVcJFZkibPbXzQrbzUq4RVmnZaWufUK+lENF1Mxhm/QaakL10KXwpgu2bVkVQ8XPKLtQqI6e7/vc2E3Qu0C8XLLqsqXI375etnQgzi7YW6r4keX/QGZkFR+vrT4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"notice.png\"\n        title=\"notice.png\"\n        src=\"/static/7097206d69fb0961d380c4d70f4b82b2/50ac3/notice.png\"\n        srcset=\"/static/7097206d69fb0961d380c4d70f4b82b2/e9ff0/notice.png 180w,\n/static/7097206d69fb0961d380c4d70f4b82b2/50ac3/notice.png 356w\"\n        sizes=\"(max-width: 356px) 100vw, 356px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>그 후엔 <code class=\"language-text\">/etc/crontab</code> 파일을 수정하여 월~금 매일 오전 09시에 위 메시지 알림을 받아보고 있다.</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<p>작년엔 구현에 집중했다면, 올해는 불편한 부분들을 하나씩 개선하는데 집중해 볼 예정이다.</p>\n<p>추후엔 Bash Script를 더욱 개선하여 사람이 직접 관여하여 리소스를 관리하는 상황이 발생 안 할 수 있게끔 해보려한다.</p>\n<p>계약기간에 따라 다운로드 링크 제공 기간이 지난 리소스들은 백업 스토리지 공간으로 옮기고, 보관 기간이 지난 영상들은 리소스를 완전 삭제하는 기능까지 구현해 볼 예정이다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li><a href=\"#1-%ED%95%84%EC%9A%94%EC%84%B1\">1. 필요성</a></li>\n<li><a href=\"#2-%ED%95%B4%EA%B2%B0%EA%B3%BC%EC%A0%95\">2. 해결과정</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"April 18, 2024","title":"Bash Script를 이용한 Slack Incoming Webhook 알림 자동화","categories":"TIL","author":"JH8459","emoji":"📚"},"fields":{"slug":"/2024-04-18-TIL/"}},"prev":{"id":"5700bdd4-dfb9-5618-bf95-dd20ad62a741","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 130.55555555555557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIDBAUB/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHSW9mZaREU9S9wQkK//8QAHRAAAgEEAwAAAAAAAAAAAAAAAQIDABESEwQQIv/aAAgBAQABBQK7XLEUoIFciSzQPsi9ZzQ5NGmtBRHX/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFREBAQAAAAAAAAAAAAAAAAAAASD/2gAIAQIBAT8BY//EAB4QAAIBBAMBAAAAAAAAAAAAAAABMQIRIUEQIDJR/9oACAEBAAY/Apc/D0zLvxZaFUyMEyhUrXT/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMUFREGGB/9oACAEBAAE/IcoJgJY3jUoljupXti2Dz+xNsdxcQMdzNdRIbqzl4E5QhzP/2gAMAwEAAgADAAAAENAovP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxACZP/EABgRAAMBAQAAAAAAAAAAAAAAAAABERAx/9oACAECAQE/EEiFwmf/xAAgEAEBAAIBAwUAAAAAAAAAAAABEQAhMUFRcWGBkaHB/9oACAEBAAE/EETLYDcl7uFWtJ3q9DIFk8o1lK6M4rkEPK+2RmkiOqMv1hg/uW7uUjCiC9inzjXLIiLVf3CFgG3jzgSkwKnrcAMAVrM//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"book.jpeg\"\n        title=\"book.jpeg\"\n        src=\"/static/66ce7b2175da692122a2ebe6bada9cc5/80e3c/book.jpg\"\n        srcset=\"/static/66ce7b2175da692122a2ebe6bada9cc5/4ec73/book.jpg 180w,\n/static/66ce7b2175da692122a2ebe6bada9cc5/158ba/book.jpg 360w,\n/static/66ce7b2175da692122a2ebe6bada9cc5/80e3c/book.jpg 720w,\n/static/66ce7b2175da692122a2ebe6bada9cc5/4d836/book.jpg 920w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"-독서후기\" style=\"position:relative;\"><a href=\"#-%EB%8F%85%EC%84%9C%ED%9B%84%EA%B8%B0\" aria-label=\" 독서후기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📓 독서후기</h2>\n<p><strong>「좋은 코드, 나쁜 코드」</strong> 독서 후기</p>\n<ul>\n<li>\n<p><strong>PART 1. 이론</strong></p>\n<ul>\n<li>1장. 코드 품질</li>\n<li>2장. 추상화 계층</li>\n<li>3장. 다른 개발자와 코드 계약</li>\n<li>4장. 오류</li>\n</ul>\n</li>\n<li>\n<p><strong>PART 2. 실전</strong></p>\n<ul>\n<li>5장. 가독성 높은 코드를 작성하라</li>\n<li>6장. 예측 가능한 코드를 작성하라</li>\n</ul>\n</li>\n</ul>\n<br>\n<br>\n<p>위 기재된 챕터들을 독서한 뒤 블로그에 후기로 정리까지 해보려한다.</p>\n<p>많은 이가 그러하였듯이, 나 또한 개발 서적 중 처음 읽고 독서 후기로 남긴 도서가 <strong>「Clean Code」</strong> 였다.</p>\n<br>\n<hr>\n<details>\n<summary><strong>「Clean Code」 독서 후기 바로가기</strong></summary>\n<ul>\n<li>\n<p>🔗 <a href=\"https://blog.jh8459.com/2023-03-20-BOOK/\" target=\"_blank\">Clean Code - 1</a></p>\n</li>\n<li>\n<p>🔗 <a href=\"https://blog.jh8459.com/2023-04-02-BOOK/\" target=\"_blank\">Clean Code - 2</a></p>\n</li>\n<li>\n<p>🔗 <a href=\"https://blog.jh8459.com/2023-04-09-BOOK/\" target=\"_blank\">Clean Code - 3</a></p>\n</li>\n<li>\n<p>🔗 <a href=\"https://blog.jh8459.com/2023-04-16-BOOK/\" target=\"_blank\">Clean Code - 4</a></p>\n</li>\n</ul>\n</details>\n<hr>\n<br>\n<p>6장까지 읽은 후기를 한줄로 요약하자면, <strong>「Clean Code」</strong> 와 유사하다는 생각이 많이 들었다. (<del>아직 모두 읽진 못하였지만!</del>)</p>\n<p>하지만, 이 책의 저자는 자신의 주장을 풀어나가는 방식이 조금 달랐다. 어떻게 다른지에 대하여 자세한 내용은 아래에 기재하였다.</p>\n<br>\n<br>\n<h3 id=\"1장-코드-품질\" style=\"position:relative;\"><a href=\"#1%EC%9E%A5-%EC%BD%94%EB%93%9C-%ED%92%88%EC%A7%88\" aria-label=\"1장 코드 품질 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1장. 코드 품질</h3>\n<hr>\n<p>코드 품질이 중요한 이유(<del>당연하지만! 조금 더 구체적으로</del>)에 대해 다루며, 좋은 코드 품질을 가진 소프트웨어가 중장기적으로 가져오는 베네핏에 대해 강조한다.</p>\n<p>1장을 한줄로 요약하자면 다음과 같다고 느꼈다.</p>\n<br>\n<blockquote>\n<p>“서두르지 않으면 더 빠르다.”</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHuRYFgYjZiP//EABkQAQACAwAAAAAAAAAAAAAAAAASIQERIP/aAAgBAQABBQKlNY7mmm//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAWEAADAAAAAAAAAAAAAAAAAAAAMEH/2gAIAQEABj8CIv8A/8QAGxAAAgMAAwAAAAAAAAAAAAAAAAERMVEgQYH/2gAIAQEAAT8haTpEYCgpDs84ywlhLD//2gAMAwEAAgADAAAAEPAPPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EAB0QAAICAgMBAAAAAAAAAAAAAAABEZFRYRAhMfH/2gAIAQEAAT8QeRej4A0jqQ8JCTnKE8pQvCE+2iFjjVs1bNGz/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img1.jpeg\"\n        title=\"img1.jpeg\"\n        src=\"/static/04c34516bce0f7d848dca1f2d0a37733/80e3c/img1.jpg\"\n        srcset=\"/static/04c34516bce0f7d848dca1f2d0a37733/4ec73/img1.jpg 180w,\n/static/04c34516bce0f7d848dca1f2d0a37733/158ba/img1.jpg 360w,\n/static/04c34516bce0f7d848dca1f2d0a37733/80e3c/img1.jpg 720w,\n/static/04c34516bce0f7d848dca1f2d0a37733/47311/img1.jpg 1080w,\n/static/04c34516bce0f7d848dca1f2d0a37733/644c5/img1.jpg 1440w,\n/static/04c34516bce0f7d848dca1f2d0a37733/c06f5/img1.jpg 1668w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><strong>\"좋은 코드, 나쁜 코드\"</strong> page.25</center><br>\n<br>\n<p>1장은 이 책의 저자가 얘기하고자하는 주제인 “고품질 코드”의 중요성에 대해 언급한다.</p>\n<p>신뢰할 수 있으며, 유지보수가 용이하고 버그가 거의 없는 소프트웨어를 이루는 코드에 대해서 뻔하지만 중요한 이야기가 주된 내용이었다.</p>\n<br>\n<br>\n<h3 id=\"2장-추상화-계층\" style=\"position:relative;\"><a href=\"#2%EC%9E%A5-%EC%B6%94%EC%83%81%ED%99%94-%EA%B3%84%EC%B8%B5\" aria-label=\"2장 추상화 계층 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2장. 추상화 계층</h3>\n<hr>\n<p>이번 장은 추상화에 대한 근거있는 서술과 다양한 예시가 좋았다.</p>\n<p>이 책의 큰 장점이라하면, 다양한 예시가 특정언어로 편향되어 쓰여지지 않았다. 다양한 언어에서 아이디어를 차용한 <strong>의사코드(pseudocode)</strong>를 사용한다는게 가장 큰 장점이라 생각한다.</p>\n<p>2장은 다양한 예시(너무 큰 클래스 ~ 층이 너무 얇은 클래스)를 토대로 각각의 장단점을 꼬집는다.</p>\n<p><strong>「Clean Code」</strong> 와 비교하면(<del>계속 비교할 예정이다..</del>) 논란이 있을 만한 주제를 설명할 때는 적당한 예제와 함께 독자들을 이해시켜준다.</p>\n<p>그리고 저자의 주장은 <strong>“여러 방법론 중 하나일 뿐”</strong>이라 끊임없이 주장한다.</p>\n<p>이번 장에서 이 책이 가진 성격(?)을 고스란히 느낄 수 있었던것 같다.</p>\n<br>\n<br>\n<h3 id=\"3장-다른-개발자와-코드-계약\" style=\"position:relative;\"><a href=\"#3%EC%9E%A5-%EB%8B%A4%EB%A5%B8-%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%99%80-%EC%BD%94%EB%93%9C-%EA%B3%84%EC%95%BD\" aria-label=\"3장 다른 개발자와 코드 계약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3장. 다른 개발자와 코드 계약</h3>\n<hr>\n<p>3장부터는 “개발론”에 대한 내용이 주된 내용이었던거 같다.</p>\n<p>다른 개발자..라고 지칭하였지만, 이는 나 자신과의 계약이기도 한다.</p>\n<br>\n<blockquote>\n<p>“자신이 작성한 코드라도 1년 후에는 자세한 내용을 잊어버릴 가능성이 크다. 미래의 자신은 본질적으로 다른 개발자라고 간주해야 한다.”</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7g0M0GXIixEr/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQEiER/9oACAEBAAEFAsMOIcubFi5//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFxABAAMAAAAAAAAAAAAAAAAAMQAQMP/aAAgBAQAGPwIxIV//xAAbEAACAgMBAAAAAAAAAAAAAAAAATFxEGGBkf/aAAgBAQABPyFpHAovDQiUnUIlmoqKH//aAAwDAQACAAMAAAAQkwKM/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITGRoUFhcf/aAAgBAQABPxCodEBuqBCzijrQfWC+yBAHcIiAVl7mKxG+2lJCPHmf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img2.jpeg\"\n        title=\"img2.jpeg\"\n        src=\"/static/a43925a9c3bba8ee9a313429d8718735/80e3c/img2.jpg\"\n        srcset=\"/static/a43925a9c3bba8ee9a313429d8718735/4ec73/img2.jpg 180w,\n/static/a43925a9c3bba8ee9a313429d8718735/158ba/img2.jpg 360w,\n/static/a43925a9c3bba8ee9a313429d8718735/80e3c/img2.jpg 720w,\n/static/a43925a9c3bba8ee9a313429d8718735/47311/img2.jpg 1080w,\n/static/a43925a9c3bba8ee9a313429d8718735/644c5/img2.jpg 1440w,\n/static/a43925a9c3bba8ee9a313429d8718735/c06f5/img2.jpg 1668w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><strong>\"좋은 코드, 나쁜 코드\"</strong> page.61</center><br>\n<br>\n<p>이 구문을 읽고 다음날 (<del>하필 오늘..</del>) 21개월 전 코드를 수정하다 경악을 금치 못하였다..</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 293px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACa0lEQVQoz11R2ZKaABDkKza7QQ6P8gABwQNUTpVDFxE2rsdWdN2kkjzm/196UrJHUnnomp6ZfpieZlJ/h6Vd0Gg4hxOeYM/28OMLnPAM093CcraI/AwPuwO2+ycE4QoDXcMhneC4nmITmjgXLk65g8sXF4xhGCQ1ZcTmCNl0jKU5gqf3kU8tel642Hk2JqqGR8/GzreRTSwMJAXNWgudehutWgvtWhOdRqfkTEtpUrPZwUhTYekKrIEGa6BjGdgoIo8i16KB0SN7qFHi9MkZ6aQqXeooCsmaRrKqUlc3qC1JpGgqMb2+gpm5ImeQkKIYWGVr7I5HHE5nnL7/oK+XFxT7J8yDKb4dFvACD36SYfvzN+6PF8zvN9icfyHKd3h+eQHTN8e0KnbYH/fY7veYrQrMXJVEQaR6vYZ6vV6i0Wi84srfZvVaDbUS1Q8d01U0TBwfwWwG1/MwHNuwhhIJgohqtQpR/Fvf+b/z/3tGEHjc3t3Qp9sbqrAscexnurtjXzlXIYHniWVZEgSBeJ4nrlIhjuNIvPYcV/JKpfKxYyRVJnuwIG8YUrPVI7nXRxRHeHjcYl0UmIUR1nmBrqrCGo8RL5cI5nO0JRnWZAIvCBAlCcIkwX2WgVF6KgInQuCEMAYWzKmDLM/hzmPYzhTOdAQ38KEPR3A8D4s4xjJNMfV8zMMQE9vG0DShGwbM8RiMJMtYJBHSPMM63yDdZAjjBEKnTz2lRbtlnyS5Q/rQxCq9Ly8J4xjpZkPFdkv+IiJerJZ2r9YZURRL/zzP41rfflU++BoMx4uoiiIEQShR6jkOLMuWuGqvSb+H8wcOQWOT3PCjswAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img3.png\"\n        title=\"img3.png\"\n        src=\"/static/d787ef10fd29325ffd2bbc89eeda9c7b/3cf3e/img3.png\"\n        srcset=\"/static/d787ef10fd29325ffd2bbc89eeda9c7b/e9ff0/img3.png 180w,\n/static/d787ef10fd29325ffd2bbc89eeda9c7b/3cf3e/img3.png 293w\"\n        sizes=\"(max-width: 293px) 100vw, 293px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><del>뭐지 이 애니스크립트 + 구조분해 할당은..😮‍💨</del></center><br>\n<br>\n<p>내가 쓴 코드가 맞나 싶어 <a href=\"https://www.gitkraken.com/gitlens\" target=\"_blank\">GitLens</a>를 통해 보니 내가 맞네..?? <del>21개월 전의 나의 무지가 드러나서 너무 뼈아프게 다가왔다. 🥲</del></p>\n<p>이 코드를 공유하며, 코드 리뷰를 통해 이런 코드들이 코드베이스에 병합되지 않게끔 팀원 모두 노력하자 다짐할 수 있는 계기가 되어 오히려(?) 좋았다.</p>\n<br>\n<br>\n<h3 id=\"4장-오류\" style=\"position:relative;\"><a href=\"#4%EC%9E%A5-%EC%98%A4%EB%A5%98\" aria-label=\"4장 오류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4장. 오류</h3>\n<hr>\n<p>중요한 이야기를 담은 장이었다.</p>\n<p>저자도 이번 4장은 초입부터 길게 풀어 쓰겠다 미리 선전포고(?)를 했다.</p>\n<p>내용은 비록 길었지만 전달하고자하는 주된 내용들을 요약하자면 다음과 같았다.</p>\n<ul>\n<li>복구할 수 있는 오류와 복구할 수 없는 오류를 구분하여 처리하라.</li>\n<li>요란하게 실패하라.</li>\n<li>명시적으로 오류를 전달하라.</li>\n<li>(부록) 컴파일러 경고를 무시하지 말라.</li>\n</ul>\n<p>이 외에도 역시나 저자는 중론을 지킨다. “암시적으로 오류를 전달하는 방법”에 대해서도 소개하고 그 둘의 장단점을 꼬집는다. (<del>이젠 익숙하다</del>)</p>\n<p>다만, 위 내용을 주된 방법론이라 설명하며 그 근거에 대해서 구체적으로 서술한다.</p>\n<p>그리고 나 또한 저자의 생각과 같으며, 같은 방법론으로 예외의 상황을 처리하고 있다.</p>\n<br>\n<br>\n<h3 id=\"5장-가독성-높은-코드를-작성하라\" style=\"position:relative;\"><a href=\"#5%EC%9E%A5-%EA%B0%80%EB%8F%85%EC%84%B1-%EB%86%92%EC%9D%80-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%9D%BC\" aria-label=\"5장 가독성 높은 코드를 작성하라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5장. 가독성 높은 코드를 작성하라</h3>\n<hr>\n<p>이번 5장 또한 <strong>「Clean Code」</strong> 와 비교하면(<del>그렇다, 또 나왔다.</del>) 전혀 다른 방향으로 방법론을 제시한다.</p>\n<p>바로 “주석”에 대한 내용이다.</p>\n<br>\n<blockquote>\n<p>“클래스와 같이 큰 단위의 코드가 무엇을 하는지 요약하는 높은 수준에서의 주석문은 유용하다.”</p>\n</blockquote>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7g2I0GSai5Er/8QAGRABAAMBAQAAAAAAAAAAAAAAAAEREiAh/9oACAEBAAEFAqh4qE9bbbf/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAXEAEBAQEAAAAAAAAAAAAAAAAxABAw/9oACAEBAAY/AiI4Gf/EAB4QAAIBAwUAAAAAAAAAAAAAAAABERAxUSFBYYHw/9oACAEBAAE/IWjYQHALrndGtSH50lgTsSwf/9oADAMBAAIAAwAAABCDD4z/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EB//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxAh/8QAHRABAAIBBQEAAAAAAAAAAAAAAQARITFhgZGhUf/aAAgBAQABPxBjCcT6HqDF+EGFIghrbiWOSMhD2bHqFgXEi69xSqHM2Hc//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img5.jpeg\"\n        title=\"img5.jpeg\"\n        src=\"/static/29d76521a01e722706a08e45eb911fa3/80e3c/img5.jpg\"\n        srcset=\"/static/29d76521a01e722706a08e45eb911fa3/4ec73/img5.jpg 180w,\n/static/29d76521a01e722706a08e45eb911fa3/158ba/img5.jpg 360w,\n/static/29d76521a01e722706a08e45eb911fa3/80e3c/img5.jpg 720w,\n/static/29d76521a01e722706a08e45eb911fa3/47311/img5.jpg 1080w,\n/static/29d76521a01e722706a08e45eb911fa3/644c5/img5.jpg 1440w,\n/static/29d76521a01e722706a08e45eb911fa3/c06f5/img5.jpg 1668w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><strong>\"좋은 코드, 나쁜 코드\"</strong> page.127</center><br>\n<br>\n<p><strong>「Clean Code」</strong> 에서는 “주석”은 다음과 같이 표현된다.</p>\n<ul>\n<li>주석이 필요한 코드는 잘못 쓰여진 코드이다.</li>\n</ul>\n<br>\n<p>이번 책에서는 올바른 “주석” 사용법에 대해 몇가지 예시로 독자들을 설득한다.</p>\n<p>그 중 공감이 가고, 실제로 도입하고 싶은 “주석” 사용 예시를 가져와보았다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIDAQX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB9xPYpSpZjZiP/8QAGhAAAgIDAAAAAAAAAAAAAAAAABIBEBEgMf/aAAgBAQABBQKsQT3Vhhz/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAXEAEBAQEAAAAAAAAAAAAAAAAxABAw/9oACAEBAAY/AiI4Gf/EABwQAAICAgMAAAAAAAAAAAAAAAABEHERMUFhgf/aAAgBAQABPyFpLgYR6keRaHs8ipUUP//aAAwDAQACAAMAAAAQWwAM/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFREBAQAAAAAAAAAAAAAAAAAAESD/2gAIAQIBAT8QY//EACAQAAICAQMFAAAAAAAAAAAAAAABESExEEGRUXGBofH/2gAIAQEAAT8QbR6BPWB8AV2SnyKlrgwdh2topm0g2RN5V6KXTyf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img6.jpeg\"\n        title=\"img6.jpeg\"\n        src=\"/static/bd8179dcb4fd9467d283bc1b1a8e503d/80e3c/img6.jpg\"\n        srcset=\"/static/bd8179dcb4fd9467d283bc1b1a8e503d/4ec73/img6.jpg 180w,\n/static/bd8179dcb4fd9467d283bc1b1a8e503d/158ba/img6.jpg 360w,\n/static/bd8179dcb4fd9467d283bc1b1a8e503d/80e3c/img6.jpg 720w,\n/static/bd8179dcb4fd9467d283bc1b1a8e503d/47311/img6.jpg 1080w,\n/static/bd8179dcb4fd9467d283bc1b1a8e503d/644c5/img6.jpg 1440w,\n/static/bd8179dcb4fd9467d283bc1b1a8e503d/c06f5/img6.jpg 1668w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><strong>\"좋은 코드, 나쁜 코드\"</strong> page.130</center><br>\n<br>\n<p>주석에 바로 #XXX 같은 이슈 넘버를 언급하는 팁이었다.</p>\n<p>어떤 코드가 왜 존재하는지 이유를 설명하기란 비즈니스 히스토리와 연관있기 때문에 쉽지 않다. 주절 주절 길게 쓰기 보다 이슈 넘버를 언급하여 짧고 간결하게 남기는 팁이다.</p>\n<p>이건..한번 도입해볼만 하다 생각하여 토론장에서 팀원들에게 공유하였고, 이는 승인되어 써봄직한 로직 부분이 발견되면 도입해볼 예정이다. 👍</p>\n<br>\n<br>\n<h3 id=\"6장-예측-가능한-코드를-작성하라\" style=\"position:relative;\"><a href=\"#6%EC%9E%A5-%EC%98%88%EC%B8%A1-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%9D%BC\" aria-label=\"6장 예측 가능한 코드를 작성하라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6장. 예측 가능한 코드를 작성하라</h3>\n<hr>\n<p>이번 장은 1장의 <strong>“코드 품질”</strong>과 유사하게 흘러갔다. (<del>앞선 5장 또한 마찬가지였지만!</del>)</p>\n<p>오용할 수 있는 코드의 양을 줄이고, 별도의 인수인계 없이 유지될 수 있는 코드를 작성하라는 내용이 주된 내용이었다.</p>\n<p>또한, <strong>열거형(enum)</strong> 자료형 처리에 대해 주의하라 강조하였다. (<del>열거형(enum) 자료형을 애용하기에 너무도 반가운 주제였다! 🤩</del>)</p>\n<p>최근 나도 아래와 같은 <strong>열거형(enum)</strong> 자료형을 수정한 적이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">enum</span> GenderEnum <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">MAN</span> <span class=\"token operator\">=</span> <span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">WOMAN</span> <span class=\"token operator\">=</span> <span class=\"token string\">'W'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">GENDERLESS</span> <span class=\"token operator\">=</span><span class=\"token string\">'NONE'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 추가된 열것값</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>시대가 바뀌며 당연하다 생각하는 것들이 더이상 당연하지 아닐 수 있다. 당연하다 생각하여 <strong>열거형(enum)</strong> 자료형으로 관리하는 것은 큰 오만이다.</p>\n<p>그러므로 열것값이 추가될 수 있음을 언제나 대비하는 코드를 습관화 하라 강조한다.</p>\n<p>실제 경험했던 사례라 크게 와 닿았다.</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<p>앞서 읽은 <strong>「Clean Code」</strong> 와 다르게 이번 <strong>「좋은 코드, 나쁜 코드」</strong> 는 거북하지 않고 쉽게 읽혔다.</p>\n<p>앞서 읽은 책의 예시는 모두 <strong>Java</strong>로 구성되어 있기에 예제 코드를 보면 쉽게 흥미가 떨어졌다. 하지만, 이번 책의 예시들은 <strong>의사코드(pseudocode)</strong>로 구성되어 있으며, 예시로 드는 사례에서 또한 여러 언어들(Java, C++, JavaScript, TypeScript 등등..)을 포괄적으로 언급하여 흥미도가 높았던게 큰 장점이었다.</p>\n<br>\n<blockquote>\n<p>실제로 매직값 사례로 <strong>JavaScript</strong>의 <code class=\"language-text\">indexOf()</code> 함수의 -1 리턴값이 언급될 때는 눈이 동그라졌다. 😳</p>\n</blockquote>\n<br>\n<p>절반정도 읽고 난 후기로는 1~2년차 주니어들이 읽기에는 좋은 서적(<del>특히나, 유지보수 업무를 담당하고 있다면 더욱 더</del>)이라 생각한다.</p>\n<p>총 평을 말하기엔 아직 절반 가량의 분량이 남았기에 제대로 된 독서 후기는 마저 읽고 남겨보도록하겠다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EB%8F%85%EC%84%9C%ED%9B%84%EA%B8%B0\">📓 독서후기</a></p>\n<ul>\n<li><a href=\"#1%EC%9E%A5-%EC%BD%94%EB%93%9C-%ED%92%88%EC%A7%88\">1장. 코드 품질</a></li>\n<li><a href=\"#2%EC%9E%A5-%EC%B6%94%EC%83%81%ED%99%94-%EA%B3%84%EC%B8%B5\">2장. 추상화 계층</a></li>\n<li><a href=\"#3%EC%9E%A5-%EB%8B%A4%EB%A5%B8-%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%99%80-%EC%BD%94%EB%93%9C-%EA%B3%84%EC%95%BD\">3장. 다른 개발자와 코드 계약</a></li>\n<li><a href=\"#4%EC%9E%A5-%EC%98%A4%EB%A5%98\">4장. 오류</a></li>\n<li><a href=\"#5%EC%9E%A5-%EA%B0%80%EB%8F%85%EC%84%B1-%EB%86%92%EC%9D%80-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%9D%BC\">5장. 가독성 높은 코드를 작성하라</a></li>\n<li><a href=\"#6%EC%9E%A5-%EC%98%88%EC%B8%A1-%EA%B0%80%EB%8A%A5%ED%95%9C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%98%EB%9D%BC\">6장. 예측 가능한 코드를 작성하라</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"April 24, 2024","title":"좋은 코드, 나쁜 코드 - 1","categories":"Book","author":"JH8459","emoji":"📖"},"fields":{"slug":"/2024-04-24-BOOK/"}},"site":{"siteMetadata":{"siteUrl":"https://blog.jh8459.com","comments":{"utterances":{"repo":"JH8459/JH8459.github.io"}}}}},"pageContext":{"slug":"/2024-04-21-TIL/","nextSlug":"/2024-04-18-TIL/","prevSlug":"/2024-04-24-BOOK/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}