{"componentChunkName":"component---src-templates-blog-template-js","path":"/2024-06-24-TIL/","result":{"data":{"cur":{"id":"bd92966f-45c1-59ca-902d-ba7f59f228b7","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"️-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"️ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<hr>\n<p>현재 운영중인 기술 블로그는 <a href=\"https://pages.github.com/\" target=\"_blank\">Github Pages</a>에서 공식적으로 지원하는 <code class=\"language-text\">Jekyll</code>을 사용하여 만들다가 현재는 <code class=\"language-text\">Gatsby</code>라는 프레임워크를 사용해서 기술 블로그를 운영하고 있다.</p>\n<p>아무래도 정적 웹이트이다 보니 한계점이 많았지만 <code class=\"language-text\">Gatsby</code>에서 제공하는 플러그인을 통해 <code class=\"language-text\">Firebase</code>의 서버리스 서비스를 연동하고 조회수(View)를 노출시킨 과정을 경험을 간략히 정리하고 공유하기 위해 글을 남긴다.</p>\n<br>\n<br>\n<h3 id=\"1-gatsby-정적-사이트-생성기\" style=\"position:relative;\"><a href=\"#1-gatsby-%EC%A0%95%EC%A0%81-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EC%83%9D%EC%84%B1%EA%B8%B0\" aria-label=\"1 gatsby 정적 사이트 생성기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Gatsby (정적 사이트 생성기)</h3>\n<hr>\n<p>우선 간략히 위에서 설명하였지만 <code class=\"language-text\">Gatsby</code>는 이미 꾸준히 많은 유저들이 사용 중인 검증된 <strong>정적 웹 사이트 생성(Static Site Generator)</strong> 프레임워크이다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFUlEQVQoz5VS7W7DMAj0+z9k/ketonb+NuCbwHGaRtvUWbqAAZ8PYreuK5ZlATODiAy1VkPv/d9wzIJSK0KISCkdxEwMEXmDHrjGrnm3+Yz1kUDMRqaJqZTaS7HmPlIYY8Ttfoda773ZkcRRNNfJ/XU5vT1nbXWoUTtOvsi20JBynbQDJ1VyVkitoTYCyyhn6WgkqCRWqCAeM9Kcxom7+Ur8SIxn4qMFl3PGM2SEIvCF4TMjlIGbJ2yRzI9V8JXZasJep3sl83tcL3OlFBv6UCfYh2e368HGYgq3QGZny9qe5marzbrocK01KHq/zEVes5oE8sffnReZQsX1jf20/6TG6UcJz+9MfY2dC8+dzPismTEl/AY7gWQZpvTX3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby.png\"\n        title=\"gatsby.png\"\n        src=\"/static/c9526241598b3c9872c486b1fc483077/37523/gatsby.png\"\n        srcset=\"/static/c9526241598b3c9872c486b1fc483077/e9ff0/gatsby.png 180w,\n/static/c9526241598b3c9872c486b1fc483077/f21e7/gatsby.png 360w,\n/static/c9526241598b3c9872c486b1fc483077/37523/gatsby.png 720w,\n/static/c9526241598b3c9872c486b1fc483077/302a4/gatsby.png 1080w,\n/static/c9526241598b3c9872c486b1fc483077/07a9c/gatsby.png 1440w,\n/static/c9526241598b3c9872c486b1fc483077/5522e/gatsby.png 2680w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><strong>이미 많은 사용자를 보유중! 👍</strong></center><br>\n<p>아무래도 React를 기반하여 만들어진 프레임워크이다 보니 보다 익숙한 문법으로 빠르게 웹 사이트를 배포가 가능한 장점때문에 손이 많이 갈 수밖에 없다.</p>\n<p>또한, 여러 플러그인들을 제공하기 때문에 손 쉽게 추가 기능들을 구현하기가 편리하다.</p>\n<p>단점을 뽑아보자면.. 위에서 언급한 여러 플러그인들을 통한 확장성은 개발자의 손을 거쳐 만들어진다. <del>(즉, 개발자가 게으르면 기능 추가가 어렵다.)</del></p>\n<p>이번 포스팅 목적인 <strong>“게시글에 조회수 기능 구현”</strong>을 위해서 <code class=\"language-text\">Gatsby</code> 플러그인 중 <strong>gatsby-plugin-firebase</strong>를 사용하여 <code class=\"language-text\">Firebase</code>의 <strong>Realtime Database</strong> 서비스를 연동시켜보았는데, 이 과정 모두가 사용자의 손을 거쳐서 탄생할 수 밖에 없었다.</p>\n<p>하지만 그럼에도 불구하고, 손 쉬운 문법과 다양한 플러그인으로 정적 웹 사이트 생성 프레임워크 중에서는 손에 꼽힐 프레임워크라 말할 수 있다.</p>\n<br>\n<br>\n<h3 id=\"2-firebase-baas\" style=\"position:relative;\"><a href=\"#2-firebase-baas\" aria-label=\"2 firebase baas permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Firebase (BaaS)</h3>\n<hr>\n<p><code class=\"language-text\">Firebase</code>는 <strong>BaaS(Backend-as-a-Service)</strong> 플랫폼으로 개발자가 모바일 및 웹 애플리케이션을 쉽게 생성 및 실행할 수 있도록 도와주는 서비스이다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 440px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABIElEQVQoz53OPS9DYRiH8etplTYqFE1VzkJSeloHjRP1UhKTWJvYxOYLmFiln8AkNvESRywSsVlKokEjEo2RwSpiU5znFtRLbHot9/T/5Ua2W5GdsBInjOxHcPPdXpE079X6FP9OO21KnCjaiabkwDDcwxgic59gTTXgesjrrjWhN1uWXlYb79yjxKLItB+Iej3EgRDwJUeAul9z9efCYy7keZj3U16u3yhvGaLPLVdu+2KAGQx4EsAIYAMZYBLoAUaBMWAQGAbS36C8ZpXcT/G813GszyzRp6ZI0RwHgtmJhgDQD7RXxin4+DpTgQaAIaD3B7wwkcsEUrJjumCuuCfxmZtdQ1mdPqpKrk2klERf2UgxiS7Eecp3sTDbXBX4BoTZX0NglOfpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"firebase.png\"\n        title=\"firebase.png\"\n        src=\"/static/b6890ab873b50551c1183568cbfe4beb/48c0e/firebase.png\"\n        srcset=\"/static/b6890ab873b50551c1183568cbfe4beb/e9ff0/firebase.png 180w,\n/static/b6890ab873b50551c1183568cbfe4beb/f21e7/firebase.png 360w,\n/static/b6890ab873b50551c1183568cbfe4beb/48c0e/firebase.png 440w\"\n        sizes=\"(max-width: 440px) 100vw, 440px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><strong>양질의 서버리스 서비스들을 제공한다. 👍</strong></center><br>\n<p>기술 블로그에 사용된 기능은 실시간으로 데이터를 동기화하는 실시간 데이터베이스(Realtime Database)를 사용하였다.</p>\n<p>물론 RDB와 웹 서버를 구현해볼까도 생각해보았지만, 필요한 기능의 범위(조회수 노출)가 굉장히 작았으며, 기술 블로그의 MAU또한 무료로 이용가능한 사용량이었기 때문에 <code class=\"language-text\">Firebase</code>의 실시간 데이터베이스(Realtime Database) 서비스를 이용해 보자 결정내렸다.</p>\n<br>\n<br>\n<h4 id=\"2-1-firebase-realtime-database-프로젝트-생성\" style=\"position:relative;\"><a href=\"#2-1-firebase-realtime-database-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"2 1 firebase realtime database 프로젝트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. Firebase Realtime Database 프로젝트 생성</h4>\n<hr>\n<p>우선 <code class=\"language-text\">Firebase</code> 콘솔의 Realtime Database 탭을 클릭하여 데이터 베이스를 만들어주었다.</p>\n<p>다음으로 지역(Region) 설정과 보안 규칙을 설정해주었다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABMklEQVQoz5WPTU7CQBiGewBxY6IbJcYY10Yv4Dk8gQEiJuLfTpYewT2y8QyuPYIbVxrrlJ8WmP7QaWce0xYSAkRxkmee99u8M5913Oxw1OxweN/h4M5huyEKLgXlK0G5MfEv7DQEezeC3WuBdfLQZf9W5GUb54LS2Seb9S+2LgRrFXtl1qs2pYqNdfM8pN4e5FRbHrWWS73tzswetafB37QKWyqSGBVgVAhJCHoMaUZUQMp/jtX3RvS8ESM/IFZJjpp4mlWSkmqzEpboSeyuxB34xPGYKMqIJi5yGEZorTGAMWYBbYqyLFvi28ZxBEIIgiBYukZeZkyeFzy/clYykhIpJb7vo5RCJUnhGWaLpjn7GUbjDFNe32OC2GCZuSeWrTRfNp2TVGc3L29jTh9dPvopP8dDdN2EvscEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"realtime_1.png\"\n        title=\"realtime_1.png\"\n        src=\"/static/b66a288e5d04992ea6a622a093dd38b7/37523/realtime_1.png\"\n        srcset=\"/static/b66a288e5d04992ea6a622a093dd38b7/e9ff0/realtime_1.png 180w,\n/static/b66a288e5d04992ea6a622a093dd38b7/f21e7/realtime_1.png 360w,\n/static/b66a288e5d04992ea6a622a093dd38b7/37523/realtime_1.png 720w,\n/static/b66a288e5d04992ea6a622a093dd38b7/302a4/realtime_1.png 1080w,\n/static/b66a288e5d04992ea6a622a093dd38b7/07a9c/realtime_1.png 1440w,\n/static/b66a288e5d04992ea6a622a093dd38b7/eb1d2/realtime_1.png 1622w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center>선택지가 많지 않다. <del>잘 모르니 미국 선택 🥲</del></center>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB1klEQVQoz42Ry04UQRSGey/BxJ0LCeoLuNKVO1+G0bgw4ixdsHDjO7hxgSAE3sHIIETizogkDDPTXX3vqp6+TV8+09UMBpNRK/nynzp16tSfU8aD1zaP37g83HB4tOGwsi641xfcedmxMmd9MW3d3b7gfl9g3Fy70BdWX9ncfiFYfiZ48tZnte9w67lgqSdYftqqxY01cyFLLT0TY/c4ZueLZOdIsX0o+XAQsjUI2R5EbA0iNj8HbB4E7B5P2T/J2Puasn/ym7256nyGQV2ikpw0y4ECyKBOO5o2TrqYmv9Zxrk742xoMTZt4iSlmFXkRUnVwDTJkGpKPE1RcaLjSMZEKu50zuU+ywuMqm6QMiIIfIIgQEpJFEWUZUkcx0wmE0ajkVbbdgjDUNcFrV4yz+V5jpGmKb7fNUuS5Jr9ZDrF91ws00RYFrYQKCW1ARldJwrDrmFRFIzH4ysXrutqqqrCDyJGpo3tBtiur7FsD+F4uF5wRXtuOT5JmmE0TYNSSttunbYusyzTDk0n5Nv3IadDix/nFmcjW+vpUGB5EuEpLE/p0WSpopwVGH/7sfaxuf5J3TSUVUVTVxyeFXw8Srjwq87hIv612rHQVLz7lNB7HzH4mfEL5EgN4nPPMEYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"realtime_2.png\"\n        title=\"realtime_2.png\"\n        src=\"/static/0b54eed0220251c873db0d985379eebb/37523/realtime_2.png\"\n        srcset=\"/static/0b54eed0220251c873db0d985379eebb/e9ff0/realtime_2.png 180w,\n/static/0b54eed0220251c873db0d985379eebb/f21e7/realtime_2.png 360w,\n/static/0b54eed0220251c873db0d985379eebb/37523/realtime_2.png 720w,\n/static/0b54eed0220251c873db0d985379eebb/302a4/realtime_2.png 1080w,\n/static/0b54eed0220251c873db0d985379eebb/07a9c/realtime_2.png 1440w,\n/static/0b54eed0220251c873db0d985379eebb/eee07/realtime_2.png 1628w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center>우선 잠금모드로 생성 후 보안 규칙을 수정해주었다.</center>\n<br>\n<p>DB 생성이 완료되면 아래와 같이 보안 규칙을 수정해주었다.</p>\n<ul>\n<li>\n<p>수정된 보안 규칙</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\".read\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\".write\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<br>\n<br>\n<h4 id=\"2-2-firebase-프로젝트-생성\" style=\"position:relative;\"><a href=\"#2-2-firebase-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"2 2 firebase 프로젝트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. Firebase 프로젝트 생성</h4>\n<hr>\n<p>Realtime Database 생성이 완료되었다면, 프로젝트를 생성해준다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUElEQVQoz4WSu07DMBiF81g8DiNvwcLKzsrGI3DZkMrWDqjdEC20VULSxnYcO76lB9mBJr2kHY5i/bGPvvPrRFI5sFLj8zvFxyzBdJ4FkaJCpR1EZYP8vWNq/jtobTFdA5EfltIgZxI5lchyjjUVYdY+aE275tuZNFA1MHobIvIUpLSYfJXBSJkNKl3vmbkDs66pshukKcX85qoh9ENSKMQpBd+S7dL1EXppAwzHE8iH28ZQKoui1CGu392ayrACfybcgJbmZGQpDB6HY7yMZi2hJyOsQpwyzOMci4QgWRVYZgLLTILLfkJlaix+BJ4G446h0FjlHIwrcGH+pAN5UaoTkR0qZZHQGspg15AwcbYih5WxqJQD4Raz1Pzv0IFyhThjISY/Upl9wu7Xr0NrB9QOUR/RKdL9O9g01bt/VW3kcxXpM/N0z+8al3cCF9ccv/gCTtTGRLO6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"firebase_create.png\"\n        title=\"firebase_create.png\"\n        src=\"/static/0c3dc259718608db0fbaafb7bb2a865d/37523/firebase_create.png\"\n        srcset=\"/static/0c3dc259718608db0fbaafb7bb2a865d/e9ff0/firebase_create.png 180w,\n/static/0c3dc259718608db0fbaafb7bb2a865d/f21e7/firebase_create.png 360w,\n/static/0c3dc259718608db0fbaafb7bb2a865d/37523/firebase_create.png 720w,\n/static/0c3dc259718608db0fbaafb7bb2a865d/302a4/firebase_create.png 1080w,\n/static/0c3dc259718608db0fbaafb7bb2a865d/07a9c/firebase_create.png 1440w,\n/static/0c3dc259718608db0fbaafb7bb2a865d/a3c4c/firebase_create.png 2196w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center>호스팅 여부는 나중에 선택해줘도 된다.</center>\n<br>\n<p>간단하게 앱 닉네임을 작성해주면 아래와 같은 앱에 SDK를 추가하기 위한 정보를 확인해볼 수 있다.</p>\n<ul>\n<li>\n<p>SDK 설정 및 구성</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Import the functions you need from the SDKs you need</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> initializeApp <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"firebase/app\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// TODO: Add SDKs for Firebase products that you want to use</span>\n<span class=\"token comment\">// https://firebase.google.com/docs/web/setup#available-libraries</span>\n\n<span class=\"token comment\">// Your web app's Firebase configuration</span>\n<span class=\"token keyword\">const</span> firebaseConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">apiKey</span><span class=\"token operator\">:</span> <span class=\"token string\">\"XXXX-XXX_XXXX_XX\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">authDomain</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blog-xxxxx.firebaseapp.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">databaseURL</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://blog-xxxxx-default-rtdb.firebaseio.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">projectId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blog-xxxxx\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">storageBucket</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blog-xxxxx.appspot.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">messagingSenderId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"000000\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">appId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0:000000:web:xxxxxx\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Initialize Firebase</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">initializeApp</span><span class=\"token punctuation\">(</span>firebaseConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<p>여기까지 준비를 마쳤다면 이제 <code class=\"language-text\">Gatsby</code>의 <strong>gatsby-plugin-firebase</strong> 플러그인을 사용하여 <code class=\"language-text\">Firebase</code> DB 서비스를 사용해주면 된다.</p>\n<br>\n<br>\n<h3 id=\"3-gatsby-플러그인을-통한-firebase-연동\" style=\"position:relative;\"><a href=\"#3-gatsby-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%84-%ED%86%B5%ED%95%9C-firebase-%EC%97%B0%EB%8F%99\" aria-label=\"3 gatsby 플러그인을 통한 firebase 연동 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Gatsby 플러그인을 통한 Firebase 연동</h3>\n<hr>\n<p>우선 주의해야할 사항을 먼저 언급하고 시작하겠다. <del>버전 이슈때문에, 2시간 가까이 날려먹었다.</del></p>\n<blockquote>\n<p><code class=\"language-text\">Firebase</code>의 v9+ 이후부터는 모듈 방식이 개편되었다. (Firebase의 모듈 크기를 줄이고, 앱의 로딩 시간을 개선하기 위해 도입되었다 한다.)</p>\n</blockquote>\n<p>따라서, 다운로드 수가 가장 많은 <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-firebase/\" target=\"_blank\"><strong>gatsby-plugin-firebase</strong></a> 플러그인이 아닌 <a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-firebase-v9.0/\" target=\"_blank\"><strong>gatsby-plugin-firebase-v9.0</strong></a>을 설치해주어야한다.</p>\n<p>위 주의사항만 잘 체크하면 공식문서 대로 설치시 별 문제없이 동작한다.</p>\n<p>현재 나는 <code class=\"language-text\">blog-template.js</code> 파일에 아래와 같은 코드로 <code class=\"language-text\">Firebase</code> 저장소를 사용하고 있다.</p>\n<ul>\n<li>\n<p>blog-template.js</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> firebase <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-plugin-firebase-v9.0'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getDatabase<span class=\"token punctuation\">,</span> ref<span class=\"token punctuation\">,</span> set<span class=\"token punctuation\">,</span> get<span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">,</span> update <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'firebase/database'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">BlogTemplate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>viewCount<span class=\"token punctuation\">,</span> setViewCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ...(생략))</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// DB에 사용될 key값 ('/' 문자를 제거한 블로그 포스트 문서명이다.)</span>\n    <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> curPost<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\/</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Firebase 연동</span>\n    <span class=\"token keyword\">const</span> database <span class=\"token operator\">=</span> <span class=\"token function\">getDatabase</span><span class=\"token punctuation\">(</span>firebase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> postRef <span class=\"token operator\">=</span> <span class=\"token function\">ref</span><span class=\"token punctuation\">(</span>database<span class=\"token punctuation\">,</span> <span class=\"token string\">'posts/'</span> <span class=\"token operator\">+</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token function\">child</span><span class=\"token punctuation\">(</span><span class=\"token function\">ref</span><span class=\"token punctuation\">(</span>database<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">posts/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">snapshot</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>snapshot<span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> currentViews <span class=\"token operator\">=</span> snapshot<span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>views<span class=\"token punctuation\">;</span>\n\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> updatedViews <span class=\"token operator\">=</span> currentViews <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>postRef<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">views</span><span class=\"token operator\">:</span> updatedViews <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setViewCount</span><span class=\"token punctuation\">(</span>updatedViews<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setViewCount</span><span class=\"token punctuation\">(</span>currentViews<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// key 값이 존재하지 않으면 1으로 설정</span>\n            <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>postRef<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">views</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setViewCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 상태 업데이트</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ...(생략)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>siteUrl<span class=\"token punctuation\">,</span> curPost<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// ...(생략)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<p>개발 환경과 실제 운영되고 있는 블로그 환경 각각 다르게 조회수 정책을 가진 단순한 기능을 쉽고 빠르게 구현할 수 있었다.</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<hr>\n<p>조회수 노출시키기 위해 먼 길을 돌아왔다. 하지만, 이런 맛에 기술 블로그를 운영하는거라 생각한다.</p>\n<p>서버리스 서비스 중 하나인 <code class=\"language-text\">Firebase</code> <strong>찍-먹</strong> 해보며 느낀점은 간단한 토이 프로젝트들은 이런 서비스들을 잘 활용해도 충분해보였다. (아쉬운점을 꼽자면, RDB인 PostgreSQL을 사용해보고 싶었지만 비용을 지불해야 사용가능했다. 🥲)</p>\n<p>대중적인 서비스들은 앞으로 조금씩 사용해봐야겠다라는 생각이 들었다. 사내에서 기획한 서비스의 규모가 작은 경우 적재적소에 어떤 서비스를 사용해야 할 지 안목을 기르도록 다양한 경험을 이어나가보겠다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li>\n<p><a href=\"#1-gatsby-%EC%A0%95%EC%A0%81-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EC%83%9D%EC%84%B1%EA%B8%B0\">1. Gatsby (정적 사이트 생성기)</a></p>\n</li>\n<li>\n<p><a href=\"#2-firebase-baas\">2. Firebase (BaaS)</a></p>\n<ul>\n<li><a href=\"#2-1-firebase-realtime-database-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\">2-1. Firebase Realtime Database 프로젝트 생성</a></li>\n<li><a href=\"#2-2-firebase-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\">2-2. Firebase 프로젝트 생성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-gatsby-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8%EC%9D%84-%ED%86%B5%ED%95%9C-firebase-%EC%97%B0%EB%8F%99\">3. Gatsby 플러그인을 통한 Firebase 연동</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","excerpt":"✍️ Today I Learned 현재 운영중인 기술 블로그는 Github Pages에서 공식적으로 지원하는 을 사용하여 만들다가 현재는 라는 프레임워크를 사용해서 기술 블로그를 운영하고 있다. 아무래도 정적 웹이트이다 보니 한계점이 많았지만 에서 제공하는 플러그인을 통해 의 서버리스 서비스를 연동하고 조회수(View)를 노출시킨 과정을 경험을 간략히 정리하고 공유하기 위해 글을 남긴다. 1. Gatsby (정적 사이트 생성기) 우선 간략히 위에서 설명하였지만 는 이미 꾸준히 많은 유저들이 사용 중인 검증된 정적 웹 사이트 생성(Static Site Generator) 프레임워크이다.  아무래도 React를 기반하여 만들어진 프레임워크이다 보니 보다 익숙한 문법으로 빠르게 웹 사이트를 배포가 가능한 장점때문에 손이 많이 갈 수밖에 없다. 또한, 여러 플러그인들을 제공하기 때문에 손 쉽게 추가 기능들을 구현하기가 편리하다. 단점을 뽑아보자면.. 위에서 언급한 여러 플러그인들을 통한 확…","frontmatter":{"date":"June 24, 2024","title":"Gatsby 블로그 조회수 기능 만들기 (Feat. Firebase)","categories":"TIL","author":"JH8459","emoji":"📚"},"fields":{"slug":"/2024-06-24-TIL/"}},"next":{"id":"983ba8ce-0eb5-5741-8a02-638f75c8deff","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"️-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"️ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<hr>\n<p>유지보수하는 과정에서 발생하는 Dead Code들을 쉽게 파악하고자 도입했던 개발 관련 도구들을 사용해본 경험에 대해서 간략히 정리하고 공유하기 위해 글을 남긴다.</p>\n<blockquote>\n<p><strong>Dead Code</strong> 란?</p>\n<p>실행이 되지 않는 코드를 뜻한다. 불필요한 코드들은 성능에 영향을 미칠수도 있으며, 휴먼 에러를 발생시키는 방해요소이다.</p>\n</blockquote>\n<p><code class=\"language-text\">ESLint</code>의 <strong><a href=\"https://typescript-eslint.io/rules/no-unused-vars/\" target=\"_blank\">no-unused-vars</a></strong>과 <code class=\"language-text\">Knip</code> 라이브러리를 간략히 설명해보고 어떤 걸 선택했는지 간략하게 후기로 남겨보도록 하겠다.</p>\n<br>\n<br>\n<h3 id=\"1-dead-code의-발생-이유\" style=\"position:relative;\"><a href=\"#1-dead-code%EC%9D%98-%EB%B0%9C%EC%83%9D-%EC%9D%B4%EC%9C%A0\" aria-label=\"1 dead code의 발생 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Dead Code의 발생 이유</h3>\n<hr>\n<p>모두 다른 환경에서 개발하고 있기 떄문에 보편적인 이유가 될 순 없겠지만 보통 나의 경우에는 API가 더이상 사용되지 않을 때, 혹은 새로운 기획안을 반영 하고 난 뒤 기존 코드를 제거하지 않았을 때에 <strong>Dead Code</strong>가 많이 발생되었다.</p>\n<p>물론 코드를 바로 바로 정리하는 습관을 들이신 훌륭한 분들은 물음표를 지을 수 있겠지만 적어도 나는 위 이유로 가장 많이 불필요한 <strong>Dead Code</strong>를 양산시켰다.</p>\n <p align = \"center\"><del>\"이거 진짜 지워도 돼??, 잘 돌아가니, 일단 그냥 두자. 🥲\"</del></p>\n<p>이렇게 발생한 <strong>Dead Code</strong>들은 시스템을 이해 / 유지보수하기 어렵게 만들고 있으며, 미비하겠지만 성능에 악영향을 준다.</p>\n<br>\n<br>\n<h3 id=\"2-eslint\" style=\"position:relative;\"><a href=\"#2-eslint\" aria-label=\"2 eslint permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ESLint</h3>\n<hr>\n<p><code class=\"language-text\">ESLint</code>는 이미 사용중인 코드 컨벤션 검증 도구이었기에 부담없이 <strong><a href=\"https://typescript-eslint.io/rules/no-unused-vars/\" target=\"_blank\">no-unused-vars</a></strong> 옵션을 추가하여 현재 사용중인 프로젝트에 적용시켜보았다.</p>\n<br>\n<details>\n<summary>.eslintrc.js<strong> 코드 보기</strong></summary>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"@typescript-eslint/no-unused-vars\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"all\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"argsIgnorePattern\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^_\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"caughtErrors\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"all\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"caughtErrorsIgnorePattern\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^_\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"destructuredArrayIgnorePattern\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^_\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"varsIgnorePattern\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^_\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string-property property\">\"ignoreRestSiblings\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</details>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIklEQVQ4y1VTaXKzOhDkFo7zHAwICS2sZrPBK8n9j9Tz1eiBK/nR1QOUWj09Q3CqDeqyRD8M6IcRVe7Q5BmkSBFFkUeSJDRNF2RZRiKJ8FruKMoKh8N/OB6PCMPQg+vAGAmtJHKrUVgNl0lYlSKO4zeEEDS0DWSakhAJ7ssDz+8n6qaBVBJSCqTy/zMBO+DiGEUIj0fEQiBahX7dTFmaIhUJxYmArWoM5x5VU0MajbLWKBuLVAkERVFQphSMtdDGkMsd5XlOxhjiVlPvSlCSCM8b+D1HkGWapJT+WSlJgbOWKucwDAPatkXXtp439H2Prus8yrIEH0zTFMYYVHXt27bWQikFawyCwloaqxrL9zdutxuezycejwfu97uvX6/X+znPc5+nc44H5EWFENjtdtjv9/j4+EBgtabaOVymyTu6XC7e1ebsfD77mr9prbldcIsszBzHMe33e/r8/PQI2tOJxr7HNE0YhwHX6xXjOL7BggyOhJ3xgLZV4frr6+uvYJkXdKoqnFdn8zz7wyzGzGJcs3N2ua4SrdvB4n8Fm7qmsetwvd38Yc6KmQWY2fm0xqG15kXnNjemMAz/Cp6ahoY1q8sq8NsdC/EU1zZpa3UT+i3GdVDmOXXO4bUsmK9XP9Wfnx+fJfOyLOya5nmmoih40sQX+P3NsrfgxoGOYzJxDKcUnJTIhOB8fDbcEiNJku3P8Q55EFwfDoe30G6381P/B4iMgxqCL2ohAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eslint.png\"\n        title=\"eslint.png\"\n        src=\"/static/e3d944d698fa8c6e774468d5e8b0b948/37523/eslint.png\"\n        srcset=\"/static/e3d944d698fa8c6e774468d5e8b0b948/e9ff0/eslint.png 180w,\n/static/e3d944d698fa8c6e774468d5e8b0b948/f21e7/eslint.png 360w,\n/static/e3d944d698fa8c6e774468d5e8b0b948/37523/eslint.png 720w,\n/static/e3d944d698fa8c6e774468d5e8b0b948/302a4/eslint.png 1080w,\n/static/e3d944d698fa8c6e774468d5e8b0b948/c83ae/eslint.png 1180w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><strong>무려 108건의 미사용 변수 확인 🥲</strong></center><br>\n<p>적은 노력으로 이미 많은 <strong>Dead Code</strong> 검출이 가능했으나, 사용하다보니 사용하지 않는 클래스(<code class=\"language-text\">DTO</code>, <code class=\"language-text\">Interface</code> 등등)들 부터 미사용 함수들까지 검출해보고 싶다는 욕심이 더 생겼다.</p>\n<br>\n<br>\n<h3 id=\"3-knip\" style=\"position:relative;\"><a href=\"#3-knip\" aria-label=\"3 knip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Knip</h3>\n<hr>\n<p>GPT부터 여러 관련 자료들을 찾아본 결과 몇가지 <strong>Dead Code</strong> 정리 도구들을 찾아내었고 그 중 <code class=\"language-text\">Knip</code>을 선택하였다.</p>\n<blockquote>\n<ul>\n<li><a href=\"https://github.com/nadeesha/ts-prune\" target=\"_blank\"><strong>ts-prune</strong></a> (2023/12/07 지원 종료)</li>\n<li><a href=\"https://github.com/line/ts-remove-unused\" target=\"_blank\"><strong>ts-remove-unused</strong></a> (라인에서 공개한 오픈소스)</li>\n<li><a href=\"https://github.com/line/ts-remove-unused\" target=\"_blank\"><strong>knip</strong></a> (지원 중단 된 <code class=\"language-text\">ts-prune</code>에서 추천 도구로 언급)</li>\n</ul>\n</blockquote>\n<br>\n<br>\n<p>이 외에도 여러 추천 도구들이 많았지만 <code class=\"language-text\">knip</code>을 선택한 이유는 우선 <code class=\"language-text\">ts-prune</code>에서의 README.md 파일에서 얻은 신뢰성.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQY042PS0/CUBSE+///k0IU2nILVMDgwp0Jtgl93ffVtHymd+FSOckszmRmzplkrC7Y5or1Aa1NhNIa5xzDMKC1RkqFMRZjDG3XRW7WzFprXdz7vmeaJhJ33PMuNpSnVwoh2O1Lzuc30ixnneY8r9LIlS8Hiu2OxfKJLBes1hkbUXA4nhDFlofHJc55EuU8LgSs/0b5KX5hrUUphfOeQUrGceSeud1uJF3bUVUVH59XLo2NNWdIKWPoXDGE8Gv4D8lsbJqWuq75Cv7P6/cE/gAK5nwc/DEQFwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ts-prune.png\"\n        title=\"ts-prune.png\"\n        src=\"/static/8e051d19fb674c4a892aa98e09fff569/37523/ts-prune.png\"\n        srcset=\"/static/8e051d19fb674c4a892aa98e09fff569/e9ff0/ts-prune.png 180w,\n/static/8e051d19fb674c4a892aa98e09fff569/f21e7/ts-prune.png 360w,\n/static/8e051d19fb674c4a892aa98e09fff569/37523/ts-prune.png 720w,\n/static/8e051d19fb674c4a892aa98e09fff569/302a4/ts-prune.png 1080w,\n/static/8e051d19fb674c4a892aa98e09fff569/b1584/ts-prune.png 1342w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<center><del>정신을 계승하다니..😮</del></center><br><br>\n<p>그리고 NPM 라이브러리 통계(<a href=\"https://npmtrends.com/\" target=\"_blank\">npm-trends</a>)였다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOklEQVQoz5VS7W7FIAjt+z/olqx33laqKIJnEdu73l/LSAifwgFcKBes6wPPrw9wIqgaRAStNajqv3kJMWN9BOzrJyQTRJoXHEGn3qdwtf/JS84ZIQSklEBELu9kHY66a/MHd7pbV2gZSO6J3sns9HWU1vGkDD2+ofaO5sR9VuuwgZCZwaW4bybOuL0emjvcbwazaasZWBRNDTsrvlNDFsMiraHVMkdyll/d9DXW1WhQM2BjQ8jmMkkH1Rlc8kAYA3qJsELoHIF6oNcE5ADLGyRHWCvQyiCK2PYIySPn8NzJhC6M5foi9yOIAdwAyhXbTiAW7M/gx5MBzxow0N+nOSfygjEVUFEQ65RFUUTBYhCdoxyJwVXOpv224/5mL2MxXKonjwVfS69jr37t6Rs8ml9695zq03nR0/cDcNkTZ160UA4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"npm_trends.png\"\n        title=\"npm_trends.png\"\n        src=\"/static/57eda204a145e301137113a14832f1a4/37523/npm_trends.png\"\n        srcset=\"/static/57eda204a145e301137113a14832f1a4/e9ff0/npm_trends.png 180w,\n/static/57eda204a145e301137113a14832f1a4/f21e7/npm_trends.png 360w,\n/static/57eda204a145e301137113a14832f1a4/37523/npm_trends.png 720w,\n/static/57eda204a145e301137113a14832f1a4/302a4/npm_trends.png 1080w,\n/static/57eda204a145e301137113a14832f1a4/07a9c/npm_trends.png 1440w,\n/static/57eda204a145e301137113a14832f1a4/ed84e/npm_trends.png 2656w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span> <br></p>\n<p><code class=\"language-text\">ts-remove-unused</code> 는 무슨 이유인지 집계되지 않기에 자연스럽게 <code class=\"language-text\">knip</code>을 선택하였다.</p>\n<p>우선 라이브러리 설치 후 기본 설정값으로만 실행해보니, 아래와 같은 결과를 얻었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsElEQVQ4y6WT63KbMBCFeQhfsM3NNpjWgYarY4MEAkLBwcU1mb7/o5yONBP/Kp2J8+OMdqXRp92zIO1sG3vnCbb9DZZlwjRNGIaB5XL5kCT3ycYhcGHvLGxNC+v1+g5cLBafB1bEw58uwVt1QOg70HX9DnoISJMDiuwFL8F30CRG0zSIoughmAAyEqJhIZo8wCv1UDIKx3G/0HJV4dflAsZyOI6Dvu+R5zkURRlt/X8PSXEcoyxLBEGI/X6Puq5xOp3EoSzLoxfHoFKVxehbgviHgSJ9xs/6FWEYiWnzAc3nc6HZbCbEYw4bq14iJBWQOApBKY9rUXFRFGCMiWqPxyPSNEWSJPB9H6qqjrecZRlutxsopULX61VM+nw+o21bdF0n8mEYhB0c7Hme8PifwIIEOJcx3qoYLEtgWTuomibaNXQdmqaJy6vVCtPpFJPJ5G4DF/f5QzyXqvyAa0swXBiGLoP/7EBZydBUFfJShaLp2G632Gw2sCxLiOf8F+Xi+x/nfJV8z0NV5uJjdgMCL8rgHUr0v98xdBS3SyX8JIQIT7lFvG0ec/F97jFfXdfFX1EteucutHwJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"knip.png\"\n        title=\"knip.png\"\n        src=\"/static/0cc8352e12fe2fae11cc5d176eb4026d/37523/knip.png\"\n        srcset=\"/static/0cc8352e12fe2fae11cc5d176eb4026d/e9ff0/knip.png 180w,\n/static/0cc8352e12fe2fae11cc5d176eb4026d/f21e7/knip.png 360w,\n/static/0cc8352e12fe2fae11cc5d176eb4026d/37523/knip.png 720w,\n/static/0cc8352e12fe2fae11cc5d176eb4026d/764be/knip.png 806w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이 외에 기능들을 <a href=\"https://knip.dev/\" target=\"_blank\">공식 홈페이지</a>를 통해 둘러 보니 사용되지 않는 파일, Export, 타입 및 외부 패키지들을 식별하는 도구였다.</p>\n<p>이 외에도 <code class=\"language-text\">Auto-fix</code>등의 기능들도 지원하려는 모습 또한 보이던데 이건 조금 더 써봐야 할 듯하다.</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<hr>\n<p>결론은 둘다 쓰기로 마음 먹었다. 👍</p>\n<p>물론 안쓰는 코드를 바로 바로 정리하는 습관을 들이는 것이 가장 중요하지만, 이런 몸에 익어야하는 습관들을 바로 고치기는 어렵다 생각한다.</p>\n<p>위 설명한 정적 코드 분석 도구들을 활용하여 좋은 습관을 강제로(?)라도 들여볼 생각이다.</p>\n<p>우선 <code class=\"language-text\">ESLint</code>의 <code class=\"language-text\">no-unused-vars</code> 옵션을 활용해서 안쓰이는 변수들을 에러로 검출하는 컨벤션을 두어 안쓰이는 코드들은 앞으로 <strong>에러</strong>로 간주 하려한다.</p>\n<p><code class=\"language-text\">Knip</code>의 실행 결과를 JSON 포맷으로 된 결과물로 저장하여 테스트 코드로 활용할 수도 있을 것 같다.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">knip-output.json</code>를 활용한 테스트 코드 샘플</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'🏴‍☠️ Dead Code 테스트'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> knipOutput <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">'knip-output.json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>knipOutput<span class=\"token punctuation\">.</span>unused<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<br>\n<p>아직 사용해보진 않았지만, 팀원들과 논의해볼 만한 주제라 생각했다. 최근에 <strong>“좋은 코드”</strong>를 설명해주는 책들을 많이 읽었음에도 불구하고 실천해보려는 노력까지는 안 이어진 듯하다. 어렵지 않은 이런 사소한 노력부터 시작해보려 한다.</p>\n<p>앞으로도 좋은 코드를 위한 노력을 꾸준히 해봐야 겠다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li><a href=\"#1-dead-code%EC%9D%98-%EB%B0%9C%EC%83%9D-%EC%9D%B4%EC%9C%A0\">1. Dead Code의 발생 이유</a></li>\n<li><a href=\"#2-eslint\">2. ESLint</a></li>\n<li><a href=\"#3-knip\">3. Knip</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 21, 2024","title":"Dead Code 삭제하기","categories":"TIL","author":"JH8459","emoji":"📚"},"fields":{"slug":"/2024-06-21-TIL/"}},"prev":{"id":"4201f2ac-3819-5098-a9c7-6800f618491c","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAy0lEQVQ4y82SzQqCQBSFfffoAaJ9RZQPEC1s1Q+FRa1UWs8iWiiMCoqpM3MiQelvnIKEDgzD5Z75uHfu1fBjaY0ChRDV/cm5fyOt8Blap3f515bFozHNU9CIIrpEiNO4iBln4IKrKyyTGcvgnG20jRa6iw62xMRwN4C+H6Fv9jC1JoXvBlUCS4NDbOjzMVbWEuREYB5NzA4GNs4axCUVUNlyCUziBNT1EdIQnushoCGo5yOgAfKMSf9ZOmWVZJ7aKXPOv1qZ5hf7L4FXyTr+BhRyArkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"project-slack.jpg\"\n        title=\"project-slack.jpg\"\n        src=\"/static/40bf9c19c7bb4ec2231e37f215e385c6/37523/project-lottery.png\"\n        srcset=\"/static/40bf9c19c7bb4ec2231e37f215e385c6/e9ff0/project-lottery.png 180w,\n/static/40bf9c19c7bb4ec2231e37f215e385c6/f21e7/project-lottery.png 360w,\n/static/40bf9c19c7bb4ec2231e37f215e385c6/37523/project-lottery.png 720w,\n/static/40bf9c19c7bb4ec2231e37f215e385c6/302a4/project-lottery.png 1080w,\n/static/40bf9c19c7bb4ec2231e37f215e385c6/21b4d/project-lottery.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"lottery-\" style=\"position:relative;\"><a href=\"#lottery-\" aria-label=\"lottery  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LOTTERY 🍀</h2>\n<hr>\n<h3 id=\"1-개발-목적\" style=\"position:relative;\"><a href=\"#1-%EA%B0%9C%EB%B0%9C-%EB%AA%A9%EC%A0%81\" aria-label=\"1 개발 목적 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 개발 목적</h3>\n<p>개인적인 취미(?)로 매주 복권을 구매하고 있다. 로또는 QR코드로 당첨 결과를 손쉽게 제공해주지만, <del>(배아프지만)</del> 당첨 금액 정보를 찾고자 할땐 네이버나 동행복권 사이트로 접근해서 당첨 결과를 찾아봐야 했다.</p>\n<p>또한, 스피또 복권도 종종 판매점 입고율과 남은 당첨 매수를 확인하고 전략적(?)으로 접근해서 구매하고 있는데 이를 확인하고자 동행복권 사이트 접속이 점점 많아졌다.</p>\n<p>이런 행위가 비효율적이라 생각했고 이는 <strong>“구독 형태로 받아보게하면 되겠는데?”</strong>라는 생각으로 이번 프로젝트를 진행하게 되었다.</p>\n<br>\n<br>\n<h3 id=\"2-구조-설계\" style=\"position:relative;\"><a href=\"#2-%EA%B5%AC%EC%A1%B0-%EC%84%A4%EA%B3%84\" aria-label=\"2 구조 설계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 구조 설계</h3>\n<hr>\n<p>우선 간단한 서비스이고 혼자 개발하고 인프라를 구축하고 운영해야하기 때문에 손쉽게 서비스들을 한데 모아 관리할 수 있는 구조로 구현하고 싶었다.</p>\n<p>따라서, <strong>Kubernetes</strong>를 새로 학습해서 인프라를 구축하는 방향보다는 익숙한 <strong>Docker Compose</strong> 방식으로 간단하게 여러 서비스들을 정의하고 배포하고자하였다.</p>\n<p>AWS EC2를 사용해서 인스턴스에 모든 서비스들을 <strong>Docker Compose</strong> 컨테이너 환경으로 구성하고자 하였으며 구성한 서비스 아키텍쳐는 아래와 같다.</p>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/lottery/lottery_architecture.png\">\n<br>\n<p>실제 위와같은 아키텍쳐로 EC2 인스턴스에서 동작하고 있으며 세부적인 사항은 아래에서 자세히 설명하겠다.</p>\n<br>\n<br>\n<h4 id=\"2-1-리버스-프록시-서버-traefik\" style=\"position:relative;\"><a href=\"#2-1-%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C-%EC%84%9C%EB%B2%84-traefik\" aria-label=\"2 1 리버스 프록시 서버 traefik permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. 리버스 프록시 서버 (Traefik)</h4>\n<hr>\n<p>우선 컨테이너 환경으로 여러 서비스(크롤링 서버, API 서버 등등)를 개발하기로 결정하였고 이 서비스들을 묶기 위한 리버스 프록시 서버를 어떤 프레임워크를 사용할지 선택해야 했다.</p>\n<p><code class=\"language-text\">NginX</code>와 <code class=\"language-text\">Traefik</code>이 보편적인 선택지였으며 그 중 나는 <code class=\"language-text\">Traefik</code>을 선택하였다.</p>\n<ul>\n<li>\n<p>손쉬운 설정으로 <a href=\"https://doc.traefik.io/traefik/operations/dashboard/\" target=\"_blank\">대쉬보드</a> 구현 가능한 점</p>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2024-07-01-PROJECT/traefik-dashboard.png\">\n<center>실제 사용 중인 화면 예시 👍</center><br>\n</li>\n<li>\n<p>자동으로 Let’s Encrypt 인증서를 발급하고 갱신하는 기능이 내장된 점</p>\n</li>\n</ul>\n<p>이 외에도 이미 사용 중이기에 학습을 위한 시간을 할애하지 않아도 되는점 등등의 이유로 선택하게 되었다.</p>\n<br>\n<br>\n<h4 id=\"2-2-크롤링-서버-express\" style=\"position:relative;\"><a href=\"#2-2-%ED%81%AC%EB%A1%A4%EB%A7%81-%EC%84%9C%EB%B2%84-express\" aria-label=\"2 2 크롤링 서버 express permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. 크롤링 서버 (Express)</h4>\n<hr>\n<p>크롤링 서버는 어떠한 기능도 제공하지 않고 365일 24시간 내내 지정한 시간에 특정 페이지에 접근하여 데이터를 수집해야하므로 API 서버와 따로 분리해서 구성하였다.</p>\n<br>\n<ul>\n<li>여러 기능을 제공하는 API 서버가 부하를 견디지 못해서 컨테이너가 재 시작되더라도 크롤링 서버는 항시 작동해야한다.</li>\n<li>API 서버가 의도치 않은 에러로 동작하지 않아도 크롤링 서버는 항시 작동해야한다.</li>\n</ul>\n<br>\n<p>위 조건을 충족해야하므로 API 서버와 별도로 분리하여 크롤링 서버를 설계하여 사용하였다. 어떠한 기능도 제공하지 않으므로 단순하다. (아래 기능만을 착실히 수행한다.)</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Routes</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span> indexRouter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/health'</span><span class=\"token punctuation\">,</span> healthRouter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Lotto Crawler</span>\n<span class=\"token keyword\">const</span> lottoRule <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">schedule</span><span class=\"token punctuation\">.</span><span class=\"token function\">RecurrenceRule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nlottoRule<span class=\"token punctuation\">.</span>dayOfWeek <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">schedule</span><span class=\"token punctuation\">.</span><span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nlottoRule<span class=\"token punctuation\">.</span>hour <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\nlottoRule<span class=\"token punctuation\">.</span>minute <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nlottoRule<span class=\"token punctuation\">.</span>tz <span class=\"token operator\">=</span> <span class=\"token string\">'Asia/Seoul'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">lottoSchedule</span><span class=\"token punctuation\">(</span>lottoRule<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Speetto Crawler</span>\n<span class=\"token keyword\">const</span> speettoRule <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">schedule</span><span class=\"token punctuation\">.</span><span class=\"token function\">RecurrenceRule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nspeettoRule<span class=\"token punctuation\">.</span>dayOfWeek <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">schedule</span><span class=\"token punctuation\">.</span><span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nspeettoRule<span class=\"token punctuation\">.</span>hour <span class=\"token operator\">=</span> <span class=\"token number\">9</span><span class=\"token punctuation\">;</span>\nspeettoRule<span class=\"token punctuation\">.</span>minute <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nspeettoRule<span class=\"token punctuation\">.</span>tz <span class=\"token operator\">=</span> <span class=\"token string\">'Asia/Seoul'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>따라서, 단순한 구조가 필요하므로 (상대적으로) 구조가 복잡한 <code class=\"language-text\">NestJS</code>보다는 자유롭고 간단한 프레임워크인 <code class=\"language-text\">Express</code>를 선택해서 사용하였다.</p>\n<br>\n<br>\n<h4 id=\"2-3-api-서버-nestjs\" style=\"position:relative;\"><a href=\"#2-3-api-%EC%84%9C%EB%B2%84-nestjs\" aria-label=\"2 3 api 서버 nestjs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-3. API 서버 (NestJS)</h4>\n<hr>\n<p>다음으로 이번 프로젝트의 핵심 기능을 제공하는 API 서버는 익숙한 프레임워크인 <code class=\"language-text\">NestJS</code>를 사용하였다.</p>\n<p>API 서버는 <strong>LOTTERY🍀</strong>의 주요 기능을 모두 담당한다.</p>\n<br>\n<ul>\n<li><strong>LOTTERY🍀</strong> Repository의 Watch를 클릭한 유저들을 <code class=\"language-text\">Github API</code>를 사용하여 정기 메일링 서비스</li>\n<li><code class=\"language-text\">Bolt</code> 라이브러리를 사용하여 슬랙 앱을 통한 여러 기능을 제공하는 서비스</li>\n<li>슬랙 앱 사이트 문의하기 및 기타 외부 API 제공</li>\n</ul>\n<br>\n<p>정기적인 스케줄링을 통해서 메일이 발송되어야 하고 슬랙 앱을 통해 외부의 요청을 받아 정보를 전달해야 하므로 다중 인스턴스 구조로 구성되었다. (다중 인스턴스 환경에서 동시성 문제는 과거 포스팅 기술 내용을 도입하였다.)</p>\n<blockquote>\n<p>📌 <a href=\"https://blog.jh8459.com/2024-04-21-TIL/\" target=\"_blank\">다중 인스턴스 환경에서 동시성을 해결하기 위한 Redis 분산락 구현하기</p>\n</blockquote>\n</a>\n<br>\n<p>이 외에도 아직 여러 기능들이 계속 도입될 예정이므로 아직 꾸준히 개발이 진행중이기도 하다.</p>\n<ul>\n<li>“문의하기” 작성시 실시간 알림 모니터링 기능</li>\n<li>답변 또한 슬랙(개인 채널)에서 이메일 템플릿을 사용하여 답변 기능</li>\n<li>테스트 코드 작성</li>\n</ul>\n<br>\n<br>\n<h4 id=\"2-4-캐싱-서버-redis\" style=\"position:relative;\"><a href=\"#2-4-%EC%BA%90%EC%8B%B1-%EC%84%9C%EB%B2%84-redis\" aria-label=\"2 4 캐싱 서버 redis permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-4. 캐싱 서버 (Redis)</h4>\n<hr>\n<p>크롤링 서버에서 얻은 복권 당첨 정보들은 정규화된 후 DB에 저장된다.</p>\n<p>최신 회차 정보들은 자주 사용될 텐데, 매번 DB에 접근하여 가져오게 되면 불필요한 커넥션이 발생하고 DB 서버가 성능이 좋지 않으므로 (개인 NAS 서버에 올려두고 사용중이다.) 정보 전달시 낮은 속도로 제공될 수 있다.</p>\n<ul>\n<li>\n<p>이는 예전 사내 도서관 슬랙 앱 개발시 이미 겪은 이슈였다.</p>\n<blockquote>\n<p>📌 <a href=\"https://blog.jh8459.com/2023-05-01-PROJECT/\" target=\"_blank\">SLACK 챗봇 개발하기 (사내 도서관)</a></p>\n</blockquote>\n</li>\n</ul>\n<br>\n<p>정보 전달 속도를 보장하기 위해 Redis를 활용해서 빠른 속도로 공유할 수 있게 설계하였다.</p>\n<ul>\n<li>정보를 저장하는 서버(크롤링 서버)와 전달하는 서버(API 서버)가 서로 분리되어 설계되어 있으므로 Redis 캐싱 레이어를 두어 두 서버간의 물리적인 격차를 최대한 좁히고자 도입하였다.</li>\n</ul>\n<br>\n<br>\n<h4 id=\"2-5-정적-웹사이트-호스팅-서버-nginx\" style=\"position:relative;\"><a href=\"#2-5-%EC%A0%95%EC%A0%81-%EC%9B%B9%EC%82%AC%EC%9D%B4%ED%8A%B8-%ED%98%B8%EC%8A%A4%ED%8C%85-%EC%84%9C%EB%B2%84-nginx\" aria-label=\"2 5 정적 웹사이트 호스팅 서버 nginx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-5. 정적 웹사이트 호스팅 서버 (NginX)</h4>\n<hr>\n<p>제일 마지막에 구현된 서비스 컨테이너이다. (기획 단계에서는 고려대상이 아니었다. 🥲)</p>\n<p>슬랙 앱을 슬랙 앱 디렉토리에 배포하고자 앱을 출시하려하니 <a href=\"https://lottery.jh8459.com/\" target=\"_blank\">슬랙 앱 소개 웹 페이지</a>가 필수적으로 제출되어야했다.</p>\n<ul>\n<li>앱 설치 버튼을 내포해야하고, 어떤 정보들을 수집하고 관리하는지 그리고 피드백을 받을 수 있는 고객 지원 페이지 또한 내포되어야했다.</li>\n</ul>\n<p>따라서, 간단하게 정적 웹 사이트로 웹 사이트 퍼블리싱 후 배포하기 위한 목적으로 설계에 포함되었다.</p>\n<br>\n<br>\n<h3 id=\"3-개발-과정-중-어려움\" style=\"position:relative;\"><a href=\"#3-%EA%B0%9C%EB%B0%9C-%EA%B3%BC%EC%A0%95-%EC%A4%91-%EC%96%B4%EB%A0%A4%EC%9B%80\" aria-label=\"3 개발 과정 중 어려움 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 개발 과정 중 어려움</h3>\n<hr>\n<p>모든 과정이 순탄하지 않았지만 하나만 꼽자면 슬랙 앱을 배포하는 과정이 제일 난관이었다. (아직도 심사 받기위한 최소 조건을 충족하지 못했다. 😮‍💨)</p>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2024-07-01-PROJECT/slack-feedback.png\">\n  <center><strong>까다로운 슬랙 앱 출시 과정 😂</strong></center><br>\n<br>\n<p>심사 피드백 봇에서 먼저 잡혀서 정식 심사 제출은 못하였다. (내용을 요약하면 아래와 같다.)</p>\n<ul>\n<li><strong>슬랙 앱 소개 웹 페이지가 올바르지 않은 양식이다.</strong> (✅ 슬랙 앱 웹 페이지 배포 완료)</li>\n<li><strong>사용하지 않는 권한이 포함되어있다.</strong> (✅ 불필요 권한 정리 완료)</li>\n<li><strong>10개 이상의 워크스페이스에 설치되어야한다.</strong></li>\n</ul>\n<br>\n<p>다른건 스스로 해결이 가능한데, 10개 이상의 워크스페이스 설치는 타인의 도움을 받아야한다. 🥲 (프로젝트 개발이 완료되면 개발자 커뮤니티 같은 곳에 홍보를 해볼까 생각중이다.)</p>\n<br>\n<br>\n<hr>\n<p>이 외에도 <strong>“혼자”</strong> 개발하기 때문에 사용성이 편한지, 실제로 유용한지에 대한 테스트를 해보기가 너무나도 어려웠다.</p>\n<p>그래서 실제로 기능이 하나씩 구현될 때마다, 주변에 있는 팀원들에게 먼저 많이 홍보도하고 피드백 요청을 많이 드렸던거 같다.</p>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2024-07-01-PROJECT/team-feedback.png\">\n  <center><strong>「규칙 없음」</strong> 의 4A 피드백이 이럴 때 쓰는건 아닌거같은데.. 🤣</center><br>\n<p>결국 아무리 작은 사이드 프로젝트라도 <strong>“혼자”</strong>서는 해결하지 못하는 요소가 분명히 발생한다라는 점이 가장 어려운 점이 아니었나 싶다.</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<hr>\n<p>이번 프로젝트는 정말 작은 아이디어인 복권 당첨 정보를 <strong>“구독 형태로 받아보게하면 되겠는데?”</strong>로 시작하였다.</p>\n<p>실제로 처음 기획 단계에서는 로또 당첨 결과만 <strong>LOTTERY🍀</strong> Repository의 Watch를 눌러준 유저들에게 정기 구독 이메일 정보를 발송해주는 형태로 기획되었었다.</p>\n<p>개발 후 주변사람들에게만 출시해봐도 정말 여러 피드백을 받은 것 같다.</p>\n<ul>\n<li>저는 깃허브 계정이 없는데요? (비개발 직군)</li>\n<li>로또 말고 스피또도 알려주세요.</li>\n<li>앱 소개 웹 사이트 모바일 환경에서 너무 불편해요.</li>\n</ul>\n<br>\n<p>여러 건전한 피드백을 토대로 꾸준히 발전할 수 있었던거 같다.</p>\n<p>좋은 서비스를 만들기 위해 먼저 개발을 시작하고, 사용자들로부터 피드백을 받아 점진적으로 개선해 나가는 개발 방식<strong>(애자일(Agile) 개발 방법론)</strong>의 필요성을 다시 한번 몸으로 느낄 수 있었다.</p>\n<p>아직 완성된 프로젝트가 아니기에 아직 개발해 나가야할 부분들이 많이 남아있고, 정식으로 슬랙 앱 디렉토리에도 심사 받은 <strong>LOTTERY🍀</strong> 앱을 꼭 배포해보고 싶다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#lottery-\">LOTTERY 🍀</a></p>\n<ul>\n<li>\n<p><a href=\"#1-%EA%B0%9C%EB%B0%9C-%EB%AA%A9%EC%A0%81\">1. 개발 목적</a></p>\n</li>\n<li>\n<p><a href=\"#2-%EA%B5%AC%EC%A1%B0-%EC%84%A4%EA%B3%84\">2. 구조 설계</a></p>\n<ul>\n<li><a href=\"#2-1-%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C-%EC%84%9C%EB%B2%84-traefik\">2-1. 리버스 프록시 서버 (Traefik)</a></li>\n<li><a href=\"#2-2-%ED%81%AC%EB%A1%A4%EB%A7%81-%EC%84%9C%EB%B2%84-express\">2-2. 크롤링 서버 (Express)</a></li>\n<li><a href=\"#2-3-api-%EC%84%9C%EB%B2%84-nestjs\">2-3. API 서버 (NestJS)</a></li>\n<li><a href=\"#2-4-%EC%BA%90%EC%8B%B1-%EC%84%9C%EB%B2%84-redis\">2-4. 캐싱 서버 (Redis)</a></li>\n<li><a href=\"#2-5-%EC%A0%95%EC%A0%81-%EC%9B%B9%EC%82%AC%EC%9D%B4%ED%8A%B8-%ED%98%B8%EC%8A%A4%ED%8C%85-%EC%84%9C%EB%B2%84-nginx\">2-5. 정적 웹사이트 호스팅 서버 (NginX)</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-%EA%B0%9C%EB%B0%9C-%EA%B3%BC%EC%A0%95-%EC%A4%91-%EC%96%B4%EB%A0%A4%EC%9B%80\">3. 개발 과정 중 어려움</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"July 01, 2024","title":"LOTTERY 🍀 (복권 당첨 정보 구독형 서비스)","categories":"Project","author":"JH8459","emoji":"🔥"},"fields":{"slug":"/2024-07-01-PROJECT/"}},"site":{"siteMetadata":{"siteUrl":"https://blog.jh8459.com","comments":{"utterances":{"repo":"JH8459/JH8459.github.io"}}}}},"pageContext":{"slug":"/2024-06-24-TIL/","nextSlug":"/2024-06-21-TIL/","prevSlug":"/2024-07-01-PROJECT/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}