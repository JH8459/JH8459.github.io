{"componentChunkName":"component---src-templates-blog-template-js","path":"/2025-03-16-TIL/","result":{"data":{"cur":{"id":"ef14b66f-1f4b-5a84-b362-df00d9c6bfd9","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"ï¸-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"ï¸ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<p>ì‚¬ë‚´ ì¸í”„ë¼ëŠ” ë¹„êµì  ì„±ëŠ¥ì´ ì¢‹ì€ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. <del>(ìˆ˜í‰ì  í™•ì¥ì´ í˜ë“¤ì–´ì„œ.. ğŸ¥²)</del> ê·¸ë ‡ê¸°ì— ë§ì€ ìœ íœ´ ë¦¬ì†ŒìŠ¤ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ì‚¬ë‚´ ë°°í¬ ì „ëµì€ Blue/Green ë°°í¬ ì „ëµì„ ì‚¬ìš© ì¤‘ì´ë‹¤.</p>\n<p>ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì—ì„œ Docker Compose í™˜ê²½ìœ¼ë¡œ ë°°í¬ ì „ëµì„ êµ¬í˜„í•œ ê³¼ì •ì„ ê°„ëµíˆ í¬ìŠ¤íŒ…ìœ¼ë¡œ ë‚¨ê¸°ë ¤í•œë‹¤.</p>\n<br>\n<br>\n<h3 id=\"1-bluegreen-ë°°í¬ë€\" style=\"position:relative;\"><a href=\"#1-bluegreen-%EB%B0%B0%ED%8F%AC%EB%9E%80\" aria-label=\"1 bluegreen ë°°í¬ë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Blue/Green ë°°í¬ë€?</h3>\n<hr>\n<p>ê°„ë‹¨íˆ ì†Œê°œí•˜ìë©´, ì—¬ëŸ¬ ë¬´ì¤‘ë‹¨ ë°°í¬ ê¸°ë²• ì¤‘ í•˜ë‚˜ì´ë©° ë‘ ê°œì˜ ë…ë¦½ì ì¸ í™˜ê²½ <code class=\"language-text\">Blue</code>(êµ¬ë²„ì „) í™˜ê²½ê³¼ <code class=\"language-text\">Green</code>(ì‹ ë²„ì „) í™˜ê²½ì„ ê°€ì§€ê³  ì§„í–‰ë˜ëŠ” ë°°í¬ ì „ëµì´ë‹¤.</p>\n<br>\n<p><img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-03-16-TIL/blue_green.jpg\" alt=\"blue/green\"></p>\n<center>ì¶œì²˜ : <a href=\"https://www.samsungsds.com/kr/insights/1256264_4627.html\" target=\"_blank\">ë¬´ì¤‘ë‹¨ ë°°í¬ ì•„í‚¤í…ì²˜(Zero Downtime Deployment)- ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ ìš´ì˜ì˜ í•„ìˆ˜ ìš”ì†Œ\n</a></center><br>\n<p>êµ¬ë²„ì „ì´ ìš´ì˜ë˜ëŠ” ë™ì•ˆ ì‹ ë²„ì „ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ì„±í•œ í›„ ë¡œë“œë°¸ëŸ°ì„œë¥¼ í†µí•´ ì‹ ë²„ì „ìœ¼ë¡œ ëª¨ë“  íŠ¸ë˜í”½ì„ ì¼ì‹œì— ì „í™˜í•˜ëŠ” ë°°í¬ ë°©ì‹ì´ë‹¤.</p>\n<p>ì‹ ë²„ì „ì— ë¬¸ì œê°€ ìƒê¸°ëŠ” ê²½ìš° ë¡œë“œë°¸ëŸ°ì„œì˜ ë¼ìš°íŒ…ë§Œ êµ¬ë²„ì „ìœ¼ë¡œ ë³€ê²½í•´ì£¼ë©´ ì† ì‰½ê²Œ ë¡¤ë°±ì´ ê°€ëŠ¥í•œ ì¥ì  ë˜í•œ ìˆì§€ë§Œ ê·¸ ë§Œí¼ ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤. (ì‚¬ìš©í•œ ë§Œí¼ ì§€ë¶ˆí•˜ëŠ” ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ… í™˜ê²½ì´ë¼ë©´ ì±„íƒ ëª»í• ê±°ê°™ë‹¤. ğŸ¥²)</p>\n<br>\n<br>\n<h3 id=\"2-êµ¬í˜„-ê³¼ì •\" style=\"position:relative;\"><a href=\"#2-%EA%B5%AC%ED%98%84-%EA%B3%BC%EC%A0%95\" aria-label=\"2 êµ¬í˜„ ê³¼ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. êµ¬í˜„ ê³¼ì •</h3>\n<hr>\n<p>ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë“¤ì„ Docker Compose í™˜ê²½ìœ¼ë¡œ êµ¬ì„±í•˜ì—¬ Blue/Green ë°°í¬ ì „ëµì„ êµ¬í˜„í•´ë³¼ ì˜ˆì •ì´ë‹¤.</p>\n<p>ìš°ì„  <code class=\"language-text\">docker-compose.yml</code> íŒŒì¼ì„ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±í•˜ì˜€ë‹¤. (í•˜ë‚˜í•˜ë‚˜ ì²œì²œíˆ ì‚´í´ ë³¼ ì˜ˆì •ì´ë‹¤.)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">traefik</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> traefik<span class=\"token punctuation\">:</span>latest\n    <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>log.level=ERROR\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.docker=true\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.docker.watch=true\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.docker.exposedbydefault=false\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>entrypoints.web.address=<span class=\"token punctuation\">:</span><span class=\"token number\">3000</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>entrypoints.web.forwardedHeaders.insecure=true\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.file.filename=/etc/traefik/dynamic<span class=\"token punctuation\">-</span>config.yml\n      <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.file.watch=true\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3000:3000\"</span>\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> /var/run/docker.sock<span class=\"token punctuation\">:</span>/var/run/docker.sock<span class=\"token punctuation\">:</span>ro\n      <span class=\"token punctuation\">-</span> ./dynamic<span class=\"token punctuation\">-</span>config.yml<span class=\"token punctuation\">:</span>/etc/traefik/dynamic<span class=\"token punctuation\">-</span>config.yml\n    <span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> net_default\n\n  <span class=\"token key atrule\">web-server-blue</span><span class=\"token punctuation\">:</span> <span class=\"token important\">&amp;web-server-template</span>\n    <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> .\n      <span class=\"token key atrule\">dockerfile</span><span class=\"token punctuation\">:</span> Dockerfile\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./src<span class=\"token punctuation\">:</span>/myfolder/src\n    <span class=\"token key atrule\">env_file</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./.env\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n    <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> traefik.enable=true\n      <span class=\"token punctuation\">-</span> traefik.http.services.web<span class=\"token punctuation\">-</span>server<span class=\"token punctuation\">-</span>blue.loadbalancer.server.port=3000\n    <span class=\"token key atrule\">healthcheck</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'CMD'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'curl'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'http://localhost:3000/health'</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">interval</span><span class=\"token punctuation\">:</span> 30s\n      <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> 10s\n      <span class=\"token key atrule\">retries</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n      <span class=\"token key atrule\">start_period</span><span class=\"token punctuation\">:</span> 30s\n    <span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> net_default\n\n  <span class=\"token key atrule\">web-server-green</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*web-server-template</span>\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> traefik.enable=true\n      <span class=\"token punctuation\">-</span> traefik.http.services.web<span class=\"token punctuation\">-</span>server<span class=\"token punctuation\">-</span>green.loadbalancer.server.port=3000\n\n<span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">net_default</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">driver</span><span class=\"token punctuation\">:</span> bridge</code></pre></div>\n<br>\n<br>\n<h4 id=\"2-1-traefik\" style=\"position:relative;\"><a href=\"#2-1-traefik\" aria-label=\"2 1 traefik permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-1. traefik</h4>\n<hr>\n<p><code class=\"language-text\">traefik</code> ì»¨í…Œì´ë„ˆëŠ” ë¡œë“œë°¸ëŸ°ì„œë¡œì¨ êµ¬ë²„ì „ê³¼ ì‹ ë²„ì „ ì»¨í…Œì´ë„ˆì— ë¼ìš°íŒ… ì •ì±…ì„ ë‹´ë‹¹í•  ì˜ˆì •ì´ë‹¤. (ë³¼ë£¸ì„ ê¼­ ì„¤ì •í•´ì£¼ì.)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">traefik</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> traefik<span class=\"token punctuation\">:</span>latest\n  <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>log.level=ERROR\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.docker=true  <span class=\"token comment\">#Docker ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ë“¤ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ë„ë¡ ì„¤ì •</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.docker.watch=true  <span class=\"token comment\">#Dockerì—ì„œ ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ê±°ë‚˜ ë³€ê²½ë  ê²½ìš° ìë™ìœ¼ë¡œ ê°ì§€.</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.docker.exposedbydefault=false  <span class=\"token comment\">#ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  Docker ì»¨í…Œì´ë„ˆë¥¼ Traefikì´ ë¼ìš°íŒ…í•˜ì§€ ì•Šë„ë¡ ì„¤ì •. (labelsë¥¼ í†µí•´ ê°œë³„ì ìœ¼ë¡œ ë…¸ì¶œí•´ì•¼ í•¨)</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>entrypoints.web.address=<span class=\"token punctuation\">:</span><span class=\"token number\">3000</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>entrypoints.web.forwardedHeaders.insecure=true\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.file.filename=/etc/traefik/dynamic<span class=\"token punctuation\">-</span>config.yml  <span class=\"token comment\">#dynamic-config.yml íŒŒì¼ì—ì„œ ì¶”ê°€ì ì¸ ë™ì  ì„¤ì •ì„ ì½ë„ë¡ ì§€ì •.</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>providers.file.watch=true  <span class=\"token comment\">#ì„¤ì • íŒŒì¼ì´ ë³€ê²½ë˜ë©´ ìë™ìœ¼ë¡œ ê°ì§€í•˜ì—¬ ì ìš©í•˜ë„ë¡ ì„¤ì •.</span>\n  <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"3000:3000\"</span>\n  <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> /var/run/docker.sock<span class=\"token punctuation\">:</span>/var/run/docker.sock<span class=\"token punctuation\">:</span>ro\n    <span class=\"token punctuation\">-</span> ./dynamic<span class=\"token punctuation\">-</span>config.yml<span class=\"token punctuation\">:</span>/etc/traefik/dynamic<span class=\"token punctuation\">-</span>config.yml\n  <span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> net_default</code></pre></div>\n<p>ë¼ìš°íŒ…ì€ í˜„ì¬ ìš´ì˜ ì¤‘ì¸ ë²„ì „(Blue/Green)ì„ í™•ì¸í•´ì„œ ë³€í™˜ë˜ì–´ì•¼í•˜ë¯€ë¡œ ì¶”í›„ ê¸°ì¬í•  <code class=\"language-text\">dynamic-config.yml</code> íŒŒì¼ë¡œ ë™ì ìœ¼ë¡œ ì œì–´í•  ì˜ˆì •ì´ë‹¤.</p>\n<br>\n<br>\n<h4 id=\"2-2-web-server\" style=\"position:relative;\"><a href=\"#2-2-web-server\" aria-label=\"2 2 web server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-2. web-server</h4>\n<hr>\n<p><code class=\"language-text\">web-server</code> ì»¨í…Œì´ë„ˆëŠ” ì˜ˆì œì—ëŠ” <code class=\"language-text\">replicas</code>ë¥¼ 2ê°œë¡œ êµ¬ì„±í•´ ë‘ì—ˆë‹¤. ê°ê° 2ê°œì˜ ì»¨í…Œì´ë„ˆì”© Blue / Green í™˜ê²½ì´ ì¡´ì¬í•œë‹¤. (ë™ì¼í•œ í™˜ê²½ìœ¼ë¡œ êµ¬ì„±í•´ì•¼í•˜ë¯€ë¡œ Blue ì»¨í…Œì´ë„ˆë¥¼ í…œí”Œë¦¿ìœ¼ë¡œ Green ì»¨í…Œì´ë„ˆì— ì‚¬ìš©í•˜ì˜€ë‹¤.)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">web-server-blue</span><span class=\"token punctuation\">:</span> <span class=\"token important\">&amp;web-server-template</span>  <span class=\"token comment\">#&amp;web-server-templateì„ ì‚¬ìš©í•˜ì—¬ YAML ì•µì»¤(Anchor)ë¡œ ì„¤ì •ì„ ì €ì¥. â†’ web-server-greenì´ ì´ ì„¤ì •ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ë‹¤ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\">#í˜„ì¬ ë””ë ‰í† ë¦¬(.)ì—ì„œ Dockerfileì„ ì‚¬ìš©í•˜ì—¬ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•¨. (ì´ë¯¸ì§€ íŒŒì¼ì„ ì‚¬ìš©í•´ë„ ëœë‹¤.)</span>\n    <span class=\"token key atrule\">context</span><span class=\"token punctuation\">:</span> .\n    <span class=\"token key atrule\">dockerfile</span><span class=\"token punctuation\">:</span> Dockerfile\n  <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ./src<span class=\"token punctuation\">:</span>/myfolder/src\n  <span class=\"token key atrule\">env_file</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> ./.env\n  <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> always\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> traefik.enable=true  <span class=\"token comment\">#ì´ ì»¨í…Œì´ë„ˆê°€ Traefikì˜ ë¼ìš°íŒ… ëŒ€ìƒìœ¼ë¡œ í¬í•¨ë˜ë„ë¡ ì„¤ì •.</span>\n    <span class=\"token punctuation\">-</span> traefik.http.services.web<span class=\"token punctuation\">-</span>server<span class=\"token punctuation\">-</span>blue.loadbalancer.server.port=3000\n  <span class=\"token key atrule\">healthcheck</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">test</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'CMD'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'curl'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-f'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'http://localhost:3000/health'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token key atrule\">interval</span><span class=\"token punctuation\">:</span> 30s\n    <span class=\"token key atrule\">timeout</span><span class=\"token punctuation\">:</span> 10s\n    <span class=\"token key atrule\">retries</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n    <span class=\"token key atrule\">start_period</span><span class=\"token punctuation\">:</span> 30s\n  <span class=\"token key atrule\">networks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> net_default\n\n<span class=\"token key atrule\">web-server-green</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">&lt;&lt;</span><span class=\"token punctuation\">:</span> <span class=\"token important\">*web-server-template</span>  <span class=\"token comment\">#web-server-greenì€ web-server-blueì™€ ê°™ì€ ì´ë¯¸ì§€, ë³¼ë¥¨, ë„¤íŠ¸ì›Œí¬ ë“±ì„ ì‚¬ìš©.</span>\n  <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> traefik.enable=true\n    <span class=\"token punctuation\">-</span> traefik.http.services.web<span class=\"token punctuation\">-</span>server<span class=\"token punctuation\">-</span>green.loadbalancer.server.port=3000</code></pre></div>\n<p>ìœ„ ì½”ë“œëŠ” ì˜ˆì‹œ ì´ë¯€ë¡œ ê°ì í™˜ê²½ì— ì•Œë§ê²Œ ì´ë¯¸ì§€ë¥¼ ë‚´ë ¤ë°›ë˜ ë¹Œë“œë¥¼ ì§ì ‘í•˜ë˜ì§€ ìƒí™©ì— ì•Œë§ê²Œ êµ¬ì„±í•˜ë©´ ëœë‹¤.</p>\n<br>\n<br>\n<h4 id=\"2-3-ë°°í¬-ìŠ¤í¬ë¦½íŠ¸\" style=\"position:relative;\"><a href=\"#2-3-%EB%B0%B0%ED%8F%AC-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\" aria-label=\"2 3 ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-3. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸</h4>\n<hr>\n<p>ìœ„ <code class=\"language-text\">docker-compose.yml</code> íŒŒì¼ì„ <code class=\"language-text\">docker compose up --build -d</code> ëª…ë ¹ì–´ë¡œ ì‹¤í–‰í•˜ë©´ Blue / Green ì„œë¹„ìŠ¤ë§ˆë‹¤ ì»¨í…Œì´ë„ˆê°€ 2ê°œì”© ìƒì„±ëœë‹¤. ì´ëŠ” ì˜ë„í•œë°”ê°€ ì•„ë‹ˆë¯€ë¡œ bash ìŠ¤í¬ë¦½íŠ¸ë¡œ ì ì ˆíˆ ì œì–´í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ì˜€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token comment\"># í™˜ê²½ ë³€ìˆ˜ ì„¤ì •</span>\n<span class=\"token assign-left variable\">DYNAMIC_CONFIG</span><span class=\"token operator\">=</span><span class=\"token string\">\"dynamic-config.yml\"</span>\n<span class=\"token assign-left variable\">COMPOSE_FILE</span><span class=\"token operator\">=</span><span class=\"token string\">\"docker-compose.yml\"</span>\n<span class=\"token assign-left variable\">DOMAIN</span><span class=\"token operator\">=</span><span class=\"token string\">\"localhost\"</span>\n<span class=\"token assign-left variable\">SERVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"web-server\"</span>\n<span class=\"token assign-left variable\">BLUE_SERVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"web-server-blue\"</span>\n<span class=\"token assign-left variable\">GREEN_SERVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"web-server-green\"</span>\n<span class=\"token assign-left variable\">PORT</span><span class=\"token operator\">=</span><span class=\"token number\">3000</span>\n<span class=\"token assign-left variable\">REPLICAS</span><span class=\"token operator\">=</span><span class=\"token number\">2</span>\n\n<span class=\"token comment\"># 1ï¸âƒ£ dynamic-config.yml íŒŒì¼(ë™ì  ë¼ìš°íŒ… ë‹´ë‹¹)ì´ ì—†ìœ¼ë©´ ìƒì„±</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token operator\">!</span> <span class=\"token parameter variable\">-f</span> <span class=\"token string\">\"<span class=\"token variable\">$DYNAMIC_CONFIG</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"âš ï¸ <span class=\"token variable\">$DYNAMIC_CONFIG</span> íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê¸°ë³¸ê°’ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.\"</span>\n  <span class=\"token function\">cat</span> <span class=\"token operator\">></span> <span class=\"token variable\">$DYNAMIC_CONFIG</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOL\nhttp:\n  routers:\n    <span class=\"token variable\">$SERVICE</span>:\n      entryPoints:\n        - \"web\"\n      rule: \"Host(\\<span class=\"token variable\">$DOMAIN</span>\\)\"\n      service: \"<span class=\"token variable\">$BLUE_SERVICE</span>\"\n\n  services:\n    <span class=\"token variable\">$BLUE_SERVICE</span>:\n      loadBalancer:\n        servers:\n          - url: \"http://<span class=\"token variable\">$BLUE_SERVICE</span>:<span class=\"token variable\">$PORT</span>\"\n\n    <span class=\"token variable\">$GREEN_SERVICE</span>:\n      loadBalancer:\n        servers:\n          - url: \"http://<span class=\"token variable\">$GREEN_SERVICE</span>:<span class=\"token variable\">$PORT</span>\"\nEOL</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"âœ… ê¸°ë³¸ <span class=\"token variable\">$DYNAMIC_CONFIG</span> íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.\"</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># 2ï¸âƒ£ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ í™•ì¸</span>\n<span class=\"token assign-left variable\">BLUE_RUNNING</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">docker</span> <span class=\"token function\">ps</span> <span class=\"token parameter variable\">--filter</span> <span class=\"token string\">\"name=<span class=\"token variable\">$BLUE_SERVICE</span>\"</span> <span class=\"token parameter variable\">--format</span> <span class=\"token string\">\"{{.Names}}\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">GREEN_RUNNING</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">docker</span> <span class=\"token function\">ps</span> <span class=\"token parameter variable\">--filter</span> <span class=\"token string\">\"name=<span class=\"token variable\">$GREEN_SERVICE</span>\"</span> <span class=\"token parameter variable\">--format</span> <span class=\"token string\">\"{{.Names}}\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token assign-left variable\">FIRST_DEPLOY</span><span class=\"token operator\">=</span>false\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$BLUE_RUNNING</span>\"</span> <span class=\"token parameter variable\">-eq</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$GREEN_RUNNING</span>\"</span> <span class=\"token parameter variable\">-eq</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸ†• ìµœì´ˆ ë°°í¬ì…ë‹ˆë‹¤. Blue ì„œë¹„ìŠ¤ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤.\"</span>\n  <span class=\"token assign-left variable\">TARGET_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\">$BLUE_SERVICE</span>\n  <span class=\"token assign-left variable\">OLD_SERVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"\"</span>\n  <span class=\"token assign-left variable\">FIRST_DEPLOY</span><span class=\"token operator\">=</span>true\n<span class=\"token keyword\">else</span>\n  <span class=\"token comment\"># 3ï¸âƒ£ dynamic-config.ymlì—ì„œ OLD_SERVICE ê°€ì ¸ì˜¤ê¸°</span>\n  <span class=\"token assign-left variable\">OLD_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">grep</span> <span class=\"token string\">\"service:\"</span> $DYNAMIC_CONFIG <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -F<span class=\"token string\">'\"'</span> <span class=\"token string\">'{print $2}'</span><span class=\"token variable\">)</span></span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-z</span> <span class=\"token string\">\"<span class=\"token variable\">$OLD_SERVICE</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"âŒ í˜„ì¬ ë¼ìš°íŒ…ëœ ì„œë¹„ìŠ¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë°°í¬ë¥¼ ì¤‘ë‹¨í•©ë‹ˆë‹¤.\"</span>\n    <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">fi</span>\n\n  <span class=\"token comment\"># 4ï¸âƒ£ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ í™•ì¸í•˜ì—¬ OLD_SERVICEê°€ ì•„ë‹Œ ì»¨í…Œì´ë„ˆ ì°¾ê¸°</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$OLD_SERVICE</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$BLUE_SERVICE</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token assign-left variable\">TARGET_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\">$GREEN_SERVICE</span>\n  <span class=\"token keyword\">else</span>\n    <span class=\"token assign-left variable\">TARGET_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\">$BLUE_SERVICE</span>\n  <span class=\"token keyword\">fi</span>\n\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸ”„ í˜„ì¬ ë¼ìš°íŒ…ëœ ì„œë¹„ìŠ¤: <span class=\"token variable\">$OLD_SERVICE</span>\"</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸš€ ìƒˆë¡œìš´ ë°°í¬ ëŒ€ìƒ ì„œë¹„ìŠ¤: <span class=\"token variable\">$TARGET_SERVICE</span>\"</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># 5ï¸âƒ£ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ë¹Œë“œ</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸš€ Building the new version of the service: <span class=\"token variable\">$TARGET_SERVICE</span>...\"</span>\n<span class=\"token function\">docker</span> compose <span class=\"token parameter variable\">-f</span> <span class=\"token variable\">$COMPOSE_FILE</span> build <span class=\"token variable\">$TARGET_SERVICE</span>\n\n<span class=\"token comment\"># 6ï¸âƒ£ ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆ ì‹¤í–‰</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸš€ Deploying new service: <span class=\"token variable\">$TARGET_SERVICE</span> with <span class=\"token variable\">$REPLICAS</span> replicas...\"</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$FIRST_DEPLOY</span>\"</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token function\">docker</span> compose <span class=\"token parameter variable\">-f</span> <span class=\"token variable\">$COMPOSE_FILE</span> up <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--scale</span> <span class=\"token variable\">$BLUE_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\">$REPLICAS</span> <span class=\"token parameter variable\">--scale</span> <span class=\"token variable\">$GREEN_SERVICE</span><span class=\"token operator\">=</span><span class=\"token number\">0</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token function\">docker</span> compose <span class=\"token parameter variable\">-f</span> <span class=\"token variable\">$COMPOSE_FILE</span> up <span class=\"token parameter variable\">-d</span> <span class=\"token parameter variable\">--scale</span> <span class=\"token variable\">$TARGET_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\">$REPLICAS</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># 7ï¸âƒ£ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ Health Check</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸ› ï¸ Checking health status of <span class=\"token variable\">$TARGET_SERVICE</span>...\"</span>\n<span class=\"token function\">sleep</span> <span class=\"token number\">10</span>  <span class=\"token comment\"># ì•ˆì •í™” ì‹œê°„</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">..</span><span class=\"token number\">12</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span>\n  <span class=\"token assign-left variable\">HEALTHY_COUNT</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">docker</span> <span class=\"token function\">ps</span> <span class=\"token parameter variable\">--filter</span> <span class=\"token string\">\"name=<span class=\"token variable\">$TARGET_SERVICE</span>\"</span> <span class=\"token parameter variable\">--filter</span> <span class=\"token string\">\"health=healthy\"</span> <span class=\"token parameter variable\">--format</span> <span class=\"token string\">\"{{.Names}}\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span><span class=\"token variable\">)</span></span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$HEALTHY_COUNT</span>\"</span> <span class=\"token parameter variable\">-gt</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"âœ… New service <span class=\"token variable\">$TARGET_SERVICE</span> is healthy!\"</span>\n    <span class=\"token builtin class-name\">break</span>\n  <span class=\"token keyword\">fi</span>\n\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"â³ Waiting for <span class=\"token variable\">$TARGET_SERVICE</span> to be healthy... (<span class=\"token variable\">$i</span>/12)\"</span>\n  <span class=\"token function\">sleep</span> <span class=\"token number\">10</span>\n<span class=\"token keyword\">done</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$HEALTHY_COUNT</span>\"</span> <span class=\"token parameter variable\">-eq</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"âŒ New service <span class=\"token variable\">$TARGET_SERVICE</span> failed to start properly. Rolling back...\"</span>\n  <span class=\"token function\">docker</span> compose <span class=\"token parameter variable\">-f</span> <span class=\"token variable\">$COMPOSE_FILE</span> down <span class=\"token variable\">$TARGET_SERVICE</span>\n  <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># 8ï¸âƒ£ `dynamic-config.yml` ì—…ë°ì´íŠ¸ (ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¡œ ë¼ìš°íŒ… ë³€ê²½)</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸ”„ Updating dynamic-config.yml to point to <span class=\"token variable\">$TARGET_SERVICE</span>...\"</span>\n<span class=\"token function\">cat</span> <span class=\"token operator\">></span> <span class=\"token variable\">$DYNAMIC_CONFIG</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOL\nhttp:\n  routers:\n    <span class=\"token variable\">$SERVICE</span>:\n      entryPoints:\n        - \"web\"\n      rule: \"Host(\\<span class=\"token variable\"><span class=\"token variable\">`</span>$DOMAIN<span class=\"token punctuation\">\\</span><span class=\"token variable\">`</span></span>)\"\n      service: \"<span class=\"token variable\">$TARGET_SERVICE</span>\"\n\n  services:\n    <span class=\"token variable\">$BLUE_SERVICE</span>:\n      loadBalancer:\n        servers:\n          - url: \"http://<span class=\"token variable\">$BLUE_SERVICE</span>:<span class=\"token variable\">$PORT</span>\"\n\n    <span class=\"token variable\">$GREEN_SERVICE</span>:\n      loadBalancer:\n        servers:\n          - url: \"http://<span class=\"token variable\">$GREEN_SERVICE</span>:<span class=\"token variable\">$PORT</span>\"\nEOL</span>\n\n<span class=\"token comment\"># 9ï¸âƒ£ Traefikì´ ì„¤ì •ì„ ìë™ ê°ì§€í•˜ë„ë¡ íŠ¸ë¦¬ê±°</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"â™»ï¸ Triggering Traefik reload...\"</span>\n<span class=\"token function\">touch</span> <span class=\"token variable\">$DYNAMIC_CONFIG</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸ‰ Deployment complete!\"</span></code></pre></div>\n<br>\n<p>ë³€ì¸ ìš”ì¸ë“¤ì€ í™˜ê²½ ë³€ìˆ˜ë¡œ ë§Œë“¤ì–´ ë‘ì—ˆë‹¤.</p>\n<p>ì£¼ì„ìœ¼ë¡œ ìµœëŒ€í•œ ì ì–´ ë³´ì•˜ì§€ë§Œ ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´ ì•„ë˜ì˜ ìˆœì„œëŒ€ë¡œ Blue/Green ë°°í¬ê°€ ì§„í–‰ëœë‹¤.</p>\n<ol>\n<li>ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ëœ ë””ë ‰í† ë¦¬ì— <code class=\"language-text\">dynamic-config.yml</code> íŒŒì¼ì´ ì¡´ì¬í•˜ëŠ”ì§€ ê°ì§€í•˜ê³  ì—†ë‹¤ë©´ ê¸°ë³¸ ë¼ìš°íŒ… ì •ì±…(Blue í™˜ê²½ ìš°ì„  ë¼ìš°íŒ…)ì„ ë‹´ì€ íŒŒì¼ì„ ìƒì„±í•œë‹¤.</li>\n<li>í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆë¥¼ í™•ì¸ í›„ ìµœì´ˆ ë°°í¬ê°€ ì´ë¤„ì§€ëŠ” ê²½ìš°ì¸ì§€ í™•ì¸í•œë‹¤.</li>\n<li>ìµœì´ˆ ë°°í¬ê°€ ì§„í–‰ë˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´, <code class=\"language-text\">dynamic-config.yml</code> íŒŒì¼ì„ í™•ì¸í•˜ì—¬ í˜„ì¬ ë¼ìš°íŒ… ì¤‘ì¸ <code class=\"language-text\">OLD_SERVICE</code>ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</li>\n<li>ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¥¼ ë¹Œë“œí•œë‹¤. (ê²½ìš°ì— ë”°ë¼ ìƒëµ ê°€ëŠ¥)</li>\n<li>ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆ(<code class=\"language-text\">TARGET_SERVICE</code>)ë¥¼ ì‹¤í–‰í•œë‹¤.</li>\n<li>ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆì˜ Health Checkë¥¼ ê¸°ë‹¤ë¦°ë‹¤. (ì‹¤íŒ¨ì‹œ <code class=\"language-text\">TARGET_SERVICE</code> ì»¨í…Œì´ë„ˆë¥¼ ì‚­ì œ í›„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¢…ë£Œ)</li>\n<li><code class=\"language-text\">traefik</code> ë¼ìš°íŒ… ì •ì±…ì„ ì—…ë°ì´íŠ¸ í•œë‹¤. (<code class=\"language-text\">OLD_SERVICE</code> â†’ <code class=\"language-text\">TARGET_SERVICE</code>)</li>\n<li>ì„¤ì • íŒŒì¼ì˜ ë³€ê²½ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ë„ë¡ <code class=\"language-text\">dynamic-config.yml</code> íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.</li>\n</ol>\n<p>ìœ„ ìˆœì„œëŒ€ë¡œ ë™ì‘í•˜ë¯€ë¡œ ì‹ ë²„ì „(<code class=\"language-text\">TARGET_SERVICE</code>)ì´ ë°°í¬ë˜ê³  ì•ˆì •í™” ë˜ëŠ” ë™ì•ˆ êµ¬ë²„ì „(<code class=\"language-text\">OLD_SERVICE</code>)ì´ íŠ¸ë˜í”½ì„ ë°›ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¬´ì¤‘ë‹¨ ë°°í¬ê°€ ê°€ëŠ¥í•˜ë‹¤.</p>\n<br>\n<br>\n<h4 id=\"2-4-ë¼ìš°íŒ…-ì •ì±…-ë³€ê²½-ìŠ¤í¬ë¦½íŠ¸\" style=\"position:relative;\"><a href=\"#2-4-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%A0%95%EC%B1%85-%EB%B3%80%EA%B2%BD-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\" aria-label=\"2 4 ë¼ìš°íŒ… ì •ì±… ë³€ê²½ ìŠ¤í¬ë¦½íŠ¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2-4. ë¼ìš°íŒ… ì •ì±… ë³€ê²½ ìŠ¤í¬ë¦½íŠ¸</h4>\n<hr>\n<p>Blue í™˜ê²½ì´ ìƒˆë¡œ ë°°í¬ê°€ ë˜ì—ˆë‹¤ë©´, Green í™˜ê²½ì€ ë”ì´ìƒ íŠ¸ë˜í”½ì„ ë°›ì§€ ëª»í•˜ëŠ” ìœ íœ´ ì»¨í…Œì´ë„ˆë¡œ ì¡´ì¬í•˜ê³  ìˆë‹¤.</p>\n<p>ì´ ê²½ìš° Blue í™˜ê²½ì— ë¬¸ì œê°€ ìƒê²¨ Green í™˜ê²½ìœ¼ë¡œ ë˜ëŒë¦¬ê³  ì‹¶ë‹¤ë©´ ë¼ìš°íŒ… ì •ì±…ë§Œ ë³€ê²½í•´ì£¼ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/bash</span>\n<span class=\"token comment\"># í™˜ê²½ ë³€ìˆ˜ ì„¤ì •</span>\n<span class=\"token assign-left variable\">DYNAMIC_CONFIG</span><span class=\"token operator\">=</span><span class=\"token string\">\"dynamic-config.yml\"</span>\n<span class=\"token assign-left variable\">COMPOSE_FILE</span><span class=\"token operator\">=</span><span class=\"token string\">\"docker-compose.yml\"</span>\n<span class=\"token assign-left variable\">DOMAIN</span><span class=\"token operator\">=</span><span class=\"token string\">\"localhost\"</span>\n<span class=\"token assign-left variable\">SERVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"web-server\"</span>\n<span class=\"token assign-left variable\">BLUE_SERVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"web-server-blue\"</span>\n<span class=\"token assign-left variable\">GREEN_SERVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"web-server-green\"</span>\n<span class=\"token assign-left variable\">PORT</span><span class=\"token operator\">=</span><span class=\"token number\">3000</span>\n\n<span class=\"token comment\"># 1ï¸âƒ£ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ í™•ì¸</span>\n<span class=\"token assign-left variable\">BLUE_RUNNING</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">docker</span> <span class=\"token function\">ps</span> <span class=\"token parameter variable\">--filter</span> <span class=\"token string\">\"name=<span class=\"token variable\">$BLUE_SERVICE</span>\"</span> <span class=\"token parameter variable\">--format</span> <span class=\"token string\">\"{{.Names}}\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span><span class=\"token variable\">)</span></span>\n<span class=\"token assign-left variable\">GREEN_RUNNING</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">docker</span> <span class=\"token function\">ps</span> <span class=\"token parameter variable\">--filter</span> <span class=\"token string\">\"name=<span class=\"token variable\">$GREEN_SERVICE</span>\"</span> <span class=\"token parameter variable\">--format</span> <span class=\"token string\">\"{{.Names}}\"</span> <span class=\"token operator\">|</span> <span class=\"token function\">wc</span> <span class=\"token parameter variable\">-l</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token comment\"># ë‘˜ ë‹¤ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ ë¼ìš°íŒ… ì •ì±… ë³€ê²½ ê°€ëŠ¥ (ë‘˜ ì¤‘ í•˜ë‚˜ë¼ë„ êº¼ì ¸ ìˆìœ¼ë©´ ì¢…ë£Œ)</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$BLUE_RUNNING</span>\"</span> <span class=\"token parameter variable\">-eq</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$GREEN_RUNNING</span>\"</span> <span class=\"token parameter variable\">-eq</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"âŒ Blueì™€ Green ì¤‘ í•˜ë‚˜ë¼ë„ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë©´ ë¼ìš°íŒ…ì„ ë³€ê²½í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\"</span>\n  <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># 2ï¸âƒ£ í˜„ì¬ dynamic-config.ymlì—ì„œ OLD_SERVICE ê°€ì ¸ì˜¤ê¸°</span>\n<span class=\"token assign-left variable\">OLD_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">grep</span> <span class=\"token string\">\"service:\"</span> $DYNAMIC_CONFIG <span class=\"token operator\">|</span> <span class=\"token function\">awk</span> -F<span class=\"token string\">'\"'</span> <span class=\"token string\">'{print $2}'</span><span class=\"token variable\">)</span></span>\n\n<span class=\"token comment\"># OLD_SERVICEê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì˜¤ë¥˜ ì²˜ë¦¬</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token parameter variable\">-z</span> <span class=\"token string\">\"<span class=\"token variable\">$OLD_SERVICE</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"âŒ í˜„ì¬ ë¼ìš°íŒ…ëœ ì„œë¹„ìŠ¤ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë¼ìš°íŒ… ë³€ê²½ì„ ì¤‘ë‹¨í•©ë‹ˆë‹¤.\"</span>\n  <span class=\"token builtin class-name\">exit</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token comment\"># 3ï¸âƒ£ OLD_SERVICEê°€ Blueì¸ì§€ Greenì¸ì§€ í™•ì¸í•˜ê³  ë°˜ëŒ€ ì„œë¹„ìŠ¤ë¡œ ì „í™˜</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"<span class=\"token variable\">$OLD_SERVICE</span>\"</span> <span class=\"token operator\">==</span> <span class=\"token string\">\"<span class=\"token variable\">$BLUE_SERVICE</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n  <span class=\"token assign-left variable\">TARGET_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\">$GREEN_SERVICE</span>\n<span class=\"token keyword\">else</span>\n  <span class=\"token assign-left variable\">TARGET_SERVICE</span><span class=\"token operator\">=</span><span class=\"token variable\">$BLUE_SERVICE</span>\n<span class=\"token keyword\">fi</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸ”„ í˜„ì¬ ìš´ì˜ ì¤‘ì¸ ì„œë¹„ìŠ¤: <span class=\"token variable\">$OLD_SERVICE</span>\"</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸš€ ìƒˆë¡œìš´ ë¼ìš°íŒ… ëŒ€ìƒ ì„œë¹„ìŠ¤: <span class=\"token variable\">$TARGET_SERVICE</span>\"</span>\n\n<span class=\"token comment\"># 4ï¸âƒ£ `dynamic-config.yml` ì—…ë°ì´íŠ¸ (ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ë¡œ ë¼ìš°íŒ… ë³€ê²½)</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸ”„ Updating dynamic-config.yml to roll back to <span class=\"token variable\">$TARGET_SERVICE</span>...\"</span>\n<span class=\"token function\">cat</span> <span class=\"token operator\">></span> <span class=\"token variable\">$DYNAMIC_CONFIG</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOL\nhttp:\n  routers:\n    <span class=\"token variable\">$SERVICE</span>:\n      entryPoints:\n        - \"web\"\n      rule: \"Host(\\<span class=\"token variable\"><span class=\"token variable\">`</span>$DOMAIN<span class=\"token punctuation\">\\</span><span class=\"token variable\">`</span></span>)\"\n      service: \"<span class=\"token variable\">$TARGET_SERVICE</span>\"\n\n  services:\n    <span class=\"token variable\">$BLUE_SERVICE</span>:\n      loadBalancer:\n        servers:\n          - url: \"http://<span class=\"token variable\">$BLUE_SERVICE</span>:<span class=\"token variable\">$PORT</span>\"\n\n    <span class=\"token variable\">$GREEN_SERVICE</span>:\n      loadBalancer:\n        servers:\n          - url: \"http://<span class=\"token variable\">$GREEN_SERVICE</span>:<span class=\"token variable\">$PORT</span>\"\nEOL</span>\n\n<span class=\"token comment\"># 5ï¸âƒ£ Traefikì´ ì„¤ì •ì„ ìë™ ê°ì§€í•˜ë„ë¡ íŠ¸ë¦¬ê±°</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"â™»ï¸ Triggering Traefik reload...\"</span>\n<span class=\"token function\">touch</span> <span class=\"token variable\">$DYNAMIC_CONFIG</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"ğŸ‰ Rollback complete! Traffic is now routed to <span class=\"token variable\">$TARGET_SERVICE</span>.\"</span></code></pre></div>\n<p>ì´ ë˜í•œ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ì™€ ë§ˆì°¬ê°€ì§€ì˜ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ë‹¤.</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤” Understanding</h2>\n<p>ë¬´ì¤‘ë‹¨ ë°°í¬ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì—ì„œ Docker Compose í™˜ê²½ìœ¼ë¡œ êµ¬ì„±í•œ ì‚¬ë¡€ê°€ ë§ì§€ ì•Šì•„ êµ¬í˜„í•˜ëŠ”ë° ì—¬ëŸ¬ ì‹œí–‰ ì°©ì˜¤ë¥¼ ë§ì´ ê²ªì—ˆì—ˆë‹¤.</p>\n<p>ì—¬ëŸ¬ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì„ ê²ªìœ¼ë©° Blue/Green ì „ëµëŒ€ë¡œ ë¬´ì¤‘ë‹¨ ë°°í¬ë¥¼ êµ¬í˜„ ìì²´ëŠ” ì„±ê³µ(?)í•˜ì˜€ìœ¼ë‚˜ íŒŒì´í”„ë¼ì¸ì— ëª¨ë‘ ë‹´ì§„ ëª»í•˜ì˜€ë‹¤. (Github Actionì„ í†µí•´ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ë§Œ ìë™í™”ê°€ êµ¬í˜„ë˜ì–´ ìˆë‹¤.)</p>\n<p>ë¬¸ì œê°€ ìƒê¸°ëŠ” ê²½ìš° ì¸í”„ë¼ êµ¬ì¡°ë¥¼ ì˜ ëª¨ë¥´ëŠ” ì‚¬ëŒë“¤ ë˜í•œ ë¯¸ë¦¬ ì‘ì„±í•œ ë¼ìš°íŒ… ì •ì±… ë³€ê²½ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•˜ì—¬ ë°°í¬ë¥¼ ë¡¤ë°±í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•´ë³¼ ì˜ˆì •ì´ë‹¤.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li>\n<p><a href=\"#1-bluegreen-%EB%B0%B0%ED%8F%AC%EB%9E%80\">1. Blue/Green ë°°í¬ë€?</a></p>\n</li>\n<li>\n<p><a href=\"#2-%EA%B5%AC%ED%98%84-%EA%B3%BC%EC%A0%95\">2. êµ¬í˜„ ê³¼ì •</a></p>\n<ul>\n<li><a href=\"#2-1-traefik\">2-1. traefik</a></li>\n<li><a href=\"#2-2-web-server\">2-2. web-server</a></li>\n<li><a href=\"#2-3-%EB%B0%B0%ED%8F%AC-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\">2-3. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸</a></li>\n<li><a href=\"#2-4-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%A0%95%EC%B1%85-%EB%B3%80%EA%B2%BD-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8\">2-4. ë¼ìš°íŒ… ì •ì±… ë³€ê²½ ìŠ¤í¬ë¦½íŠ¸</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">ğŸ¤” Understanding</a></p>\n</li>\n</ul>\n</div>","excerpt":"âœï¸ Today I Learned ì‚¬ë‚´ ì¸í”„ë¼ëŠ” ë¹„êµì  ì„±ëŠ¥ì´ ì¢‹ì€ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤. (ìˆ˜í‰ì  í™•ì¥ì´ í˜ë“¤ì–´ì„œ.. ğŸ¥²) ê·¸ë ‡ê¸°ì— ë§ì€ ìœ íœ´ ë¦¬ì†ŒìŠ¤ë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ì‚¬ë‚´ ë°°í¬ ì „ëµì€ Blue/Green ë°°í¬ ì „ëµì„ ì‚¬ìš© ì¤‘ì´ë‹¤. ì˜¨í”„ë ˆë¯¸ìŠ¤ í™˜ê²½ì—ì„œ Docker Compose í™˜ê²½ìœ¼ë¡œ ë°°í¬ ì „ëµì„ êµ¬í˜„í•œ ê³¼ì •ì„ ê°„ëµíˆ í¬ìŠ¤íŒ…ìœ¼ë¡œ ë‚¨ê¸°ë ¤í•œë‹¤. 1. Blue/Green ë°°í¬ë€? ê°„ë‹¨íˆ ì†Œê°œí•˜ìë©´, ì—¬ëŸ¬ ë¬´ì¤‘ë‹¨ ë°°í¬ ê¸°ë²• ì¤‘ í•˜ë‚˜ì´ë©° ë‘ ê°œì˜ ë…ë¦½ì ì¸ í™˜ê²½ (êµ¬ë²„ì „) í™˜ê²½ê³¼ (ì‹ ë²„ì „) í™˜ê²½ì„ ê°€ì§€ê³  ì§„í–‰ë˜ëŠ” ë°°í¬ ì „ëµì´ë‹¤. blue/green êµ¬ë²„ì „ì´ ìš´ì˜ë˜ëŠ” ë™ì•ˆ ì‹ ë²„ì „ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ êµ¬ì„±í•œ í›„ ë¡œë“œë°¸ëŸ°ì„œë¥¼ í†µí•´ ì‹ ë²„ì „ìœ¼ë¡œ ëª¨ë“  íŠ¸ë˜í”½ì„ ì¼ì‹œì— ì „í™˜í•˜ëŠ” ë°°í¬ ë°©ì‹ì´ë‹¤. ì‹ ë²„ì „ì— ë¬¸ì œê°€ ìƒê¸°ëŠ” ê²½ìš° ë¡œë“œë°¸ëŸ°ì„œì˜ ë¼ìš°íŒ…ë§Œ êµ¬ë²„ì „ìœ¼ë¡œ ë³€ê²½í•´ì£¼ë©´ ì† ì‰½ê²Œ ë¡¤ë°±ì´ ê°€ëŠ¥í•œ ì¥ì  ë˜í•œ ìˆì§€ë§Œ ê·¸ ë§Œí¼ ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤. (ì‚¬ìš©í•œ ë§Œí¼ ì§€ë¶ˆí•˜ëŠ” ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ… í™˜ê²½ì´ë¼ë©´ ì±„íƒ ëª»í• ê±°ê°™ë‹¤. ğŸ¥²) 2.â€¦","frontmatter":{"date":"March 16, 2025","title":"Docker Composeì™€ Traefikì„ í™œìš©í•œ Blue/Green ë°°í¬ ì „ëµ","categories":"TIL","author":"JH8459","emoji":"ğŸ“š"},"fields":{"slug":"/2025-03-16-TIL/"}},"next":{"id":"cd9e92d2-ed0b-58f5-a959-792d43e0be6c","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"ï¸-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"ï¸ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<p>í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ <a href=\"https://school.programmers.co.kr/learn/courses/30/lessons/42860\" target=\"_blank\">ì¡°ì´ìŠ¤í‹±</a> ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í’€ì´ ê³¼ì • ì¤‘ ê·¸ë¦¬ë”” ì•Œê³ ë¦¬ì¦˜ì„ í’€ì´í•˜ë©° ëŠë‚€ì ì„ ê°„ë‹¨íˆ í¬ìŠ¤íŒ…ìœ¼ë¡œ ë‚¨ê¸°ë ¤í•œë‹¤.</p>\n<br>\n<br>\n<h3 id=\"1-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#1-%EB%AC%B8%EC%A0%9C\" aria-label=\"1 ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ë¬¸ì œ</h3>\n<hr>\n<p>ë¬¸ì œ ì„¤ëª…</p>\n<ul>\n<li>\n<p>ì¡°ì´ìŠ¤í‹±ìœ¼ë¡œ ì•ŒíŒŒë²³ ì´ë¦„ì„ ì™„ì„±í•˜ì„¸ìš”. ë§¨ ì²˜ìŒì—” Aë¡œë§Œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ex) ì™„ì„±í•´ì•¼ í•˜ëŠ” ì´ë¦„ì´ ì„¸ ê¸€ìë©´ AAA, ë„¤ ê¸€ìë©´ AAAA</p>\n<p>ì¡°ì´ìŠ¤í‹±ì„ ê° ë°©í–¥ìœ¼ë¡œ ì›€ì§ì´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">â–² - ë‹¤ìŒ ì•ŒíŒŒë²³\nâ–¼ - ì´ì „ ì•ŒíŒŒë²³ (Aì—ì„œ ì•„ë˜ìª½ìœ¼ë¡œ ì´ë™í•˜ë©´ Zë¡œ)\nâ—€ - ì»¤ì„œë¥¼ ì™¼ìª½ìœ¼ë¡œ ì´ë™ (ì²« ë²ˆì§¸ ìœ„ì¹˜ì—ì„œ ì™¼ìª½ìœ¼ë¡œ ì´ë™í•˜ë©´ ë§ˆì§€ë§‰ ë¬¸ìì— ì»¤ì„œ)\nâ–¶ - ì»¤ì„œë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™ (ë§ˆì§€ë§‰ ìœ„ì¹˜ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™í•˜ë©´ ì²« ë²ˆì§¸ ë¬¸ìì— ì»¤ì„œ)</code></pre></div>\n<p>ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ì˜ ë°©ë²•ìœ¼ë¡œ â€œJAZâ€ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- ì²« ë²ˆì§¸ ìœ„ì¹˜ì—ì„œ ì¡°ì´ìŠ¤í‹±ì„ ìœ„ë¡œ 9ë²ˆ ì¡°ì‘í•˜ì—¬ Jë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.\n- ì¡°ì´ìŠ¤í‹±ì„ ì™¼ìª½ìœ¼ë¡œ 1ë²ˆ ì¡°ì‘í•˜ì—¬ ì»¤ì„œë¥¼ ë§ˆì§€ë§‰ ë¬¸ì ìœ„ì¹˜ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.\n- ë§ˆì§€ë§‰ ìœ„ì¹˜ì—ì„œ ì¡°ì´ìŠ¤í‹±ì„ ì•„ë˜ë¡œ 1ë²ˆ ì¡°ì‘í•˜ì—¬ Zë¥¼ ì™„ì„±í•©ë‹ˆë‹¤. ë”°ë¼ì„œ 11ë²ˆ ì´ë™ì‹œì¼œ \"JAZ\"ë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³ , ì´ë•Œê°€ ìµœì†Œ ì´ë™ì…ë‹ˆë‹¤.</code></pre></div>\n<p>ë§Œë“¤ê³ ì í•˜ëŠ” ì´ë¦„ nameì´ ë§¤ê°œë³€ìˆ˜ë¡œ ì£¼ì–´ì§ˆ ë•Œ, ì´ë¦„ì— ëŒ€í•´ ì¡°ì´ìŠ¤í‹± ì¡°ì‘ íšŸìˆ˜ì˜ ìµœì†Ÿê°’ì„ return í•˜ë„ë¡ solution í•¨ìˆ˜ë¥¼ ë§Œë“œì„¸ìš”.</p>\n</li>\n</ul>\n<p>ì œí•œì‚¬í•­</p>\n<ul>\n<li>nameì€ ì•ŒíŒŒë²³ ëŒ€ë¬¸ìë¡œë§Œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.</li>\n<li>nameì˜ ê¸¸ì´ëŠ” 1 ì´ìƒ 20 ì´í•˜ì…ë‹ˆë‹¤.</li>\n</ul>\n<p>ì…ì¶œë ¥ ì˜ˆ</p>\n<ul>\n<li>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>return</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>â€œJEROENâ€</td>\n<td>56</td>\n</tr>\n<tr>\n<td>â€œJANâ€</td>\n<td>23</td>\n</tr>\n</tbody>\n</table>\n</li>\n</ul>\n<br>\n<br>\n<h3 id=\"2-í’€ì´\" style=\"position:relative;\"><a href=\"#2-%ED%92%80%EC%9D%B4\" aria-label=\"2 í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. í’€ì´</h3>\n<hr>\n<p>ìœ„ì•„ë˜(â–², â–¼)ë¡œ ì¡°ì´ìŠ¤í‹±ì„ ì¡°ì‘í•˜ëŠ” ê²½ìš°ì™€ ì¢Œìš°(â—€, â–¶)ë¡œ ì¡°ì‘í•˜ëŠ” ê²½ìš°ë¥¼ ê°ê° ê³„ì‚°í•´ì„œ í•©ì‚°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">solution</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> answer <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> name<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ì•ŒíŒŒë²³ ë³€ê²½ íšŸìˆ˜ ê³„ì‚° í•¨ìˆ˜</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUpDownCnt</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">char</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> upCnt <span class=\"token operator\">=</span> char<span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> downCnt <span class=\"token operator\">=</span> <span class=\"token string\">'Z'</span><span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> char<span class=\"token punctuation\">.</span><span class=\"token function\">charCodeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>upCnt<span class=\"token punctuation\">,</span> downCnt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// â–², â–¼ ì•ŒíŒŒë²³ ë³€ê²½ íšŸìˆ˜ ê³„ì‚°</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        answer <span class=\"token operator\">+=</span> <span class=\"token function\">getUpDownCnt</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ì´ë¦„ì— 'A'ê°€ ì—†ëŠ” ê²½ìš° ìš°ì¸¡(â–¶)ìœ¼ë¡œë§Œ ì´ë™í•˜ëŠ” ê¸°ë³¸ ì´ë™ íšŸìˆ˜</span>\n    <span class=\"token keyword\">let</span> minMove <span class=\"token operator\">=</span> length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// â—€, â–¶ ì»¤ì„œ ì´ë™ ìµœì†Œ ê±°ë¦¬ ê³„ì‚°</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> next <span class=\"token operator\">=</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>next <span class=\"token operator\">&lt;</span> length <span class=\"token operator\">&amp;&amp;</span> name<span class=\"token punctuation\">[</span>next<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">'A'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            next<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token comment\">// ì¢Œ, ìš° ì–´ëŠìª½ì´ ìµœì†Œê°’ ì´ë™ì¸ì§€ íŒë‹¨</span>\n        <span class=\"token keyword\">const</span> move <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> length <span class=\"token operator\">-</span> next<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>length <span class=\"token operator\">-</span> next<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        minMove <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>minMove<span class=\"token punctuation\">,</span> move<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> answer <span class=\"token operator\">+</span> minMove<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ì•„ë˜ë¡œ ì¡°ì‘í•˜ëŠ” ê²½ìš°ëŠ” ê°„ë‹¨íˆ êµ¬í˜„í•˜ì˜€ìœ¼ë‚˜ ìµœì†Œ ì»¤ì„œ ì´ë™íšŸìˆ˜ë¥¼ êµ¬í•˜ëŠ”ë° ì‹œê°„ì´ ì˜¤ë˜ê±¸ë ¸ë‹¤.</p>\n<ol>\n<li>í˜„ì¬ ìœ„ì¹˜ <code class=\"language-text\">i</code> ì´í›„ì—ì„œ â€˜Aâ€™ê°€ ì•„ë‹Œ ì²«ë²ˆì§¸ ë¬¸ìì˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ê¸° ìœ„í•œ ë³€ìˆ˜ <code class=\"language-text\">next</code> ì„ ì–¸.</li>\n<li><code class=\"language-text\">next</code>ëŠ” â€˜Aâ€™ë¥¼ ê±´ë„ˆ ë›°ë©° â€˜Aâ€™ê°€ ì•„ë‹Œ ë¬¸ìê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ì¦ê°€í•œë‹¤.</li>\n<li>ë§ˆì§€ë§‰ìœ¼ë¡œ ë‘ê°€ì§€ ì´ë™ ë°©ì‹ì„ ë¹„êµí•´ì•¼í•œë‹¤. (ì˜¤ë¥¸ìª½ í›„ ì™¼ìª½, ì™¼ìª½ í›„ ì˜¤ë¥¸ìª½)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">name <span class=\"token operator\">=</span> <span class=\"token string\">\"JAZAAAZ\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>ìœ„ ê²½ìš°ì—” ì²˜ìŒ ì»¤ì„œ ìœ„ì¹˜ì—ì„œ ìš°ë¡œ 2ë²ˆ (â–¶, â–¶) ì´í›„ ì¢Œë¡œ 3ë²ˆ (â—€, â—€, â—€) ì›€ì§ì—¬ì„œ ë§ˆì§€ë§‰ Zë¡œ ë„ì°©í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ê°€ ê°€ì¥ ë¹ ë¥´ë‹¤. (ì´ ë°˜ë¡€ê°€ ìˆë‹¤ëŠ”ê±¸ ìƒê°ì„ ëª»í–ˆë‹¤.)</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¤” Understanding</h2>\n<p>ë‹¨ìˆœí•´ë³´ì˜€ëŠ”ë° ê½¤ë‚˜ ì• ë¥¼ ë¨¹ì—ˆë‹¤. (ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ëŠ” ë°˜ë¡€ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šì•„ë„ ëª¨ë‘ í†µê³¼í–ˆê¸° ë•Œë¬¸ì—..ğŸ¥²)</p>\n<p>ë°˜ë¡€ë¥¼ ì°¾ì€ ë’¤ì—ì•¼ í’€ì´ê°€ ê°€ëŠ¥í–ˆë‹¤.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">âœï¸ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li><a href=\"#1-%EB%AC%B8%EC%A0%9C\">1. ë¬¸ì œ</a></li>\n<li><a href=\"#2-%ED%92%80%EC%9D%B4\">2. í’€ì´</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">ğŸ¤” Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"March 13, 2025","title":"í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ - ì¡°ì´ìŠ¤í‹± (JS)","categories":"TIL","author":"JH8459","emoji":"ğŸ“š"},"fields":{"slug":"/2025-03-13-TIL/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://blog.jh8459.com","comments":{"utterances":{"repo":"JH8459/JH8459.github.io"}}}}},"pageContext":{"slug":"/2025-03-16-TIL/","nextSlug":"/2025-03-13-TIL/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}