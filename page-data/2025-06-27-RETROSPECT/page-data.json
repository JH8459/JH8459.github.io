{"componentChunkName":"component---src-templates-blog-template-js","path":"/2025-06-27-RETROSPECT/","result":{"data":{"cur":{"id":"90e78069-3c60-5f51-88c9-9222da448289","html":"<p><img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-06-27-RETROSPECT/certification.png\" alt=\"certification\"></p>\n<br>\n<h2 id=\"sqld-취득-후기\" style=\"position:relative;\"><a href=\"#sqld-%EC%B7%A8%EB%93%9D-%ED%9B%84%EA%B8%B0\" aria-label=\"sqld 취득 후기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQLD 취득 후기</h2>\n<h3 id=\"1-취득-계기\" style=\"position:relative;\"><a href=\"#1-%EC%B7%A8%EB%93%9D-%EA%B3%84%EA%B8%B0\" aria-label=\"1 취득 계기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 취득 계기</h3>\n<hr>\n<p>생각해보면 개발을 하면서 수시로 SQL을 접했지만 정작 SQL을 제대로 학습해본 적은 없었다. 🤔</p>\n<p>백엔드 개발자로써 주로 ORM을 사용하는 환경에 익숙하다 보니 실제 쿼리를 작성할 일도 드물었고, DBMS에서 데이터를 조회하기 위해 쿼리문이 필요할 때도 AI에 의존해서 해결하는 등 어깨넘어(?)로 SQL에 익숙해져있을 뿐이지 정식으로 공부해본적은 없었다.</p>\n<p>SQL을 깊게까진 아니어도 “기본기라도 잡아봐야겠다.” 라는 생각이 들었고,  마침 <strong>SQLD</strong>라는 국가공인 자격증이 있다는 걸 알게 되었다.</p>\n<p>이왕 공부하는 김에 자격증 취득이라는 명확한 목표를 세우면 동기 부여도 되겠다 싶어 도전하게 되었다.</p>\n<br>\n<br>\n<h3 id=\"2-취득-과정\" style=\"position:relative;\"><a href=\"#2-%EC%B7%A8%EB%93%9D-%EA%B3%BC%EC%A0%95\" aria-label=\"2 취득 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 취득 과정</h3>\n<hr>\n<p>사실 이 자격증은 이른바 <strong>“노랭이”</strong>라고 불리는 문제집을 얼마나 반복해서 풀어야 하는지에 달렸다. <strong>(2025년 SQLD 57회 기준)</strong></p>\n<br>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-06-27-RETROSPECT/book.jpg\">\n<center>SQL 자격검정 실전문제 문제집을 최소 2번 이상은 반복 풀이하자 ✌️</center>\n<br><br>\n<p>나는 자격증 취득을 위해 <strong>총 3회독</strong>을 했고 하루 평균 1~2시간씩 총 공부 기간은 약 <strong>2주 정도</strong>였다.</p>\n<blockquote>\n<p>참고로 나는 보편적인 SQL은 이미 사용할 줄 알고 어느정도 기초 지식은 있다 생각한다.</p>\n</blockquote>\n<br>\n<p>2회독까진 문제 유형을 파악하려 노력했고 전반적인 자격 시험에 대한 구조를 익히는 데 집중했다. 특히, 처음 접하는 용어나 생소한 개념들은 체크해둔 뒤 따로 찾아봤다.</p>\n<blockquote>\n<p>정규화나 조인, 뷰 같은 보편적인 개념들은 이미 실무를 하며 몇번 사용한 경험이 있었기에 과감히 개념 학습은 하지 않고 문제 풀이를 통해서 감을 잡아갔다. (기초 지식이 없다면 개념 학습을 위해 반드시 시간을 할애 해야한다.)</p>\n</blockquote>\n<br>\n<p>마지막 3회독땐 오답 중심으로 복습을 했다. 틀린 문제와 헷갈린 개념 위주로 다시 풀되, 반복 풀이로도 잘 이해가 안가는 개념들은 배제했다. <del>(60점만 넘기자..😂)</del></p>\n<blockquote>\n<p>주의할 점으로 과락<strong>(과목별 정답률 40% 이상)</strong>이 있기 때문에 너무 많은 문제 유형을 배제하는건 옳지 않다.</p>\n</blockquote>\n<br>\n<br>\n<h3 id=\"3-취득-후기\" style=\"position:relative;\"><a href=\"#3-%EC%B7%A8%EB%93%9D-%ED%9B%84%EA%B8%B0\" aria-label=\"3 취득 후기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 취득 후기</h3>\n<hr>\n<p>합격 기준은 60점인데, 다행히도 68점으로 합격을하였다. 😀</p>\n<br>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-06-27-RETROSPECT/score.png\">\n<center>가채점 결과는 최종 결과 발표 1주일 전 선 공개된다.</center>\n<br><br>\n<p>생각보다 시험장 입실 후 대기시간이 길기 때문에 오답노트는 필히 챙겨가자. 또한, 신분증과 <del>수험표</del> 또한 반드시 챙겨가자. (수험번호는 감독관님께 문의하면 알려주신다.)</p>\n<p>시험은 모두 오프라인으로 이뤄기에 OMR카드 작성을 직접해야한다. 따라서 마킹 실수를 고려하여 시간 분배를 잘 해야한다. 너무 오랫만에 컴퓨터 싸인펜을 만져봐서 그런지 마킹을 실수했다.</p>\n<p>다른 회차 후기들은 개정판 노랭이 속 문제와 단어까지 똑같이 출제되었다는 후기가 많았는데, 내가 응시한 57회에서는 처음 보는 유형의 문제도 나와서 오히려 당황했다. (갈수록 새로운 유형의 문제들이 출제되는게 아닐까 싶다.)</p>\n<blockquote>\n<p><code class=\"language-text\">WHERE</code> 절에서 사용할 정규표현식 관련한 문제로 기억하는데, 노랭이 3회독을 하면서 전혀 본 적 없는 유형이었다.</p>\n</blockquote>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<p>25년 상반기에 자격증 취득을 2개를 계획했는데 다행히 마침표를 잘 찍은거 같다.</p>\n<p>SQLD는 난이도가 크게 어렵지 않은 자격증이라 생각되기에 시간적 여유만 있다면 그 누구라도 취득할 수 있다 생각한다. 이 글이 시험을 준비하시는 분들께 조금이라도 도움이 되시길 빌며, 모두 합격을 기원한다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#sqld-%EC%B7%A8%EB%93%9D-%ED%9B%84%EA%B8%B0\">SQLD 취득 후기</a></p>\n<ul>\n<li><a href=\"#1-%EC%B7%A8%EB%93%9D-%EA%B3%84%EA%B8%B0\">1. 취득 계기</a></li>\n<li><a href=\"#2-%EC%B7%A8%EB%93%9D-%EA%B3%BC%EC%A0%95\">2. 취득 과정</a></li>\n<li><a href=\"#3-%EC%B7%A8%EB%93%9D-%ED%9B%84%EA%B8%B0\">3. 취득 후기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","excerpt":"certification SQLD 취득 후기 1. 취득 계기 생각해보면 개발을 하면서 수시로 SQL을 접했지만 정작 SQL을 제대로 학습해본 적은 없었다. 🤔 백엔드 개발자로써 주로 ORM을 사용하는 환경에 익숙하다 보니 실제 쿼리를 작성할 일도 드물었고, DBMS에서 데이터를 조회하기 위해 쿼리문이 필요할 때도 AI에 의존해서 해결하는 등 어깨넘어(?)로 SQL에 익숙해져있을 뿐이지 정식으로 공부해본적은 없었다. SQL을 깊게까진 아니어도 “기본기라도 잡아봐야겠다.” 라는 생각이 들었고,  마침 SQLD라는 국가공인 자격증이 있다는 걸 알게 되었다. 이왕 공부하는 김에 자격증 취득이라는 명확한 목표를 세우면 동기 부여도 되겠다 싶어 도전하게 되었다. 2. 취득 과정 사실 이 자격증은 이른바 “노랭이”라고 불리는 문제집을 얼마나 반복해서 풀어야 하는지에 달렸다. (2025년 SQLD 57회 기준) 나는 자격증 취득을 위해 총 3회독을 했고 하루 평균 1~2시간씩 총 공부 기간은 약…","frontmatter":{"date":"June 27, 2025","title":"SQLD 취득 후기","categories":"Retrospect","author":"JH8459","emoji":"🤔"},"fields":{"slug":"/2025-06-27-RETROSPECT/"}},"next":{"id":"098ec7c0-56dd-5c16-b3bf-0ff4843f886b","html":"<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-05-20-TIL/thumbnail.png\">\n<br>\n<h2 id=\"통합-모니터링-환경-구축기\" style=\"position:relative;\"><a href=\"#%ED%86%B5%ED%95%A9-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95%EA%B8%B0\" aria-label=\"통합 모니터링 환경 구축기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>통합 모니터링 환경 구축기</h2>\n<p>이전 포스팅 중 AWS EC2에서 개인 서버로 마이그레이션을 진행한 과정을 소개한적이 있다.</p>\n<blockquote>\n<p><a href=\"https://blog.jh8459.com/2025-03-31-PROJECT/\">📌 EC2에서 NAS로, 개인 서버 CI/CD 자동화</a>에서는 EC2 환경에서 Synology NAS로 이전하며 개인 서버에 어플리케이션을 마이그레이션한 경험을 작성했다.</p>\n</blockquote>\n<br/>\n<p>하지만 마이그레이션 이후 AWS에서 기본으로 제공되던 CloudWatch와 같은 모니터링 도구들이 사라지면서 시스템이 정상적으로 동작하고 있는지, 리소스는 충분한지, 예기치 못한 에러가 발생하고 있진 않은지를 실시간으로 파악할 수 없게되었다.</p>\n<p>단순히 “배포되었다”는 사실만으로는 서비스의 안정성을 보장할 수 없다는 것을 다시금 실감했고 직접 모니터링 시스템을 구축해야 한다는 필요성이 명확해졌다.</p>\n<p>이번 포스팅에서는 <strong>Grafana + Prometheus + Loki</strong> 스택을 기반으로 여러 서버가 존재하는 사내 환경에서는 어떻게 모니터링 시스템을 구성했는지, 반대로 단일 서버에 여러 네트워크가 존재하는 NAS 환경에서는 어떤 방식으로 적용했는지 그리고 각 환경에서 사용된 에이전트들의 구성 방식과 차이점은 무엇이었는지를 기록으로 남겨보려 한다.</p>\n<br>\n<br>\n<h3 id=\"1-여러대의-서버-통합-모니터링\" style=\"position:relative;\"><a href=\"#1-%EC%97%AC%EB%9F%AC%EB%8C%80%EC%9D%98-%EC%84%9C%EB%B2%84-%ED%86%B5%ED%95%A9-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81\" aria-label=\"1 여러대의 서버 통합 모니터링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 여러대의 서버 통합 모니터링</h3>\n<hr>\n<p>내가 속한 조직은 인프라를 온프레미스 기반으로 운영하고 있었고 여러 대의 Linux 서버에 다양한 서비스가 분산되어 실행되고 있었다. 하지만 분산된 서비스의 수가 많아질수록 서버마다 개별적으로 리소스나 로그 상태를 확인하는 방식에는 한계가 분명했다.</p>\n<ul>\n<li>어떤 서버의 리소스가 과부하인지 직관적으로 파악하기 어렵다.</li>\n<li>특정 시간대에 발생한 장애나 예외 로그를 서버별로 일일이 확인해야 한다.</li>\n<li>모니터링 방식이 서버 수에 비례해 관리 비용도 함께 늘어난다.</li>\n</ul>\n<br>\n<p>이 문제를 해결하기 위해 각 Linux 서버에 다음과 같은 <strong>Agent</strong>를 설치하고 중앙에서 수집하는 방식을 채택했다.</p>\n<ul>\n<li><code class=\"language-text\">node_exporter</code>: 시스템의 CPU, Memory, Disk 등 자원 정보를 수집</li>\n<li><code class=\"language-text\">cadvisor</code>: Docker 기반 컨테이너의 상태를 메트릭 단위로 수집</li>\n<li><code class=\"language-text\">mysql_exporter</code>: 데이터베이스 연결 수, 쿼리 처리량 등의 성능 정보 수집</li>\n<li><code class=\"language-text\">promtail</code>: 컨테이너 내부 로그를 Loki에 전송</li>\n</ul>\n<br>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-05-20-TIL/idc.jpg\">\n<center>IDC에 Linux 서버가 추가되더라도 손쉽게 확장가능하다. 👍</center>\n<br><br>\n<p>각 서버는 Grafana + Prometheus + Loki를 실행하고 있는 서버와 동일한 네트워크(Private Networ)로 구성되어 있으므로 결과적으로 모든 서버의 상태와 중요 서비스들의 로그와 <strong>메트릭(metric)</strong>* 들을 하나의 Grafana 대시보드에서 확인할 수 있는 통합 모니터링 환경을 완성할 수 있었다.</p>\n<br>\n<blockquote>\n<p>📊 메트릭이란?</p>\n<p>메트릭(metric)은 시스템이나 애플리케이션의 상태를 숫자 형태로 표현한 시간열 데이터(time-series data)를 의미한다.\n예를 들어 CPU 사용률, 메모리 사용량, 네트워크 트래픽처럼 시간에 따라 변화하는 값들을 주기적으로 수집한 것이 메트릭에 포함된다.</p>\n</blockquote>\n<br>\n<br>\n<h3 id=\"2-단일-서버-모니터링\" style=\"position:relative;\"><a href=\"#2-%EB%8B%A8%EC%9D%BC-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81\" aria-label=\"2 단일 서버 모니터링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 단일 서버 모니터링</h3>\n<hr>\n<p>반면 개인 프로젝트들은 NAS 한 대 위에 여러 개의 Docker 기반 프로젝트를 올려 운영하기 때문에 컨테이너 간 네트워크 구성과 모니터링 방식에 대해 많은 고민이 필요했다.</p>\n<p>특히, 하나의 서버 안에서 모든 컨테이너의 리소스와 로그를 통합 대시보드로 집계하려면 <strong>Agent</strong>마다 다른 수집 방식을 먼저 이해해야 했다.</p>\n<p>예를 들어 <code class=\"language-text\">mysqld-exporter</code>는 DB 내부에 직접 TCP 연결을 시도하는 방식으로 동작한다. 이 구조에서는 Agent와 DB 컨테이너가 동일한 Docker 네트워크에 존재하지 않으면 정상적인 수집이 불가능하다.</p>\n<blockquote>\n<p>이로 인해 해당 Agent는 <code class=\"language-text\">monitoring_network</code>와 <code class=\"language-text\">lottery_network</code> 두 네트워크에 모두 연결해야만 정상적으로 작동했다.</p>\n</blockquote>\n<br>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-05-20-TIL/nas.jpg\">\n<center><strong>mysql-exporter</strong>는 두 네트워크에 모두 편입되어야한다.</center>\n<br><br>\n<p>반면, <code class=\"language-text\">cadvisor</code>나 <code class=\"language-text\">promtail</code>은 컨테이너 내부 접속 없이도 데이터를 수집할 수 있다. 이들은 네트워크 연결이 아니라 NAS 자체의 파일 시스템과 Docker 소켓을 마운트하는 방식으로 동작한다. 즉, 컨테이너의 리소스 사용량이나 로그를 직접 읽어오기만 하면 되기 때문에 별도의 네트워크 설정 없이도 모든 컨테이너를 관측할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># volumes을 마운트하여 모든 컨테이너의 리소스와 로그를 수집</span>\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> /<span class=\"token punctuation\">:</span>/rootfs<span class=\"token punctuation\">:</span>ro\n  <span class=\"token punctuation\">-</span> /var/run/docker.sock<span class=\"token punctuation\">:</span>/var/run/docker.sock<span class=\"token punctuation\">:</span>ro\n  <span class=\"token punctuation\">-</span> /var/lib/docker/<span class=\"token punctuation\">:</span>/var/lib/docker<span class=\"token punctuation\">:</span>ro</code></pre></div>\n<br>\n<p>이처럼 Agent마다 수집 방식이 다르기 때문에 단일 서버라고 해서 무조건 단순하게 구성할 수 있는 건 아니었다. 네트워크 기반 수집이 필요한 Agent는 네트워크 설계가 필요하고, 호스트 기반 수집이 가능한 Agent는 적절한 볼륨 마운트가 필요하다.</p>\n<p>이러한 구조적 이해를 바탕으로, NAS 환경에서도 Grafana 대시보드 하나로 모든 컨테이너 상태를 모니터링할 수 있는 환경을 완성할 수 있었다.</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<p>개인 프로젝트에 사용한 모니터링 도구들의 자세한 코드 구성이나 <code class=\"language-text\">docker-compose.yml</code> 파일은 <a href=\"https://github.com/JH8459/MONITORING-STACK\" target=\"_blank\">Github 링크</a>로 대체하겠다.</p>\n<p>이번 포스팅에서는 보유한 자원(Linux 서버가 여러대인지 혹은 단일 서버 구성인지)에 따라 어떻게 모니터링 시스템을 구성해야하는지에 대해 고민한 흔적을 공유해보고자 포스팅을 남긴다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%ED%86%B5%ED%95%A9-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%B6%95%EA%B8%B0\">통합 모니터링 환경 구축기</a></p>\n<ul>\n<li><a href=\"#1-%EC%97%AC%EB%9F%AC%EB%8C%80%EC%9D%98-%EC%84%9C%EB%B2%84-%ED%86%B5%ED%95%A9-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81\">1. 여러대의 서버 통합 모니터링</a></li>\n<li><a href=\"#2-%EB%8B%A8%EC%9D%BC-%EC%84%9C%EB%B2%84-%EB%AA%A8%EB%8B%88%ED%84%B0%EB%A7%81\">2. 단일 서버 모니터링</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 20, 2025","title":"Grafana + Prometheus + Loki 환경에서 Agents는 어떻게 설계해야 할까?","categories":"TIL","author":"JH8459","emoji":"📚"},"fields":{"slug":"/2025-05-20-TIL/"}},"prev":{"id":"1d68a502-6f62-5942-b2ed-308e5be2da40","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABUBAQEAAAAAAAAAAAAAAAAAAAAF/9oADAMBAAIQAxAAAAHSaSawD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIU/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAADAAAAAAAAAAAAAAAAAAAAIDH/2gAIAQEABj8CIv8A/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERIDH/2gAIAQEAAT8hGb2Ff//aAAwDAQACAAMAAAAQHD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAgQVH/2gAIAQEAAT8QjVhju1//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"github-blog.png\"\n        title=\"github-blog.png\"\n        src=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg\"\n        srcset=\"/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/4ec73/TIL.jpg 180w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/158ba/TIL.jpg 360w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/80e3c/TIL.jpg 720w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/47311/TIL.jpg 1080w,\n/static/7c4bbfe7d1a9d6bc02891c94bfe039dc/ac614/TIL.jpg 1272w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"️-today-i-learned\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-today-i-learned\" aria-label=\"️ today i learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</h2>\n<p>현재 개인 프로젝트 운영 목적으로 사용 중인 NAS에서 배포한 도메인으로 접속하려는데, 맥북에서는 잘 열리던 사이트가 윈도우 노트북에선 아무리 해도 열리지 않았다.</p>\n<p>같은 와이파이를 쓰는 맥북에서는도메인이 잘 열리는데, 윈도우 노트북에서는 접속이 전혀 되지 않았다. (심지어 <code class=\"language-text\">nslookup</code>으로 DNS 변환 과정을 수동으로 테스트해봐도 전혀 문제가 없었다.)</p>\n<p>결론적으로, 도메인 접속 문제의 원인은 <strong><u>DNS 해석 결과가 내부망에 적절하지 않게 작동했기 때문</u></strong>이다. 내부에 있는 NAS를 공인 IP로 접근하려다 보니, NAT Loopback 미지원 환경(특히 윈도우)에서는 접속이 실패할 수밖에 없었다.</p>\n<p>이런 상황이 발생하는 이유와 해결 과정을 간단히 기록으로 남기고자 이번 포스팅을 남긴다.</p>\n<br>\n<br>\n<h3 id=\"1-문제가-발생한-이유\" style=\"position:relative;\"><a href=\"#1-%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\" aria-label=\"1 문제가 발생한 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 문제가 발생한 이유</h3>\n<hr>\n<p>두 기기 모두 동일한 공유기를 사용하고 있고, IP 대역도 똑같은 내부망에 있는데 왜 한쪽만 접속이 안 되었을까?</p>\n<p>도메인 접속 뿐만아니라 <code class=\"language-text\">curl</code>, <code class=\"language-text\">Test-NetConnection</code> 모두 실패했다.</p>\n<p>처음엔 DNS 설정이 바뀌었는지 의심했다. 따라서 <code class=\"language-text\">nslookup</code> 명령어로 접근이 안되고 있는 도메인을 확인해보니 아래와 같이 큰 문제없는 공인 IP 주소(116.xx.xx.xx)가 반환되었다.</p>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-06-30-TIL/nslookup.png\">\n<center>즉, 도메인 이름은 잘 해석되고 있다. 🤔</center><br><br>\n<p>결국 원인은 DNS가 아니라 <strong>해석된 IP가 “공인 IP”였다</strong>는 점에 있었다.</p>\n<p>즉, 내 도메인이 운영되는 서버(NAS)가 내부망에 있지만, 외부에서 접근하는 방식(공인 IP)으로 NAS에서 운영되고 있는 어플리케이션으로 접근하려다 보니 공유기나 운영체제의 정책에 따라 연결이 차단되어 접속에 실패했던 것이다.</p>\n<blockquote>\n<p>🔄️ <strong>NAT Loopback</strong>이란?</p>\n<p>내부망에 있는 클라이언트가 외부 IP(예: 116.xxx.xxx.xxx)를 통해 같은 내부망에 있는 서버에 접속하려고 할 때, 공유기가 그 트래픽을 다시 내부로 되돌려주는 기능이다.</p>\n</blockquote>\n<br>\n<br>\n<h3 id=\"2-해결-방법\" style=\"position:relative;\"><a href=\"#2-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\"2 해결 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 해결 방법</h3>\n<hr>\n<p>Mac OS에선 내부망 도메인 접속을 시도하더라도 유연하게 라우팅을 알아서 해주지만 윈도우 환경이라면 아래와 같은 조치가 필요하다.</p>\n<img src=\"https://jh8459.s3.ap-northeast-2.amazonaws.com/blog/2025-06-30-TIL/nas.png\">\n<center>우선 NAS의 내부 IP 주소를 확인해야한다.</center><br><br>\n<ol>\n<li>\n<p>메모장을 관리자 권한으로 실행한다.</p>\n</li>\n<li>\n<p><code class=\"language-text\">hosts</code> 파일을 수정한다.</p>\n<blockquote>\n<p>C:\\Windows\\System32\\drivers\\etc\\hosts</p>\n</blockquote>\n</li>\n<li>\n<p>도메인을 내부 IP로 직접 지정</p>\n<blockquote>\n<p>192.168.xxx.xxx lottery.jh8459.com</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># Copyright (c) 1993-2009 Microsoft Corp.\n#\n# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.\n#\n# This file contains the mappings of IP addresses to host names. Each\n# entry should be kept on an individual line. The IP address should\n# be placed in the first column followed by the corresponding host name.\n# The IP address and the host name should be separated by at least one\n# space.\n#\n# Additionally, comments (such as these) may be inserted on individual\n# lines or following the machine name denoted by a '#' symbol.\n#\n# For example:\n#\n#      102.54.94.97     rhino.acme.com          # source server\n#       38.25.63.10     x.acme.com              # x client host\n\n# localhost name resolution is handled within DNS itself.\n#\t127.0.0.1       localhost\n#\t::1             localhost\n192.168.xxx.xxx lottery.jh8459.com</code></pre></div>\n</li>\n</ol>\n<br>\n<br>\n<p>요약하자면, 특정 도메인에 접속시 공인 IP가 아닌 내부 IP주소로 직접 지정하여 도메인 접근을 가능하게 해주었다.</p>\n<p><code class=\"language-text\">hosts</code> 파일을 저장한 직후, 브라우저에서 해당 도메인으로 접속해보면 공인 IP를 거치지 않고 NAS의 내부 IP로 직접 연결되어 정상적으로 페이지가 열린다.</p>\n<br>\n<br>\n<h2 id=\"-understanding\" style=\"position:relative;\"><a href=\"#-understanding\" aria-label=\" understanding permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 Understanding</h2>\n<p>네트워크 참 어렵다. 😮‍💨</p>\n<p>집에 서버를 직접 구축해서 도메인까지 올려본 경험이 없어서 도메인이 가리키는 IP가 공인 IP인지, 내부 IP인지에 따라 네트워크 레벨의 동작을 완전히 바꾼다는 점은 모르고 있었다.</p>\n<p>덕분에, 같은 네트워크를 사용하더라도 도메인 접속시 사용하는 운영체제나 공유기 설정에 따라서 다르게 동작할 수 있다는 점을 인지하였다.</p>\n<p>한번 설정해두면 다신 겪어보진 않을 이슈일거 같기에 기록으로 남겨둔다.</p>\n<br>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EF%B8%8F-today-i-learned\">✍️ <strong>T</strong>oday <strong>I</strong> <strong>L</strong>earned</a></p>\n<ul>\n<li><a href=\"#1-%EB%AC%B8%EC%A0%9C%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%9C-%EC%9D%B4%EC%9C%A0\">1. 문제가 발생한 이유</a></li>\n<li><a href=\"#2-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\">2. 해결 방법</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-understanding\">🤔 Understanding</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 30, 2025","title":"내부망 도메인 접속 실패 이유와 해결 방법","categories":"TIL","author":"JH8459","emoji":"📚"},"fields":{"slug":"/2025-06-30-TIL/"}},"site":{"siteMetadata":{"siteUrl":"https://blog.jh8459.com","comments":{"utterances":{"repo":"JH8459/JH8459.github.io"}}}}},"pageContext":{"slug":"/2025-06-27-RETROSPECT/","nextSlug":"/2025-05-20-TIL/","prevSlug":"/2025-06-30-TIL/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}